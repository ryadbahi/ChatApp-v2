import{g as Ht,c as jr,r as R,a as La,R as Y}from"./react-vendor-oin3n_bH.js";var Gu=Symbol.for("immer-nothing"),cn=Symbol.for("immer-draftable"),Te=Symbol.for("immer-state");function Me(r,...e){throw new Error(`[Immer] minified error nr: ${r}. Full error at: https://bit.ly/3cXEKWf`)}var Dr=Object.getPrototypeOf;function gr(r){return!!r&&!!r[Te]}function ar(r){return r?Yu(r)||Array.isArray(r)||!!r[cn]||!!r.constructor?.[cn]||_r(r)||et(r):!1}var za=Object.prototype.constructor.toString();function Yu(r){if(!r||typeof r!="object")return!1;const e=Dr(r);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===za}function Vr(r,e){Qr(r)===0?Reflect.ownKeys(r).forEach(t=>{e(t,r[t],r)}):r.forEach((t,n)=>e(n,t,r))}function Qr(r){const e=r[Te];return e?e.type_:Array.isArray(r)?1:_r(r)?2:et(r)?3:0}function Pt(r,e){return Qr(r)===2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)}function Xu(r,e,t){const n=Qr(r);n===2?r.set(e,t):n===3?r.add(t):r[e]=t}function $a(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}function _r(r){return r instanceof Map}function et(r){return r instanceof Set}function _e(r){return r.copy_||r.base_}function St(r,e){if(_r(r))return new Map(r);if(et(r))return new Set(r);if(Array.isArray(r))return Array.prototype.slice.call(r);const t=Yu(r);if(e===!0||e==="class_only"&&!t){const n=Object.getOwnPropertyDescriptors(r);delete n[Te];let u=Reflect.ownKeys(n);for(let a=0;a<u.length;a++){const i=u[a],s=n[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:r[i]})}return Object.create(Dr(r),n)}else{const n=Dr(r);if(n!==null&&t)return{...r};const u=Object.create(n);return Object.assign(u,r)}}function Kt(r,e=!1){return rt(r)||gr(r)||!ar(r)||(Qr(r)>1&&(r.set=r.add=r.clear=r.delete=Wa),Object.freeze(r),e&&Object.entries(r).forEach(([t,n])=>Kt(n,!0))),r}function Wa(){Me(2)}function rt(r){return Object.isFrozen(r)}var qa={};function ir(r){const e=qa[r];return e||Me(0,r),e}var wr;function Ju(){return wr}function Ha(r,e){return{drafts_:[],parent_:r,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function vn(r,e){e&&(ir("Patches"),r.patches_=[],r.inversePatches_=[],r.patchListener_=e)}function Tt(r){Rt(r),r.drafts_.forEach(Ka),r.drafts_=null}function Rt(r){r===wr&&(wr=r.parent_)}function dn(r){return wr=Ha(wr,r)}function Ka(r){const e=r[Te];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function hn(r,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return r!==void 0&&r!==t?(t[Te].modified_&&(Tt(e),Me(4)),ar(r)&&(r=Ur(e,r),e.parent_||Gr(e,r)),e.patches_&&ir("Patches").generateReplacementPatches_(t[Te].base_,r,e.patches_,e.inversePatches_)):r=Ur(e,t,[]),Tt(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),r!==Gu?r:void 0}function Ur(r,e,t){if(rt(e))return e;const n=e[Te];if(!n)return Vr(e,(u,a)=>Dn(r,n,e,u,a,t)),e;if(n.scope_!==r)return e;if(!n.modified_)return Gr(r,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const u=n.copy_;let a=u,i=!1;n.type_===3&&(a=new Set(u),u.clear(),i=!0),Vr(a,(s,f)=>Dn(r,n,u,s,f,t,i)),Gr(r,u,!1),t&&r.patches_&&ir("Patches").generatePatches_(n,t,r.patches_,r.inversePatches_)}return n.copy_}function Dn(r,e,t,n,u,a,i){if(gr(u)){const s=a&&e&&e.type_!==3&&!Pt(e.assigned_,n)?a.concat(n):void 0,f=Ur(r,u,s);if(Xu(t,n,f),gr(f))r.canAutoFreeze_=!1;else return}else i&&t.add(u);if(ar(u)&&!rt(u)){if(!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1)return;Ur(r,u),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,n)&&Gr(r,u)}}function Gr(r,e,t=!1){!r.parent_&&r.immer_.autoFreeze_&&r.canAutoFreeze_&&Kt(e,t)}function Va(r,e){const t=Array.isArray(r),n={type_:t?1:0,scope_:e?e.scope_:Ju(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:r,draft_:null,copy_:null,revoke_:null,isManual_:!1};let u=n,a=Vt;t&&(u=[n],a=yr);const{revoke:i,proxy:s}=Proxy.revocable(u,a);return n.draft_=s,n.revoke_=i,s}var Vt={get(r,e){if(e===Te)return r;const t=_e(r);if(!Pt(t,e))return Ua(r,t,e);const n=t[e];return r.finalized_||!ar(n)?n:n===at(r.base_,e)?(it(r),r.copy_[e]=kt(n,r)):n},has(r,e){return e in _e(r)},ownKeys(r){return Reflect.ownKeys(_e(r))},set(r,e,t){const n=Zu(_e(r),e);if(n?.set)return n.set.call(r.draft_,t),!0;if(!r.modified_){const u=at(_e(r),e),a=u?.[Te];if(a&&a.base_===t)return r.copy_[e]=t,r.assigned_[e]=!1,!0;if($a(t,u)&&(t!==void 0||Pt(r.base_,e)))return!0;it(r),jt(r)}return r.copy_[e]===t&&(t!==void 0||e in r.copy_)||Number.isNaN(t)&&Number.isNaN(r.copy_[e])||(r.copy_[e]=t,r.assigned_[e]=!0),!0},deleteProperty(r,e){return at(r.base_,e)!==void 0||e in r.base_?(r.assigned_[e]=!1,it(r),jt(r)):delete r.assigned_[e],r.copy_&&delete r.copy_[e],!0},getOwnPropertyDescriptor(r,e){const t=_e(r),n=Reflect.getOwnPropertyDescriptor(t,e);return n&&{writable:!0,configurable:r.type_!==1||e!=="length",enumerable:n.enumerable,value:t[e]}},defineProperty(){Me(11)},getPrototypeOf(r){return Dr(r.base_)},setPrototypeOf(){Me(12)}},yr={};Vr(Vt,(r,e)=>{yr[r]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});yr.deleteProperty=function(r,e){return yr.set.call(this,r,e,void 0)};yr.set=function(r,e,t){return Vt.set.call(this,r[0],e,t,r[0])};function at(r,e){const t=r[Te];return(t?_e(t):r)[e]}function Ua(r,e,t){const n=Zu(e,t);return n?"value"in n?n.value:n.get?.call(r.draft_):void 0}function Zu(r,e){if(!(e in r))return;let t=Dr(r);for(;t;){const n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=Dr(t)}}function jt(r){r.modified_||(r.modified_=!0,r.parent_&&jt(r.parent_))}function it(r){r.copy_||(r.copy_=St(r.base_,r.scope_.immer_.useStrictShallowCopy_))}var Ga=class{constructor(r){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if(typeof e=="function"&&typeof t!="function"){const a=t;t=e;const i=this;return function(f=a,...c){return i.produce(f,v=>t.call(this,v,...c))}}typeof t!="function"&&Me(6),n!==void 0&&typeof n!="function"&&Me(7);let u;if(ar(e)){const a=dn(this),i=kt(e,void 0);let s=!0;try{u=t(i),s=!1}finally{s?Tt(a):Rt(a)}return vn(a,n),hn(u,a)}else if(!e||typeof e!="object"){if(u=t(e),u===void 0&&(u=e),u===Gu&&(u=void 0),this.autoFreeze_&&Kt(u,!0),n){const a=[],i=[];ir("Patches").generateReplacementPatches_(e,u,a,i),n(a,i)}return u}else Me(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(i,...s)=>this.produceWithPatches(i,f=>e(f,...s));let n,u;return[this.produce(e,t,(i,s)=>{n=i,u=s}),n,u]},typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze),typeof r?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(r.useStrictShallowCopy)}createDraft(r){ar(r)||Me(8),gr(r)&&(r=Ya(r));const e=dn(this),t=kt(r,void 0);return t[Te].isManual_=!0,Rt(e),t}finishDraft(r,e){const t=r&&r[Te];(!t||!t.isManual_)&&Me(9);const{scope_:n}=t;return vn(n,e),hn(void 0,n)}setAutoFreeze(r){this.autoFreeze_=r}setUseStrictShallowCopy(r){this.useStrictShallowCopy_=r}applyPatches(r,e){let t;for(t=e.length-1;t>=0;t--){const u=e[t];if(u.path.length===0&&u.op==="replace"){r=u.value;break}}t>-1&&(e=e.slice(t+1));const n=ir("Patches").applyPatches_;return gr(r)?n(r,e):this.produce(r,u=>n(u,e))}};function kt(r,e){const t=_r(r)?ir("MapSet").proxyMap_(r,e):et(r)?ir("MapSet").proxySet_(r,e):Va(r,e);return(e?e.scope_:Ju()).drafts_.push(t),t}function Ya(r){return gr(r)||Me(10,r),Qu(r)}function Qu(r){if(!ar(r)||rt(r))return r;const e=r[Te];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=St(r,e.scope_.immer_.useStrictShallowCopy_)}else t=St(r,!0);return Vr(t,(n,u)=>{Xu(t,n,Qu(u))}),e&&(e.finalized_=!1),t}var Re=new Ga,Xa=Re.produce;Re.produceWithPatches.bind(Re);Re.setAutoFreeze.bind(Re);Re.setUseStrictShallowCopy.bind(Re);Re.applyPatches.bind(Re);Re.createDraft.bind(Re);Re.finishDraft.bind(Re);var Ja={transform(r,e){var{current:t,affinity:n}=r;if(t!=null){var u=D.transform(t,e,{affinity:n});r.current=u,u==null&&r.unref()}}},Za={transform(r,e){var{current:t,affinity:n}=r;if(t!=null){var u=re.transform(t,e,{affinity:n});r.current=u,u==null&&r.unref()}}},Qa={transform(r,e){var{current:t,affinity:n}=r;if(t!=null){var u=b.transform(t,e,{affinity:n});r.current=u,u==null&&r.unref()}}},Yr=new WeakMap,Xr=new WeakMap,Br=new WeakMap,_u=new WeakMap,gn=new WeakMap,Cn=new WeakMap,mn=new WeakMap,D={ancestors(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=e,n=D.levels(r,e);return t?n=n.slice(1):n=n.slice(0,-1),n},common(r,e){for(var t=[],n=0;n<r.length&&n<e.length;n++){var u=r[n],a=e[n];if(u!==a)break;t.push(u)}return t},compare(r,e){for(var t=Math.min(r.length,e.length),n=0;n<t;n++){if(r[n]<e[n])return-1;if(r[n]>e[n])return 1}return 0},endsAfter(r,e){var t=r.length-1,n=r.slice(0,t),u=e.slice(0,t),a=r[t],i=e[t];return D.equals(n,u)&&a>i},endsAt(r,e){var t=r.length,n=r.slice(0,t),u=e.slice(0,t);return D.equals(n,u)},endsBefore(r,e){var t=r.length-1,n=r.slice(0,t),u=e.slice(0,t),a=r[t],i=e[t];return D.equals(n,u)&&a<i},equals(r,e){return r.length===e.length&&r.every((t,n)=>t===e[n])},hasPrevious(r){return r[r.length-1]>0},isAfter(r,e){return D.compare(r,e)===1},isAncestor(r,e){return r.length<e.length&&D.compare(r,e)===0},isBefore(r,e){return D.compare(r,e)===-1},isChild(r,e){return r.length===e.length+1&&D.compare(r,e)===0},isCommon(r,e){return r.length<=e.length&&D.compare(r,e)===0},isDescendant(r,e){return r.length>e.length&&D.compare(r,e)===0},isParent(r,e){return r.length+1===e.length&&D.compare(r,e)===0},isPath(r){return Array.isArray(r)&&(r.length===0||typeof r[0]=="number")},isSibling(r,e){if(r.length!==e.length)return!1;var t=r.slice(0,-1),n=e.slice(0,-1),u=r[r.length-1],a=e[e.length-1];return u!==a&&D.equals(t,n)},levels(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=e,n=[],u=0;u<=r.length;u++)n.push(r.slice(0,u));return t&&n.reverse(),n},next(r){if(r.length===0)throw new Error("Cannot get the next path of a root path [".concat(r,"], because it has no next index."));var e=r[r.length-1];return r.slice(0,-1).concat(e+1)},operationCanTransformPath(r){switch(r.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(r){if(r.length===0)throw new Error("Cannot get the parent path of the root path [".concat(r,"]."));return r.slice(0,-1)},previous(r){if(r.length===0)throw new Error("Cannot get the previous path of a root path [".concat(r,"], because it has no previous index."));var e=r[r.length-1];if(e<=0)throw new Error("Cannot get the previous path of a first child path [".concat(r,"] because it would result in a negative index."));return r.slice(0,-1).concat(e-1)},relative(r,e){if(!D.isAncestor(e,r)&&!D.equals(r,e))throw new Error("Cannot get the relative path of [".concat(r,"] inside ancestor [").concat(e,"], because it is not above or equal to the path."));return r.slice(e.length)},transform(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!r)return null;var n=[...r],{affinity:u="forward"}=t;if(r.length===0)return n;switch(e.type){case"insert_node":{var{path:a}=e;(D.equals(a,n)||D.endsBefore(a,n)||D.isAncestor(a,n))&&(n[a.length-1]+=1);break}case"remove_node":{var{path:i}=e;if(D.equals(i,n)||D.isAncestor(i,n))return null;D.endsBefore(i,n)&&(n[i.length-1]-=1);break}case"merge_node":{var{path:s,position:f}=e;D.equals(s,n)||D.endsBefore(s,n)?n[s.length-1]-=1:D.isAncestor(s,n)&&(n[s.length-1]-=1,n[s.length]+=f);break}case"split_node":{var{path:c,position:v}=e;if(D.equals(c,n)){if(u==="forward")n[n.length-1]+=1;else if(u!=="backward")return null}else D.endsBefore(c,n)?n[c.length-1]+=1:D.isAncestor(c,n)&&r[c.length]>=v&&(n[c.length-1]+=1,n[c.length]-=v);break}case"move_node":{var{path:h,newPath:d}=e;if(D.equals(h,d))return n;if(D.isAncestor(h,n)||D.equals(h,n)){var g=d.slice();return D.endsBefore(h,d)&&h.length<d.length&&(g[h.length-1]-=1),g.concat(n.slice(h.length))}else D.isSibling(h,d)&&(D.isAncestor(d,n)||D.equals(d,n))?D.endsBefore(h,n)?n[h.length-1]-=1:n[h.length-1]+=1:D.endsBefore(d,n)||D.equals(d,n)||D.isAncestor(d,n)?(D.endsBefore(h,n)&&(n[h.length-1]-=1),n[d.length-1]+=1):D.endsBefore(h,n)&&(D.equals(d,n)&&(n[d.length-1]+=1),n[h.length-1]-=1);break}}return n}};function Or(r){"@babel/helpers - typeof";return Or=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Or(r)}function _a(r,e){if(Or(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Or(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function ei(r){var e=_a(r,"string");return Or(e)==="symbol"?e:String(e)}function xe(r,e,t){return e=ei(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function pn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function le(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pn(Object(t),!0).forEach(function(n){xe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):pn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Bn=function(e,t){for(var n=arguments.length,u=new Array(n>2?n-2:0),a=2;a<n;a++)u[a-2]=arguments[a];return[...e.slice(0,t),...u,...e.slice(t)]},xr=function(e,t,n){for(var u=arguments.length,a=new Array(u>3?u-3:0),i=3;i<u;i++)a[i-3]=arguments[i];return[...e.slice(0,t),...a,...e.slice(t+n)]},En=xr,Ut=(r,e,t)=>{if(e.length===0)throw new Error("Cannot modify the editor");for(var n=L.get(r,e),u=e.slice(),a=t(n);u.length>1;){var i=u.pop(),s=L.get(r,u);a=le(le({},s),{},{children:xr(s.children,i,1,a)})}var f=u.pop();r.children=xr(r.children,f,1,a)},or=(r,e,t)=>{e.length===0?r.children=t(r.children):Ut(r,e,n=>{if(K.isText(n))throw new Error("Cannot get the element at path [".concat(e,"] because it refers to a leaf node: ").concat(Ce.stringify(n)));return le(le({},n),{},{children:t(n.children)})})},An=(r,e,t)=>Ut(r,e,n=>{if(!K.isText(n))throw new Error("Cannot get the leaf node at path [".concat(e,"] because it refers to a non-leaf node: ").concat(Ce.stringify(n)));return t(n)}),ri={transform(r,e){var t=!1;switch(e.type){case"insert_node":{var{path:n,node:u}=e;or(r,D.parent(n),P=>{var O=n[n.length-1];if(O>P.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(n,"] because the destination is past the end of the node."));return Bn(P,O,u)}),t=!0;break}case"insert_text":{var{path:a,offset:i,text:s}=e;if(s.length===0)break;An(r,a,P=>{var O=P.text.slice(0,i),S=P.text.slice(i);return le(le({},P),{},{text:O+s+S})}),t=!0;break}case"merge_node":{var{path:f}=e,c=f[f.length-1],v=D.previous(f),h=v[v.length-1];or(r,D.parent(f),P=>{var O=P[c],S=P[h],Q;if(K.isText(O)&&K.isText(S))Q=le(le({},S),{},{text:S.text+O.text});else if(!K.isText(O)&&!K.isText(S))Q=le(le({},S),{},{children:S.children.concat(O.children)});else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(f,"] to nodes of different interfaces: ").concat(Ce.stringify(O)," ").concat(Ce.stringify(S)));return xr(P,h,2,Q)}),t=!0;break}case"move_node":{var{path:d,newPath:g}=e,C=d[d.length-1];if(D.isAncestor(d,g))throw new Error("Cannot move a path [".concat(d,"] to new path [").concat(g,"] because the destination is inside itself."));var B=L.get(r,d);or(r,D.parent(d),P=>En(P,C,1));var E=D.transform(d,e),m=E[E.length-1];or(r,D.parent(E),P=>Bn(P,m,B)),t=!0;break}case"remove_node":{var{path:l}=e,A=l[l.length-1];if(or(r,D.parent(l),P=>En(P,A,1)),r.selection){var F=le({},r.selection);for(var[w,M]of b.points(F)){var I=re.transform(w,e);if(F!=null&&I!=null)F[M]=I;else{var z=void 0,$=void 0;for(var[W,V]of L.texts(r))if(D.compare(V,l)===-1)z=[W,V];else{$=[W,V];break}var T=!1;z&&$&&(D.equals($[1],l)?T=!D.hasPrevious($[1]):T=D.common(z[1],l).length<D.common($[1],l).length),z&&!T?F[M]={path:z[1],offset:z[0].text.length}:$?F[M]={path:$[1],offset:0}:F=null}}(!F||!b.equals(F,r.selection))&&(r.selection=F)}break}case"remove_text":{var{path:y,offset:j,text:k}=e;if(k.length===0)break;An(r,y,P=>{var O=P.text.slice(0,j),S=P.text.slice(j+k.length);return le(le({},P),{},{text:O+S})}),t=!0;break}case"set_node":{var{path:X,properties:U,newProperties:te}=e;if(X.length===0)throw new Error("Cannot set properties on the root node!");Ut(r,X,P=>{var O=le({},P);for(var S in te){if(S==="children"||S==="text")throw new Error('Cannot set the "'.concat(S,'" property of nodes!'));var Q=te[S];Q==null?delete O[S]:O[S]=Q}for(var q in U)te.hasOwnProperty(q)||delete O[q];return O});break}case"set_selection":{var{newProperties:_}=e;if(_==null){r.selection=null;break}if(r.selection==null){if(!b.isRange(_))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(Ce.stringify(_)," when there is no current selection."));r.selection=le({},_);break}var ee=le({},r.selection);for(var ue in _){var se=_[ue];if(se==null){if(ue==="anchor"||ue==="focus")throw new Error('Cannot remove the "'.concat(ue,'" selection property'));delete ee[ue]}else ee[ue]=se}r.selection=ee;break}case"split_node":{var{path:H,position:ae,properties:ge}=e,me=H[H.length-1];if(H.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(H,"] because the root node cannot be split."));or(r,D.parent(H),P=>{var O=P[me],S,Q;if(K.isText(O)){var q=O.text.slice(0,ae),de=O.text.slice(ae);S=le(le({},O),{},{text:q}),Q=le(le({},ge),{},{text:de})}else{var oe=O.children.slice(0,ae),ie=O.children.slice(ae);S=le(le({},O),{},{children:oe}),Q=le(le({},ge),{},{children:ie})}return xr(P,me,1,S,Q)}),t=!0;break}}if(t&&r.selection){var be=le({},r.selection);for(var[Pe,p]of b.points(be))be[p]=re.transform(Pe,e);b.equals(be,r.selection)||(r.selection=be)}}},ti={insertNodes(r,e,t){r.insertNodes(e,t)},liftNodes(r,e){r.liftNodes(e)},mergeNodes(r,e){r.mergeNodes(e)},moveNodes(r,e){r.moveNodes(e)},removeNodes(r,e){r.removeNodes(e)},setNodes(r,e,t){r.setNodes(e,t)},splitNodes(r,e){r.splitNodes(e)},unsetNodes(r,e,t){r.unsetNodes(e,t)},unwrapNodes(r,e){r.unwrapNodes(e)},wrapNodes(r,e,t){r.wrapNodes(e,t)}},ni={collapse(r,e){r.collapse(e)},deselect(r){r.deselect()},move(r,e){r.move(e)},select(r,e){r.select(e)},setPoint(r,e,t){r.setPoint(e,t)},setSelection(r,e){r.setSelection(e)}},we=r=>typeof r=="object"&&r!==null,ea=(r,e)=>{for(var t in r){var n=r[t],u=e[t];if(Array.isArray(n)&&Array.isArray(u)){if(n.length!==u.length)return!1;for(var a=0;a<n.length;a++)if(n[a]!==u[a])return!1}else if(we(n)&&we(u)){if(!ea(n,u))return!1}else if(n!==u)return!1}for(var i in e)if(r[i]===void 0&&e[i]!==void 0)return!1;return!0};function ui(r,e){if(r==null)return{};var t={},n=Object.keys(r),u,a;for(a=0;a<n.length;a++)u=n[a],!(e.indexOf(u)>=0)&&(t[u]=r[u]);return t}function Ve(r,e){if(r==null)return{};var t=ui(r,e),n,u;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(u=0;u<a.length;u++)n=a[u],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}var ai=["anchor","focus"];function bn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function ii(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bn(Object(t),!0).forEach(function(n){xe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):bn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var b={edges(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=e,{anchor:n,focus:u}=r;return b.isBackward(r)===t?[n,u]:[u,n]},end(r){var[,e]=b.edges(r);return e},equals(r,e){return re.equals(r.anchor,e.anchor)&&re.equals(r.focus,e.focus)},surrounds(r,e){var t=b.intersection(r,e);return t?b.equals(t,e):!1},includes(r,e){if(b.isRange(e)){if(b.includes(r,e.anchor)||b.includes(r,e.focus))return!0;var[t,n]=b.edges(r),[u,a]=b.edges(e);return re.isBefore(t,u)&&re.isAfter(n,a)}var[i,s]=b.edges(r),f=!1,c=!1;return re.isPoint(e)?(f=re.compare(e,i)>=0,c=re.compare(e,s)<=0):(f=D.compare(e,i.path)>=0,c=D.compare(e,s.path)<=0),f&&c},intersection(r,e){var t=Ve(r,ai),[n,u]=b.edges(r),[a,i]=b.edges(e),s=re.isBefore(n,a)?a:n,f=re.isBefore(u,i)?u:i;return re.isBefore(f,s)?null:ii({anchor:s,focus:f},t)},isBackward(r){var{anchor:e,focus:t}=r;return re.isAfter(e,t)},isCollapsed(r){var{anchor:e,focus:t}=r;return re.equals(e,t)},isExpanded(r){return!b.isCollapsed(r)},isForward(r){return!b.isBackward(r)},isRange(r){return we(r)&&re.isPoint(r.anchor)&&re.isPoint(r.focus)},*points(r){yield[r.anchor,"anchor"],yield[r.focus,"focus"]},start(r){var[e]=b.edges(r);return e},transform(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(r===null)return null;var{affinity:n="inward"}=t,u,a;if(n==="inward"){var i=b.isCollapsed(r);b.isForward(r)?(u="forward",a=i?u:"backward"):(u="backward",a=i?u:"forward")}else n==="outward"?b.isForward(r)?(u="backward",a="forward"):(u="forward",a="backward"):(u=n,a=n);var s=re.transform(r.anchor,e,{affinity:u}),f=re.transform(r.focus,e,{affinity:a});return!s||!f?null:{anchor:s,focus:f}}},Fn=function(e){var{deep:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!we(e))return!1;var n=typeof e.apply=="function";if(n)return!1;var u=t?L.isNodeList(e.children):Array.isArray(e.children);return u},G={isAncestor(r){var{deep:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return we(r)&&L.isNodeList(r.children,{deep:e})},isElement:Fn,isElementList(r){var{deep:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(r)&&r.every(t=>G.isElement(t,{deep:e}))},isElementProps(r){return r.children!==void 0},isElementType:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return Fn(e)&&e[n]===t},matches(r,e){for(var t in e)if(t!=="children"&&r[t]!==e[t])return!1;return!0}},si=["children"],oi=["text"],L={ancestor(r,e){var t=L.get(r,e);if(K.isText(t))throw new Error("Cannot get the ancestor node at path [".concat(e,"] because it refers to a text node instead: ").concat(Ce.stringify(t)));return t},ancestors(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var n of D.ancestors(e,t)){var u=L.ancestor(r,n),a=[u,n];yield a}}()},child(r,e){if(K.isText(r))throw new Error("Cannot get the child of a text node: ".concat(Ce.stringify(r)));var t=r.children[e];if(t==null)throw new Error("Cannot get child at index `".concat(e,"` in node: ").concat(Ce.stringify(r)));return t},children(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var{reverse:n=!1}=t,u=L.ancestor(r,e),{children:a}=u,i=n?a.length-1:0;n?i>=0:i<a.length;){var s=L.child(u,i),f=e.concat(i);yield[s,f],i=n?i-1:i+1}}()},common(r,e,t){var n=D.common(e,t),u=L.get(r,n);return[u,n]},descendant(r,e){var t=L.get(r,e);if(o.isEditor(t))throw new Error("Cannot get the descendant node at path [".concat(e,"] because it refers to the root editor node instead: ").concat(Ce.stringify(t)));return t},descendants(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[t,n]of L.nodes(r,e))n.length!==0&&(yield[t,n])}()},elements(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[t,n]of L.nodes(r,e))G.isElement(t)&&(yield[t,n])}()},extractProps(r){if(G.isAncestor(r)){var e=Ve(r,si);return e}else{var e=Ve(r,oi);return e}},first(r,e){for(var t=e.slice(),n=L.get(r,t);n&&!(K.isText(n)||n.children.length===0);)n=n.children[0],t.push(0);return[n,t]},fragment(r,e){if(K.isText(r))throw new Error("Cannot get a fragment starting from a root text node: ".concat(Ce.stringify(r)));var t=Xa({children:r.children},n=>{var[u,a]=b.edges(e),i=L.nodes(n,{reverse:!0,pass:d=>{var[,g]=d;return!b.includes(e,g)}});for(var[,s]of i){if(!b.includes(e,s)){var f=L.parent(n,s),c=s[s.length-1];f.children.splice(c,1)}if(D.equals(s,a.path)){var v=L.leaf(n,s);v.text=v.text.slice(0,a.offset)}if(D.equals(s,u.path)){var h=L.leaf(n,s);h.text=h.text.slice(u.offset)}}o.isEditor(n)&&(n.selection=null)});return t.children},get(r,e){var t=L.getIf(r,e);if(t===void 0)throw new Error("Cannot find a descendant at path [".concat(e,"] in node: ").concat(Ce.stringify(r)));return t},getIf(r,e){for(var t=r,n=0;n<e.length;n++){var u=e[n];if(K.isText(t)||!t.children[u])return;t=t.children[u]}return t},has(r,e){for(var t=r,n=0;n<e.length;n++){var u=e[n];if(K.isText(t)||!t.children[u])return!1;t=t.children[u]}return!0},isNode(r){var{deep:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return K.isText(r)||G.isElement(r,{deep:e})||o.isEditor(r,{deep:e})},isNodeList(r){var{deep:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(r)&&r.every(t=>L.isNode(t,{deep:e}))},last(r,e){for(var t=e.slice(),n=L.get(r,t);n&&!(K.isText(n)||n.children.length===0);){var u=n.children.length-1;n=n.children[u],t.push(u)}return[n,t]},leaf(r,e){var t=L.get(r,e);if(!K.isText(t))throw new Error("Cannot get the leaf node at path [".concat(e,"] because it refers to a non-leaf node: ").concat(Ce.stringify(t)));return t},levels(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var n of D.levels(e,t)){var u=L.get(r,n);yield[u,n]}}()},matches(r,e){return G.isElement(r)&&G.isElementProps(e)&&G.matches(r,e)||K.isText(r)&&K.isTextProps(e)&&K.matches(r,e)},nodes(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var{pass:t,reverse:n=!1}=e,{from:u=[],to:a}=e,i=new Set,s=[],f=r;!(a&&(n?D.isBefore(s,a):D.isAfter(s,a)));){if(i.has(f)||(yield[f,s]),!i.has(f)&&!K.isText(f)&&f.children.length!==0&&(t==null||t([f,s])===!1)){i.add(f);var c=n?f.children.length-1:0;D.isAncestor(s,u)&&(c=u[s.length]),s=s.concat(c),f=L.get(r,s);continue}if(s.length===0)break;if(!n){var v=D.next(s);if(L.has(r,v)){s=v,f=L.get(r,s);continue}}if(n&&s[s.length-1]!==0){var h=D.previous(s);s=h,f=L.get(r,s);continue}s=D.parent(s),f=L.get(r,s),i.add(f)}}()},parent(r,e){var t=D.parent(e),n=L.get(r,t);if(K.isText(n))throw new Error("Cannot get the parent of path [".concat(e,"] because it does not exist in the root."));return n},string(r){return K.isText(r)?r.text:r.children.map(L.string).join("")},texts(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[t,n]of L.nodes(r,e))K.isText(t)&&(yield[t,n])}()}};function wn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function fe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wn(Object(t),!0).forEach(function(n){xe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):wn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var pr={isNodeOperation(r){return pr.isOperation(r)&&r.type.endsWith("_node")},isOperation(r){if(!we(r))return!1;switch(r.type){case"insert_node":return D.isPath(r.path)&&L.isNode(r.node);case"insert_text":return typeof r.offset=="number"&&typeof r.text=="string"&&D.isPath(r.path);case"merge_node":return typeof r.position=="number"&&D.isPath(r.path)&&we(r.properties);case"move_node":return D.isPath(r.path)&&D.isPath(r.newPath);case"remove_node":return D.isPath(r.path)&&L.isNode(r.node);case"remove_text":return typeof r.offset=="number"&&typeof r.text=="string"&&D.isPath(r.path);case"set_node":return D.isPath(r.path)&&we(r.properties)&&we(r.newProperties);case"set_selection":return r.properties===null&&b.isRange(r.newProperties)||r.newProperties===null&&b.isRange(r.properties)||we(r.properties)&&we(r.newProperties);case"split_node":return D.isPath(r.path)&&typeof r.position=="number"&&we(r.properties);default:return!1}},isOperationList(r){return Array.isArray(r)&&r.every(e=>pr.isOperation(e))},isSelectionOperation(r){return pr.isOperation(r)&&r.type.endsWith("_selection")},isTextOperation(r){return pr.isOperation(r)&&r.type.endsWith("_text")},inverse(r){switch(r.type){case"insert_node":return fe(fe({},r),{},{type:"remove_node"});case"insert_text":return fe(fe({},r),{},{type:"remove_text"});case"merge_node":return fe(fe({},r),{},{type:"split_node",path:D.previous(r.path)});case"move_node":{var{newPath:e,path:t}=r;if(D.equals(e,t))return r;if(D.isSibling(t,e))return fe(fe({},r),{},{path:e,newPath:t});var n=D.transform(t,r),u=D.transform(D.next(t),r);return fe(fe({},r),{},{path:n,newPath:u})}case"remove_node":return fe(fe({},r),{},{type:"insert_node"});case"remove_text":return fe(fe({},r),{},{type:"insert_text"});case"set_node":{var{properties:a,newProperties:i}=r;return fe(fe({},r),{},{properties:i,newProperties:a})}case"set_selection":{var{properties:s,newProperties:f}=r;return s==null?fe(fe({},r),{},{properties:f,newProperties:null}):f==null?fe(fe({},r),{},{properties:null,newProperties:s}):fe(fe({},r),{},{properties:f,newProperties:s})}case"split_node":return fe(fe({},r),{},{type:"merge_node",path:D.next(r.path)})}}},li=function(e){var{deep:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!we(e))return!1;var n=typeof e.addMark=="function"&&typeof e.apply=="function"&&typeof e.deleteFragment=="function"&&typeof e.insertBreak=="function"&&typeof e.insertSoftBreak=="function"&&typeof e.insertFragment=="function"&&typeof e.insertNode=="function"&&typeof e.insertText=="function"&&typeof e.isElementReadOnly=="function"&&typeof e.isInline=="function"&&typeof e.isSelectable=="function"&&typeof e.isVoid=="function"&&typeof e.normalizeNode=="function"&&typeof e.onChange=="function"&&typeof e.removeMark=="function"&&typeof e.getDirtyPaths=="function"&&(e.marks===null||we(e.marks))&&(e.selection===null||b.isRange(e.selection))&&(!t||L.isNodeList(e.children))&&pr.isOperationList(e.operations);return n},o={above(r,e){return r.above(e)},addMark(r,e,t){r.addMark(e,t)},after(r,e,t){return r.after(e,t)},before(r,e,t){return r.before(e,t)},deleteBackward(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:t="character"}=e;r.deleteBackward(t)},deleteForward(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:t="character"}=e;r.deleteForward(t)},deleteFragment(r,e){r.deleteFragment(e)},edges(r,e){return r.edges(e)},elementReadOnly(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return r.elementReadOnly(e)},end(r,e){return r.end(e)},first(r,e){return r.first(e)},fragment(r,e){return r.fragment(e)},hasBlocks(r,e){return r.hasBlocks(e)},hasInlines(r,e){return r.hasInlines(e)},hasPath(r,e){return r.hasPath(e)},hasTexts(r,e){return r.hasTexts(e)},insertBreak(r){r.insertBreak()},insertFragment(r,e,t){r.insertFragment(e,t)},insertNode(r,e){r.insertNode(e)},insertSoftBreak(r){r.insertSoftBreak()},insertText(r,e){r.insertText(e)},isBlock(r,e){return r.isBlock(e)},isEdge(r,e,t){return r.isEdge(e,t)},isEditor(r){return li(r)},isElementReadOnly(r,e){return r.isElementReadOnly(e)},isEmpty(r,e){return r.isEmpty(e)},isEnd(r,e,t){return r.isEnd(e,t)},isInline(r,e){return r.isInline(e)},isNormalizing(r){return r.isNormalizing()},isSelectable(r,e){return r.isSelectable(e)},isStart(r,e,t){return r.isStart(e,t)},isVoid(r,e){return r.isVoid(e)},last(r,e){return r.last(e)},leaf(r,e,t){return r.leaf(e,t)},levels(r,e){return r.levels(e)},marks(r){return r.getMarks()},next(r,e){return r.next(e)},node(r,e,t){return r.node(e,t)},nodes(r,e){return r.nodes(e)},normalize(r,e){r.normalize(e)},parent(r,e,t){return r.parent(e,t)},path(r,e,t){return r.path(e,t)},pathRef(r,e,t){return r.pathRef(e,t)},pathRefs(r){return r.pathRefs()},point(r,e,t){return r.point(e,t)},pointRef(r,e,t){return r.pointRef(e,t)},pointRefs(r){return r.pointRefs()},positions(r,e){return r.positions(e)},previous(r,e){return r.previous(e)},range(r,e,t){return r.range(e,t)},rangeRef(r,e,t){return r.rangeRef(e,t)},rangeRefs(r){return r.rangeRefs()},removeMark(r,e){r.removeMark(e)},setNormalizing(r,e){r.setNormalizing(e)},start(r,e){return r.start(e)},string(r,e,t){return r.string(e,t)},unhangRange(r,e,t){return r.unhangRange(e,t)},void(r,e){return r.void(e)},withoutNormalizing(r,e){r.withoutNormalizing(e)},shouldMergeNodesRemovePrevNode:(r,e,t)=>r.shouldMergeNodesRemovePrevNode(e,t)},fi={isSpan(r){return Array.isArray(r)&&r.length===2&&r.every(D.isPath)}};function yn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function On(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yn(Object(t),!0).forEach(function(n){xe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):yn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var re={compare(r,e){var t=D.compare(r.path,e.path);return t===0?r.offset<e.offset?-1:r.offset>e.offset?1:0:t},isAfter(r,e){return re.compare(r,e)===1},isBefore(r,e){return re.compare(r,e)===-1},equals(r,e){return r.offset===e.offset&&D.equals(r.path,e.path)},isPoint(r){return we(r)&&typeof r.offset=="number"&&D.isPath(r.path)},transform(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(r===null)return null;var{affinity:n="forward"}=t,{path:u,offset:a}=r;switch(e.type){case"insert_node":case"move_node":{u=D.transform(u,e,t);break}case"insert_text":{D.equals(e.path,u)&&(e.offset<a||e.offset===a&&n==="forward")&&(a+=e.text.length);break}case"merge_node":{D.equals(e.path,u)&&(a+=e.position),u=D.transform(u,e,t);break}case"remove_text":{D.equals(e.path,u)&&e.offset<=a&&(a-=Math.min(a-e.offset,e.text.length));break}case"remove_node":{if(D.equals(e.path,u)||D.isAncestor(e.path,u))return null;u=D.transform(u,e,t);break}case"split_node":{if(D.equals(e.path,u)){if(e.position===a&&n==null)return null;(e.position<a||e.position===a&&n==="forward")&&(a-=e.position,u=D.transform(u,e,On(On({},t),{},{affinity:"forward"})))}else u=D.transform(u,e,t);break}default:return r}return{path:u,offset:a}}},xn=void 0,Ce={setScrubber(r){xn=r},stringify(r){return JSON.stringify(r,xn)}},ci=["text"],vi=["anchor","focus","merge"];function Pn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function qe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pn(Object(t),!0).forEach(function(n){xe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Pn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var K={equals(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:n=!1}=t;function u(a){var i=Ve(a,ci);return i}return ea(n?u(r):r,n?u(e):e)},isText(r){return we(r)&&typeof r.text=="string"},isTextList(r){return Array.isArray(r)&&r.every(e=>K.isText(e))},isTextProps(r){return r.text!==void 0},matches(r,e){for(var t in e)if(t!=="text"&&(!r.hasOwnProperty(t)||r[t]!==e[t]))return!1;return!0},decorations(r,e){var t=[{leaf:qe({},r)}];for(var n of e){var{anchor:u,focus:a,merge:i}=n,s=Ve(n,vi),[f,c]=b.edges(n),v=[],h=0,d=f.offset,g=c.offset,C=i??Object.assign;for(var{leaf:B}of t){var{length:E}=B.text,m=h;if(h+=E,d<=m&&h<=g){C(B,s),v.push({leaf:B});continue}if(d!==g&&(d===h||g===m)||d>h||g<m||g===m&&m!==0){v.push({leaf:B});continue}var l=B,A=void 0,F=void 0;if(g<h){var w=g-m;F={leaf:qe(qe({},l),{},{text:l.text.slice(w)})},l=qe(qe({},l),{},{text:l.text.slice(0,w)})}if(d>m){var M=d-m;A={leaf:qe(qe({},l),{},{text:l.text.slice(0,M)})},l=qe(qe({},l),{},{text:l.text.slice(M)})}C(l,s),A&&v.push(A),v.push({leaf:l}),F&&v.push(F)}t=v}if(t.length>1){var I=0;for(var[z,$]of t.entries()){var W=I,V=W+$.leaf.text.length,T={start:W,end:V};z===0&&(T.isFirst=!0),z===t.length-1&&(T.isLast=!0),$.position=T,I=V}}return t}},Gt=r=>r.selection?r.selection:r.children.length>0?o.end(r,[]):[0],mr=(r,e)=>{var[t]=o.node(r,e);return n=>n===t},Yt=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=!t,u=t?mi(e):e,a=J.None,i=J.None,s=0,f=null,c=null;for(var v of u){var h=v.codePointAt(0);if(!h)break;var d=Si(v,h);if([a,i]=n?[i,d]:[d,a],fr(a,J.ZWJ)&&fr(i,J.ExtPict)&&(n?f=Sn(e.substring(0,s)):f=Sn(e.substring(0,e.length-s)),!f)||fr(a,J.RI)&&fr(i,J.RI)&&(c!==null?c=!c:n?c=!0:c=Ni(e.substring(0,e.length-s)),!c)||a!==J.None&&i!==J.None&&Ri(a,i))break;s+=v.length}return s||1},di=/\s/,hi=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Di=/['\u2018\u2019]/,gi=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=0,u=!1;e.length>0;){var a=Yt(e,t),[i,s]=Xt(e,a,t);if(Ci(i,s,t))u=!0,n+=a;else if(!u)n+=a;else break;e=s}return n},Xt=(r,e,t)=>{if(t){var n=r.length-e;return[r.slice(n,r.length),r.slice(0,n)]}return[r.slice(0,e),r.slice(e)]},Ci=function r(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(di.test(e))return!1;if(Di.test(e)){var u=Yt(t,n),[a,i]=Xt(t,u,n);if(r(a,i,n))return!0}return!hi.test(e)},mi=function*(e){for(var t=e.length-1,n=0;n<e.length;n++){var u=e.charAt(t-n);if(Bi(u.charCodeAt(0))){var a=e.charAt(t-n-1);if(pi(a.charCodeAt(0))){yield a+u,n++;continue}}yield u}},pi=r=>r>=55296&&r<=56319,Bi=r=>r>=56320&&r<=57343,J;(function(r){r[r.None=0]="None",r[r.Extend=1]="Extend",r[r.ZWJ=2]="ZWJ",r[r.RI=4]="RI",r[r.Prepend=8]="Prepend",r[r.SpacingMark=16]="SpacingMark",r[r.L=32]="L",r[r.V=64]="V",r[r.T=128]="T",r[r.LV=256]="LV",r[r.LVT=512]="LVT",r[r.ExtPict=1024]="ExtPict",r[r.Any=2048]="Any"})(J||(J={}));var Ei=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,Ai=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,bi=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,Fi=/^[\u1100-\u115F\uA960-\uA97C]$/,wi=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,yi=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,Oi=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,xi=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,Pi=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,Si=(r,e)=>{var t=J.Any;return r.search(Ei)!==-1&&(t|=J.Extend),e===8205&&(t|=J.ZWJ),e>=127462&&e<=127487&&(t|=J.RI),r.search(Ai)!==-1&&(t|=J.Prepend),r.search(bi)!==-1&&(t|=J.SpacingMark),r.search(Fi)!==-1&&(t|=J.L),r.search(wi)!==-1&&(t|=J.V),r.search(yi)!==-1&&(t|=J.T),r.search(Oi)!==-1&&(t|=J.LV),r.search(xi)!==-1&&(t|=J.LVT),r.search(Pi)!==-1&&(t|=J.ExtPict),t};function fr(r,e){return(r&e)!==0}var Ti=[[J.L,J.L|J.V|J.LV|J.LVT],[J.LV|J.V,J.V|J.T],[J.LVT|J.T,J.T],[J.Any,J.Extend|J.ZWJ],[J.Any,J.SpacingMark],[J.Prepend,J.Any],[J.ZWJ,J.ExtPict],[J.RI,J.RI]];function Ri(r,e){return Ti.findIndex(t=>fr(r,t[0])&&fr(e,t[1]))===-1}var ji=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,Sn=r=>r.search(ji)!==-1,ki=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,Ni=r=>{var e=r.match(ki);if(e===null)return!1;var t=e[0].length/2;return t%2===1},Mi={delete(r,e){r.delete(e)},insertFragment(r,e,t){r.insertFragment(e,t)},insertText(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(r,()=>{var{voids:n=!1}=t,{at:u=Gt(r)}=t;if(D.isPath(u)&&(u=o.range(r,u)),b.isRange(u))if(b.isCollapsed(u))u=u.anchor;else{var a=b.end(u);if(!n&&o.void(r,{at:a}))return;var i=b.start(u),s=o.pointRef(r,i),f=o.pointRef(r,a);x.delete(r,{at:u,voids:n});var c=s.unref(),v=f.unref();u=c||v,x.setSelection(r,{anchor:u,focus:u})}if(!(!n&&o.void(r,{at:u})||o.elementReadOnly(r,{at:u}))){var{path:h,offset:d}=u;e.length>0&&r.apply({type:"insert_text",path:h,offset:d,text:e})}})}};function Tn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function kr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Tn(Object(t),!0).forEach(function(n){xe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Tn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var x=kr(kr(kr(kr({},ri),ti),ni),Mi),Wr=new WeakMap,Ii=r=>Wr.get(r)||!1,Li=(r,e,t)=>{var n=Wr.get(r)||!1;Wr.set(r,!0);try{e(),t()}finally{Wr.set(r,n)}};function ra(r,e,t){var n=Yr.get(r)||[],u=Xr.get(r)||new Set,a,i,s=h=>{if(h){var d=h.join(",");i.has(d)||(i.add(d),a.push(h))}};if(t){a=[],i=new Set;for(var f of n){var c=t(f);s(c)}}else a=n,i=u;for(var v of e)s(v);Yr.set(r,a),Xr.set(r,i)}var zi=(r,e)=>{for(var t of o.pathRefs(r))Ja.transform(t,e);for(var n of o.pointRefs(r))Za.transform(n,e);for(var u of o.rangeRefs(r))Qa.transform(u,e);if(!Ii(r)){var a=D.operationCanTransformPath(e)?i=>D.transform(i,e):void 0;ra(r,r.getDirtyPaths(e),a)}x.transform(r,e),r.operations.push(e),o.normalize(r,{operation:e}),e.type==="set_selection"&&(r.marks=null),Br.get(r)||(Br.set(r,!0),Promise.resolve().then(()=>{Br.set(r,!1),r.onChange({operation:e}),r.operations=[]}))},$i=(r,e)=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":{var{path:t}=e;return D.levels(t)}case"insert_node":{var{node:n,path:u}=e,a=D.levels(u),i=K.isText(n)?[]:Array.from(L.nodes(n),W=>{var[,V]=W;return u.concat(V)});return[...a,...i]}case"merge_node":{var{path:s}=e,f=D.ancestors(s),c=D.previous(s);return[...f,c]}case"move_node":{var{path:v,newPath:h}=e;if(D.equals(v,h))return[];var d=[],g=[];for(var C of D.ancestors(v)){var B=D.transform(C,e);d.push(B)}for(var E of D.ancestors(h)){var m=D.transform(E,e);g.push(m)}var l=g[g.length-1],A=h[h.length-1],F=l.concat(A);return[...d,...g,F]}case"remove_node":{var{path:w}=e,M=D.ancestors(w);return[...M]}case"split_node":{var{path:I}=e,z=D.levels(I),$=D.next(I);return[...z,$]}default:return[]}},Wi=r=>{var{selection:e}=r;return e?L.fragment(r,e):[]},qi=(r,e,t)=>{var[n,u]=e;if(!K.isText(n)){if(G.isElement(n)&&n.children.length===0){var a={text:""};x.insertNodes(r,a,{at:u.concat(0),voids:!0});return}for(var i=o.isEditor(n)?!1:G.isElement(n)&&(r.isInline(n)||n.children.length===0||K.isText(n.children[0])||r.isInline(n.children[0])),s=0,f=0;f<n.children.length;f++,s++){var c=L.get(r,u);if(!K.isText(c)){var v=c.children[s],h=c.children[s-1],d=f===n.children.length-1,g=K.isText(v)||G.isElement(v)&&r.isInline(v);if(g!==i)g?t!=null&&t.fallbackElement?x.wrapNodes(r,t.fallbackElement(),{at:u.concat(s),voids:!0}):x.removeNodes(r,{at:u.concat(s),voids:!0}):x.unwrapNodes(r,{at:u.concat(s),voids:!0}),s--;else if(G.isElement(v)){if(r.isInline(v)){if(h==null||!K.isText(h)){var C={text:""};x.insertNodes(r,C,{at:u.concat(s),voids:!0}),s++}else if(d){var B={text:""};x.insertNodes(r,B,{at:u.concat(s+1),voids:!0}),s++}}}else{if(!K.isText(v)&&!("children"in v)){var E=v;E.children=[]}h!=null&&K.isText(h)&&(K.equals(v,h,{loose:!0})?(x.mergeNodes(r,{at:u.concat(s),voids:!0}),s--):h.text===""?(x.removeNodes(r,{at:u.concat(s-1),voids:!0}),s--):v.text===""&&(x.removeNodes(r,{at:u.concat(s),voids:!0}),s--))}}}}},Hi=(r,e)=>{var{iteration:t,initialDirtyPathsLength:n}=e,u=n*42;if(t>u)throw new Error("Could not completely normalize the editor after ".concat(u," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},Ki=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:n=!1,mode:u="lowest",at:a=e.selection,match:i}=t;if(a){var s=o.path(e,a);if(!b.isRange(a)||D.equals(a.focus.path,a.anchor.path)){if(s.length===0)return;s=D.parent(s)}var f=u==="lowest",[c]=o.levels(e,{at:s,voids:n,match:i,reverse:f});return c}};function Rn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function jn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Rn(Object(t),!0).forEach(function(n){xe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Rn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Vi=(r,e,t)=>{var{selection:n}=r;if(n){var u=(h,d)=>{if(!K.isText(h))return!1;var[g,C]=o.parent(r,d);return!r.isVoid(g)||r.markableVoid(g)},a=b.isExpanded(n),i=!1;if(!a){var[s,f]=o.node(r,n);if(s&&u(s,f)){var[c]=o.parent(r,f);i=c&&r.markableVoid(c)}}if(a||i)x.setNodes(r,{[e]:t},{match:u,split:!0,voids:!0});else{var v=jn(jn({},o.marks(r)||{}),{},{[e]:t});r.marks=v,Br.get(r)||r.onChange()}}};function kn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function Nn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kn(Object(t),!0).forEach(function(n){xe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):kn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Ui=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=o.point(e,t,{edge:"end"}),a=o.end(e,[]),i={anchor:u,focus:a},{distance:s=1}=n,f=0,c;for(var v of o.positions(e,Nn(Nn({},n),{},{at:i}))){if(f>s)break;f!==0&&(c=v),f++}return c};function Mn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function In(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Mn(Object(t),!0).forEach(function(n){xe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Mn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Gi=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=o.start(e,[]),a=o.point(e,t,{edge:"start"}),i={anchor:u,focus:a},{distance:s=1}=n,f=0,c;for(var v of o.positions(e,In(In({},n),{},{at:i,reverse:!0}))){if(f>s)break;f!==0&&(c=v),f++}return c},Yi=(r,e)=>{var{selection:t}=r;t&&b.isCollapsed(t)&&x.delete(r,{unit:e,reverse:!0})},Xi=(r,e)=>{var{selection:t}=r;t&&b.isCollapsed(t)&&x.delete(r,{unit:e})},Ji=function(e){var{direction:t="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e;n&&b.isExpanded(n)&&x.delete(e,{reverse:t==="backward"})},Zi=(r,e)=>[o.start(r,e),o.end(r,e)];function Ln(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function zn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ln(Object(t),!0).forEach(function(n){xe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ln(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Qi=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o.above(e,zn(zn({},t),{},{match:n=>G.isElement(n)&&o.isElementReadOnly(e,n)}))},_i=(r,e)=>o.point(r,e,{edge:"end"}),es=(r,e)=>{var t=o.path(r,e,{edge:"start"});return o.node(r,t)},rs=(r,e)=>{var t=o.range(r,e);return L.fragment(r,t)};function $n(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function Wn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$n(Object(t),!0).forEach(function(n){xe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):$n(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var ts=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o.above(e,Wn(Wn({},t),{},{match:n=>G.isElement(n)&&o.isVoid(e,n)}))},ns=(r,e)=>e.children.some(t=>G.isElement(t)&&o.isBlock(r,t)),us=(r,e)=>e.children.some(t=>K.isText(t)||o.isInline(r,t)),as=(r,e)=>L.has(r,e),is=(r,e)=>e.children.every(t=>K.isText(t)),ss=r=>{x.splitNodes(r,{always:!0})},os=(r,e,t)=>{x.insertNodes(r,e,t)},ls=r=>{x.splitNodes(r,{always:!0})};function qn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function fs(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qn(Object(t),!0).forEach(function(n){xe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):qn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var cs=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:u,marks:a}=e;if(u){if(a){var i=fs({text:t},a);x.insertNodes(e,i,{at:n.at,voids:n.voids})}else x.insertText(e,t,n);e.marks=null}},vs=(r,e)=>!r.isInline(e),ds=(r,e,t)=>o.isStart(r,e,t)||o.isEnd(r,e,t),hs=(r,e)=>{var{children:t}=e,[n]=t;return t.length===0||t.length===1&&K.isText(n)&&n.text===""&&!r.isVoid(e)},Ds=(r,e,t)=>{var n=o.end(r,t);return re.equals(e,n)},gs=r=>{var e=_u.get(r);return e===void 0?!0:e},Cs=(r,e,t)=>{if(e.offset!==0)return!1;var n=o.start(r,t);return re.equals(e,n)},ms=(r,e)=>{var t=o.path(r,e,{edge:"end"});return o.node(r,t)},ps=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=o.path(e,t,n),a=L.leaf(e,u);return[a,u]};function Bs(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:t=r.selection,reverse:n=!1,voids:u=!1}=e,{match:a}=e;if(a==null&&(a=()=>!0),!!t){var i=[],s=o.path(r,t);for(var[f,c]of L.levels(r,s))if(a(f,c)&&(i.push([f,c]),!u&&G.isElement(f)&&o.isVoid(r,f)))break;n&&i.reverse(),yield*i}}()}var Es=["text"],As=["text"],bs=function(e){var{marks:t,selection:n}=e;if(!n)return null;var{anchor:u,focus:a}=n;if(t)return t;if(b.isExpanded(n)){var i=b.isBackward(n);i&&([a,u]=[u,a]);var s=o.isEnd(e,u,u.path);if(s){var f=o.after(e,u);f&&(u=f)}var[c]=o.nodes(e,{match:K.isText,at:{anchor:u,focus:a}});if(c){var[v]=c,h=Ve(v,Es);return h}else return{}}var{path:d}=u,[g]=o.leaf(e,d);if(u.offset===0){var C=o.previous(e,{at:d,match:K.isText}),B=o.above(e,{match:w=>G.isElement(w)&&o.isVoid(e,w)&&e.markableVoid(w)});if(!B){var E=o.above(e,{match:w=>G.isElement(w)&&o.isBlock(e,w)});if(C&&E){var[m,l]=C,[,A]=E;D.isAncestor(A,l)&&(g=m)}}}var F=Ve(g,As);return F},Fs=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:u=!1}=t,{match:a,at:i=e.selection}=t;if(i){var s=o.after(e,i,{voids:u});if(s){var[,f]=o.last(e,[]),c=[s.path,f];if(D.isPath(i)&&i.length===0)throw new Error("Cannot get the next node from the root node!");if(a==null)if(D.isPath(i)){var[v]=o.parent(e,i);a=d=>v.children.includes(d)}else a=()=>!0;var[h]=o.nodes(e,{at:c,match:a,mode:n,voids:u});return h}}},ws=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=o.path(e,t,n),a=L.get(e,u);return[a,u]};function ys(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:t=r.selection,mode:n="all",universal:u=!1,reverse:a=!1,voids:i=!1,pass:s}=e,{match:f}=e;if(f||(f=()=>!0),!!t){var c,v;if(fi.isSpan(t))c=t[0],v=t[1];else{var h=o.path(r,t,{edge:"start"}),d=o.path(r,t,{edge:"end"});c=a?d:h,v=a?h:d}var g=L.nodes(r,{reverse:a,from:c,to:v,pass:F=>{var[w,M]=F;return s&&s([w,M])?!0:G.isElement(w)?!!(!i&&(o.isVoid(r,w)||o.isElementReadOnly(r,w))):!1}}),C=[],B;for(var[E,m]of g){var l=B&&D.compare(m,B[1])===0;if(!(n==="highest"&&l)){if(!f(E,m)){if(u&&!l&&K.isText(E))return;continue}if(n==="lowest"&&l){B=[E,m];continue}var A=n==="lowest"?B:[E,m];A&&(u?C.push(A):yield A),B=[E,m]}}n==="lowest"&&B&&(u?C.push(B):yield B),u&&(yield*C)}}()}var Os=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:n=!1,operation:u}=t,a=v=>Yr.get(v)||[],i=v=>Xr.get(v)||new Set,s=v=>{var h=a(v).pop(),d=h.join(",");return i(v).delete(d),h};if(o.isNormalizing(e)){if(n){var f=Array.from(L.nodes(e),v=>{var[,h]=v;return h}),c=new Set(f.map(v=>v.join(",")));Yr.set(e,f),Xr.set(e,c)}a(e).length!==0&&o.withoutNormalizing(e,()=>{for(var v of a(e))if(L.has(e,v)){var h=o.node(e,v),[d,g]=h;G.isElement(d)&&d.children.length===0&&e.normalizeNode(h,{operation:u})}for(var C=a(e),B=C.length,E=0;C.length!==0;){if(!e.shouldNormalize({dirtyPaths:C,iteration:E,initialDirtyPathsLength:B,operation:u}))return;var m=s(e);if(L.has(e,m)){var l=o.node(e,m);e.normalizeNode(l,{operation:u})}E++,C=a(e)}})}},xs=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=o.path(e,t,n),a=D.parent(u),i=o.node(e,a);return i},Ps=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:u="forward"}=n,a={current:t,affinity:u,unref(){var{current:s}=a,f=o.pathRefs(e);return f.delete(a),a.current=null,s}},i=o.pathRefs(e);return i.add(a),a},Ss=r=>{var e=gn.get(r);return e||(e=new Set,gn.set(r,e)),e},Ts=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:u,edge:a}=n;if(D.isPath(t)){if(a==="start"){var[,i]=L.first(e,t);t=i}else if(a==="end"){var[,s]=L.last(e,t);t=s}}return b.isRange(t)&&(a==="start"?t=b.start(t):a==="end"?t=b.end(t):t=D.common(t.anchor.path,t.focus.path)),re.isPoint(t)&&(t=t.path),u!=null&&(t=t.slice(0,u)),t},Rs=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:u="forward"}=n,a={current:t,affinity:u,unref(){var{current:s}=a,f=o.pointRefs(e);return f.delete(a),a.current=null,s}},i=o.pointRefs(e);return i.add(a),a},js=r=>{var e=Cn.get(r);return e||(e=new Set,Cn.set(r,e)),e},ks=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:u="start"}=n;if(D.isPath(t)){var a;if(u==="end"){var[,i]=L.last(e,t);a=i}else{var[,s]=L.first(e,t);a=s}var f=L.get(e,a);if(!K.isText(f))throw new Error("Cannot get the ".concat(u," point in the node at path [").concat(t,"] because it has no ").concat(u," text node."));return{path:a,offset:u==="end"?f.text.length:0}}if(b.isRange(t)){var[c,v]=b.edges(t);return u==="start"?c:v}return t};function Ns(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:t=r.selection,unit:n="offset",reverse:u=!1,voids:a=!1}=e;if(!t)return;var i=o.range(r,t),[s,f]=b.edges(i),c=u?f:s,v=!1,h="",d=0,g=0,C=0;for(var[B,E]of o.nodes(r,{at:t,reverse:u,voids:a})){if(G.isElement(B)){if(!r.isSelectable(B))if(u){yield o.end(r,D.previous(E));continue}else{yield o.start(r,D.next(E));continue}if(!a&&(r.isVoid(B)||r.isElementReadOnly(B))){yield o.start(r,E);continue}if(r.isInline(B))continue;if(o.hasInlines(r,B)){var m=D.isAncestor(E,f.path)?f:o.end(r,E),l=D.isAncestor(E,s.path)?s:o.start(r,E);h=o.string(r,{anchor:l,focus:m},{voids:a}),v=!0}}if(K.isText(B)){var A=D.equals(E,c.path);for(A?(g=u?c.offset:B.text.length-c.offset,C=c.offset):(g=B.text.length,C=u?g:0),(A||v||n==="offset")&&(yield{path:E,offset:C},v=!1);;){if(d===0){if(h==="")break;d=F(h,n,u),h=Xt(h,d,u)[1]}if(C=u?C-d:C+d,g=g-d,g<0){d=-g;break}d=0,yield{path:E,offset:C}}}}function F(w,M,I){return M==="character"?Yt(w,I):M==="word"?gi(w,I):M==="line"||M==="block"?w.length:1}}()}var Ms=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:u=!1}=t,{match:a,at:i=e.selection}=t;if(i){var s=o.before(e,i,{voids:u});if(s){var[,f]=o.first(e,[]),c=[s.path,f];if(D.isPath(i)&&i.length===0)throw new Error("Cannot get the previous node from the root node!");if(a==null)if(D.isPath(i)){var[v]=o.parent(e,i);a=d=>v.children.includes(d)}else a=()=>!0;var[h]=o.nodes(e,{reverse:!0,at:c,match:a,mode:n,voids:u});return h}}},Is=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:u="forward"}=n,a={current:t,affinity:u,unref(){var{current:s}=a,f=o.rangeRefs(e);return f.delete(a),a.current=null,s}},i=o.rangeRefs(e);return i.add(a),a},Ls=r=>{var e=mn.get(r);return e||(e=new Set,mn.set(r,e)),e},zs=(r,e,t)=>{if(b.isRange(e)&&!t)return e;var n=o.start(r,e),u=o.end(r,t||e);return{anchor:n,focus:u}};function Hn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function $s(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Hn(Object(t),!0).forEach(function(n){xe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Hn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Ws=(r,e)=>{var{selection:t}=r;if(t){var n=(v,h)=>{if(!K.isText(v))return!1;var[d,g]=o.parent(r,h);return!r.isVoid(d)||r.markableVoid(d)},u=b.isExpanded(t),a=!1;if(!u){var[i,s]=o.node(r,t);if(i&&n(i,s)){var[f]=o.parent(r,s);a=f&&r.markableVoid(f)}}if(u||a)x.unsetNodes(r,e,{match:n,split:!0,voids:!0});else{var c=$s({},o.marks(r)||{});delete c[e],r.marks=c,Br.get(r)||r.onChange()}}},qs=(r,e)=>{_u.set(r,e)},Hs=(r,e)=>o.point(r,e,{edge:"start"}),Ks=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:u=!1}=n,a=o.range(e,t),[i,s]=b.edges(a),f="";for(var[c,v]of o.nodes(e,{at:a,match:K.isText,voids:u})){var h=c.text;D.equals(v,s.path)&&(h=h.slice(0,s.offset)),D.equals(v,i.path)&&(h=h.slice(i.offset)),f+=h}return f},Vs=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:u=!1}=n,[a,i]=b.edges(t);if(a.offset!==0||i.offset!==0||b.isCollapsed(t)||D.hasPrevious(i.path))return t;var s=o.above(e,{at:i,match:C=>G.isElement(C)&&o.isBlock(e,C),voids:u}),f=s?s[1]:[],c=o.start(e,a),v={anchor:c,focus:i},h=!0;for(var[d,g]of o.nodes(e,{at:v,match:K.isText,reverse:!0,voids:u})){if(h){h=!1;continue}if(d.text!==""||D.isBefore(g,f)){i={path:g,offset:d.text.length};break}}return{anchor:a,focus:i}},Us=(r,e)=>{var t=o.isNormalizing(r);o.setNormalizing(r,!1);try{e()}finally{o.setNormalizing(r,t)}o.normalize(r)},Gs=(r,e,t)=>{var[n,u]=e;return G.isElement(n)&&o.isEmpty(r,n)||K.isText(n)&&n.text===""&&u[u.length-1]!==0},Ys=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var n,u,{reverse:a=!1,unit:i="character",distance:s=1,voids:f=!1}=t,{at:c=e.selection,hanging:v=!1}=t;if(c){var h=!1;if(b.isRange(c)&&b.isCollapsed(c)&&(h=!0,c=c.anchor),re.isPoint(c)){var d=o.void(e,{at:c,mode:"highest"});if(!f&&d){var[,g]=d;c=g}else{var C={unit:i,distance:s},B=a?o.before(e,c,C)||o.start(e,[]):o.after(e,c,C)||o.end(e,[]);c={anchor:c,focus:B},v=!0}}if(D.isPath(c)){x.removeNodes(e,{at:c,voids:f});return}if(!b.isCollapsed(c)){if(!v){var[,E]=b.edges(c),m=o.end(e,[]);re.equals(E,m)||(c=o.unhangRange(e,c,{voids:f}))}var[l,A]=b.edges(c),F=o.above(e,{match:q=>G.isElement(q)&&o.isBlock(e,q),at:l,voids:f}),w=o.above(e,{match:q=>G.isElement(q)&&o.isBlock(e,q),at:A,voids:f}),M=F&&w&&!D.equals(F[1],w[1]),I=D.equals(l.path,A.path),z=f?null:(n=o.void(e,{at:l,mode:"highest"}))!==null&&n!==void 0?n:o.elementReadOnly(e,{at:l,mode:"highest"}),$=f?null:(u=o.void(e,{at:A,mode:"highest"}))!==null&&u!==void 0?u:o.elementReadOnly(e,{at:A,mode:"highest"});if(z){var W=o.before(e,l);W&&F&&D.isAncestor(F[1],W.path)&&(l=W)}if($){var V=o.after(e,A);V&&w&&D.isAncestor(w[1],V.path)&&(A=V)}var T=[],y;for(var j of o.nodes(e,{at:c,voids:f})){var[k,X]=j;y&&D.compare(X,y)===0||(!f&&G.isElement(k)&&(o.isVoid(e,k)||o.isElementReadOnly(e,k))||!D.isCommon(X,l.path)&&!D.isCommon(X,A.path))&&(T.push(j),y=X)}var U=Array.from(T,q=>{var[,de]=q;return o.pathRef(e,de)}),te=o.pointRef(e,l),_=o.pointRef(e,A),ee="";if(!I&&!z){var ue=te.current,[se]=o.leaf(e,ue),{path:H}=ue,{offset:ae}=l,ge=se.text.slice(ae);ge.length>0&&(e.apply({type:"remove_text",path:H,offset:ae,text:ge}),ee=ge)}if(U.reverse().map(q=>q.unref()).filter(q=>q!==null).forEach(q=>x.removeNodes(e,{at:q,voids:f})),!$){var me=_.current,[be]=o.leaf(e,me),{path:Pe}=me,p=I?l.offset:0,P=be.text.slice(p,A.offset);P.length>0&&(e.apply({type:"remove_text",path:Pe,offset:p,text:P}),ee=P)}!I&&M&&_.current&&te.current&&x.mergeNodes(e,{at:_.current,hanging:!0,voids:f}),h&&a&&i==="character"&&ee.length>1&&ee.match(/[\u0980-\u09FF\u0E00-\u0E7F\u1000-\u109F\u0900-\u097F\u1780-\u17FF\u0D00-\u0D7F\u0B00-\u0B7F\u0A00-\u0A7F\u0B80-\u0BFF\u0C00-\u0C7F]+/)&&x.insertText(e,ee.slice(0,ee.length-s));var O=te.unref(),S=_.unref(),Q=a?O||S:S||O;t.at==null&&Q&&x.select(e,Q)}}})},Xs=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(e,()=>{var{hanging:u=!1,voids:a=!1}=n,{at:i=Gt(e),batchDirty:s=!0}=n;if(t.length){if(b.isRange(i))if(u||(i=o.unhangRange(e,i,{voids:a})),b.isCollapsed(i))i=i.anchor;else{var[,f]=b.edges(i);if(!a&&o.void(e,{at:f}))return;var c=o.pointRef(e,f);x.delete(e,{at:i}),i=c.unref()}else D.isPath(i)&&(i=o.start(e,i));if(!(!a&&o.void(e,{at:i}))){var v=o.above(e,{at:i,match:H=>G.isElement(H)&&o.isInline(e,H),mode:"highest",voids:a});if(v){var[,h]=v;if(o.isEnd(e,i,h)){var d=o.after(e,h);i=d}else if(o.isStart(e,i,h)){var g=o.before(e,h);i=g}}var C=o.above(e,{match:H=>G.isElement(H)&&o.isBlock(e,H),at:i,voids:a}),[,B]=C,E=o.isStart(e,i,B),m=o.isEnd(e,i,B),l=E&&m,[,A]=L.first({children:t},[]),[,F]=L.last({children:t},[]),w=H=>{var[ae,ge]=H,me=ge.length===0;return me?!1:l?!0:!(!E&&D.isAncestor(ge,A)&&G.isElement(ae)&&!e.isVoid(ae)&&!e.isInline(ae)||!m&&D.isAncestor(ge,F)&&G.isElement(ae)&&!e.isVoid(ae)&&!e.isInline(ae))},M=!0,I=[],z=[],$=[];for(var W of L.nodes({children:t},{pass:w})){var[V,T]=W;M&&G.isElement(V)&&!e.isInline(V)&&!D.isAncestor(T,A)&&(M=!1),w(W)&&(G.isElement(V)&&!e.isInline(V)?(M=!1,z.push(V)):M?I.push(V):$.push(V))}var[y]=o.nodes(e,{at:i,match:H=>K.isText(H)||o.isInline(e,H),mode:"highest",voids:a}),[,j]=y,k=o.isStart(e,i,j),X=o.isEnd(e,i,j),U=o.pathRef(e,m&&!$.length?D.next(B):B),te=o.pathRef(e,X?D.next(j):j),_=$.length>0;x.splitNodes(e,{at:i,match:H=>_?G.isElement(H)&&o.isBlock(e,H):K.isText(H)||o.isInline(e,H),mode:_?"lowest":"highest",always:_&&(!E||I.length>0)&&(!m||$.length>0),voids:a});var ee=o.pathRef(e,!k||k&&X?D.next(j):j);if(x.insertNodes(e,I,{at:ee.current,match:H=>K.isText(H)||o.isInline(e,H),mode:"highest",voids:a,batchDirty:s}),l&&!I.length&&z.length&&!$.length&&x.delete(e,{at:B,voids:a}),x.insertNodes(e,z,{at:U.current,match:H=>G.isElement(H)&&o.isBlock(e,H),mode:"lowest",voids:a,batchDirty:s}),x.insertNodes(e,$,{at:te.current,match:H=>K.isText(H)||o.isInline(e,H),mode:"highest",voids:a,batchDirty:s}),!n.at){var ue;if($.length>0&&te.current?ue=D.previous(te.current):z.length>0&&U.current?ue=D.previous(U.current):ee.current&&(ue=D.previous(ee.current)),ue){var se=o.end(e,ue);x.select(e,se)}}ee.unref(),U.unref(),te.unref()}}})},Js=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:n="anchor"}=t,{selection:u}=e;if(u){if(n==="anchor")x.select(e,u.anchor);else if(n==="focus")x.select(e,u.focus);else if(n==="start"){var[a]=b.edges(u);x.select(e,a)}else if(n==="end"){var[,i]=b.edges(u);x.select(e,i)}}else return},Zs=r=>{var{selection:e}=r;e&&r.apply({type:"set_selection",properties:e,newProperties:null})},Qs=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e,{distance:u=1,unit:a="character",reverse:i=!1}=t,{edge:s=null}=t;if(n){s==="start"&&(s=b.isBackward(n)?"focus":"anchor"),s==="end"&&(s=b.isBackward(n)?"anchor":"focus");var{anchor:f,focus:c}=n,v={distance:u,unit:a},h={};if(s==null||s==="anchor"){var d=i?o.before(e,f,v):o.after(e,f,v);d&&(h.anchor=d)}if(s==null||s==="focus"){var g=i?o.before(e,c,v):o.after(e,c,v);g&&(h.focus=g)}x.setSelection(e,h)}},_s=(r,e)=>{var{selection:t}=r;if(e=o.range(r,e),t){x.setSelection(r,e);return}if(!b.isRange(e))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(Ce.stringify(e)));r.apply({type:"set_selection",properties:t,newProperties:e})};function Kn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function Vn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Kn(Object(t),!0).forEach(function(n){xe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Kn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var eo=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:u}=e,{edge:a="both"}=n;if(u){a==="start"&&(a=b.isBackward(u)?"focus":"anchor"),a==="end"&&(a=b.isBackward(u)?"anchor":"focus");var{anchor:i,focus:s}=u,f=a==="anchor"?i:s;x.setSelection(e,{[a==="anchor"?"anchor":"focus"]:Vn(Vn({},f),t)})}},ro=(r,e)=>{var{selection:t}=r,n={},u={};if(t){for(var a in e)(a==="anchor"&&e.anchor!=null&&!re.equals(e.anchor,t.anchor)||a==="focus"&&e.focus!=null&&!re.equals(e.focus,t.focus)||a!=="anchor"&&a!=="focus"&&e[a]!==t[a])&&(n[a]=t[a],u[a]=e[a]);Object.keys(n).length>0&&r.apply({type:"set_selection",properties:n,newProperties:u})}},to=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(e,()=>{var{hanging:u=!1,voids:a=!1,mode:i="lowest",batchDirty:s=!0}=n,{at:f,match:c,select:v}=n;if(L.isNode(t)&&(t=[t]),t.length!==0){var[h]=t;if(f||(f=Gt(e),v!==!1&&(v=!0)),v==null&&(v=!1),b.isRange(f))if(u||(f=o.unhangRange(e,f,{voids:a})),b.isCollapsed(f))f=f.anchor;else{var[,d]=b.edges(f),g=o.pointRef(e,d);x.delete(e,{at:f}),f=g.unref()}if(re.isPoint(f)){c==null&&(K.isText(h)?c=W=>K.isText(W):e.isInline(h)?c=W=>K.isText(W)||o.isInline(e,W):c=W=>G.isElement(W)&&o.isBlock(e,W));var[C]=o.nodes(e,{at:f.path,match:c,mode:i,voids:a});if(C){var[,B]=C,E=o.pathRef(e,B),m=o.isEnd(e,f,B);x.splitNodes(e,{at:f,match:c,mode:i,voids:a});var l=E.unref();f=m?D.next(l):l}else return}var A=D.parent(f),F=f[f.length-1];if(!(!a&&o.void(e,{at:A}))){if(s){var w=[],M=D.levels(A);Li(e,()=>{var W=function(){var y=A.concat(F);F++;var j={type:"insert_node",path:y,node:V};e.apply(j),f=D.next(f),w.push(j),K.isText(V)?M.push(y):M.push(...Array.from(L.nodes(V),k=>{var[,X]=k;return y.concat(X)}))};for(var V of t)W()},()=>{ra(e,M,W=>{var V=W;for(var T of w)if(D.operationCanTransformPath(T)&&(V=D.transform(V,T),!V))return null;return V})})}else for(var I of t){var z=A.concat(F);F++,e.apply({type:"insert_node",path:z,node:I}),f=D.next(f)}if(f=D.previous(f),v){var $=o.end(e,f);$&&x.select(e,$)}}}})},no=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{at:n=e.selection,mode:u="lowest",voids:a=!1}=t,{match:i}=t;if(i==null&&(i=D.isPath(n)?mr(e,n):F=>G.isElement(F)&&o.isBlock(e,F)),!!n){var s=o.nodes(e,{at:n,match:i,mode:u,voids:a}),f=Array.from(s,F=>{var[,w]=F;return o.pathRef(e,w)});for(var c of f){var v=c.unref();if(v.length<2)throw new Error("Cannot lift node at a path [".concat(v,"] because it has a depth of less than `2`."));var h=o.node(e,D.parent(v)),[d,g]=h,C=v[v.length-1],{length:B}=d.children;if(B===1){var E=D.next(g);x.moveNodes(e,{at:v,to:E,voids:a}),x.removeNodes(e,{at:g,voids:a})}else if(C===0)x.moveNodes(e,{at:v,to:g,voids:a});else if(C===B-1){var m=D.next(g);x.moveNodes(e,{at:v,to:m,voids:a})}else{var l=D.next(v),A=D.next(g);x.splitNodes(e,{at:l,voids:a}),x.moveNodes(e,{at:v,to:A,voids:a})}}}})},uo=["text"],ao=["children"],ta=(r,e)=>{if(G.isElement(e)){var t=e;return o.isVoid(r,e)?!0:t.children.length===1?ta(r,t.children[0]):!1}else return!o.isEditor(e)},io=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{match:n,at:u=e.selection}=t,{hanging:a=!1,voids:i=!1,mode:s="lowest"}=t;if(u){if(n==null)if(D.isPath(u)){var[f]=o.parent(e,u);n=W=>f.children.includes(W)}else n=W=>G.isElement(W)&&o.isBlock(e,W);if(!a&&b.isRange(u)&&(u=o.unhangRange(e,u,{voids:i})),b.isRange(u))if(b.isCollapsed(u))u=u.anchor;else{var[,c]=b.edges(u),v=o.pointRef(e,c);x.delete(e,{at:u}),u=v.unref(),t.at==null&&x.select(e,u)}var[h]=o.nodes(e,{at:u,match:n,voids:i,mode:s}),d=o.previous(e,{at:u,match:n,voids:i,mode:s});if(!(!h||!d)){var[g,C]=h,[B,E]=d;if(!(C.length===0||E.length===0)){var m=D.next(E),l=D.common(C,E),A=D.isSibling(C,E),F=Array.from(o.levels(e,{at:C}),W=>{var[V]=W;return V}).slice(l.length).slice(0,-1),w=o.above(e,{at:C,mode:"highest",match:W=>F.includes(W)&&ta(e,W)}),M=w&&o.pathRef(e,w[1]),I,z;if(K.isText(g)&&K.isText(B)){var $=Ve(g,uo);z=B.text.length,I=$}else if(G.isElement(g)&&G.isElement(B)){var $=Ve(g,ao);z=B.children.length,I=$}else throw new Error("Cannot merge the node at path [".concat(C,"] with the previous sibling because it is not the same kind: ").concat(Ce.stringify(g)," ").concat(Ce.stringify(B)));A||x.moveNodes(e,{at:C,to:m,voids:i}),M&&x.removeNodes(e,{at:M.current,voids:i}),o.shouldMergeNodesRemovePrevNode(e,d,h)?x.removeNodes(e,{at:E,voids:i}):e.apply({type:"merge_node",path:m,position:z,properties:I}),M&&M.unref()}}}})},so=(r,e)=>{o.withoutNormalizing(r,()=>{var{to:t,at:n=r.selection,mode:u="lowest",voids:a=!1}=e,{match:i}=e;if(n){i==null&&(i=D.isPath(n)?mr(r,n):g=>G.isElement(g)&&o.isBlock(r,g));var s=o.pathRef(r,t),f=o.nodes(r,{at:n,match:i,mode:u,voids:a}),c=Array.from(f,g=>{var[,C]=g;return o.pathRef(r,C)});for(var v of c){var h=v.unref(),d=s.current;h.length!==0&&r.apply({type:"move_node",path:h,newPath:d}),s.current&&D.isSibling(d,h)&&D.isAfter(d,h)&&(s.current=D.next(s.current))}s.unref()}})},oo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:u=!1,mode:a="lowest"}=t,{at:i=e.selection,match:s}=t;if(i){s==null&&(s=D.isPath(i)?mr(e,i):g=>G.isElement(g)&&o.isBlock(e,g)),!n&&b.isRange(i)&&(i=o.unhangRange(e,i,{voids:u}));var f=o.nodes(e,{at:i,match:s,mode:a,voids:u}),c=Array.from(f,g=>{var[,C]=g;return o.pathRef(e,C)});for(var v of c){var h=v.unref();if(h){var[d]=o.node(e,h);e.apply({type:"remove_node",path:h,node:d})}}}})},lo=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(e,()=>{var{match:u,at:a=e.selection,compare:i,merge:s}=n,{hanging:f=!1,mode:c="lowest",split:v=!1,voids:h=!1}=n;if(a){if(u==null&&(u=D.isPath(a)?mr(e,a):z=>G.isElement(z)&&o.isBlock(e,z)),!f&&b.isRange(a)&&(a=o.unhangRange(e,a,{voids:h})),v&&b.isRange(a)){if(b.isCollapsed(a)&&o.leaf(e,a.anchor)[0].text.length>0)return;var d=o.rangeRef(e,a,{affinity:"inward"}),[g,C]=b.edges(a),B=c==="lowest"?"lowest":"highest",E=o.isEnd(e,C,C.path);x.splitNodes(e,{at:C,match:u,mode:B,voids:h,always:!E});var m=o.isStart(e,g,g.path);x.splitNodes(e,{at:g,match:u,mode:B,voids:h,always:!m}),a=d.unref(),n.at==null&&x.select(e,a)}i||(i=(z,$)=>z!==$);for(var[l,A]of o.nodes(e,{at:a,match:u,mode:c,voids:h})){var F={},w={};if(A.length!==0){var M=!1;for(var I in t)I==="children"||I==="text"||i(t[I],l[I])&&(M=!0,l.hasOwnProperty(I)&&(F[I]=l[I]),s?t[I]!=null&&(w[I]=s(l[I],t[I])):t[I]!=null&&(w[I]=t[I]));M&&e.apply({type:"set_node",path:A,properties:F,newProperties:w})}}}})},fo=(r,e)=>{if(b.isCollapsed(e))return e.anchor;var[,t]=b.edges(e),n=o.pointRef(r,t);return x.delete(r,{at:e}),n.unref()},co=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{mode:n="lowest",voids:u=!1}=t,{match:a,at:i=e.selection,height:s=0,always:f=!1}=t;if(a==null&&(a=_=>G.isElement(_)&&o.isBlock(e,_)),b.isRange(i)&&(i=fo(e,i)),D.isPath(i)){var c=i,v=o.point(e,c),[h]=o.parent(e,c);a=_=>_===h,s=v.path.length-c.length+1,i=v,f=!0}if(i){var d=o.pointRef(e,i,{affinity:"backward"}),g;try{var[C]=o.nodes(e,{at:i,match:a,mode:n,voids:u});if(!C)return;var B=o.void(e,{at:i,mode:"highest"}),E=0;if(!u&&B){var[m,l]=B;if(G.isElement(m)&&e.isInline(m)){var A=o.after(e,l);if(!A){var F={text:""},w=D.next(l);x.insertNodes(e,F,{at:w,voids:u}),A=o.point(e,w)}i=A,f=!0}var M=i.path.length-l.length;s=M+1,f=!0}g=o.pointRef(e,i);var I=i.path.length-s,[,z]=C,$=i.path.slice(0,I),W=s===0?i.offset:i.path[I]+E;for(var[V,T]of o.levels(e,{at:$,reverse:!0,voids:u})){var y=!1;if(T.length<z.length||T.length===0||!u&&G.isElement(V)&&o.isVoid(e,V))break;var j=d.current,k=o.isEnd(e,j,T);if(f||!d||!o.isEdge(e,j,T)){y=!0;var X=L.extractProps(V);e.apply({type:"split_node",path:T,position:W,properties:X})}W=T[T.length-1]+(y||k?1:0)}if(t.at==null){var U=g.current||o.end(e,[]);x.select(e,U)}}finally{var te;d.unref(),(te=g)===null||te===void 0||te.unref()}}})},vo=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(t)||(t=[t]);var u={};for(var a of t)u[a]=null;x.setNodes(e,u,n)},ho=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{mode:n="lowest",split:u=!1,voids:a=!1}=t,{at:i=e.selection,match:s}=t;if(i){s==null&&(s=D.isPath(i)?mr(e,i):g=>G.isElement(g)&&o.isBlock(e,g)),D.isPath(i)&&(i=o.range(e,i));var f=b.isRange(i)?o.rangeRef(e,i):null,c=o.nodes(e,{at:i,match:s,mode:n,voids:a}),v=Array.from(c,g=>{var[,C]=g;return o.pathRef(e,C)}).reverse(),h=function(){var C=d.unref(),[B]=o.node(e,C),E=o.range(e,C);u&&f&&(E=b.intersection(f.current,E)),x.liftNodes(e,{at:E,match:m=>G.isAncestor(B)&&B.children.includes(m),voids:a})};for(var d of v)h();f&&f.unref()}})};function Un(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function Gn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Un(Object(t),!0).forEach(function(n){xe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Un(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Do=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(e,()=>{var{mode:u="lowest",split:a=!1,voids:i=!1}=n,{match:s,at:f=e.selection}=n;if(f){if(s==null&&(D.isPath(f)?s=mr(e,f):e.isInline(t)?s=E=>G.isElement(E)&&o.isInline(e,E)||K.isText(E):s=E=>G.isElement(E)&&o.isBlock(e,E)),a&&b.isRange(f)){var[c,v]=b.edges(f),h=o.rangeRef(e,f,{affinity:"inward"});x.splitNodes(e,{at:v,match:s,voids:i}),x.splitNodes(e,{at:c,match:s,voids:i}),f=h.unref(),n.at==null&&x.select(e,f)}var d=Array.from(o.nodes(e,{at:f,match:e.isInline(t)?E=>G.isElement(E)&&o.isBlock(e,E):E=>o.isEditor(E),mode:"lowest",voids:i})),g=function(){var m=b.isRange(f)?b.intersection(f,o.range(e,B)):f;if(!m)return 0;var l=Array.from(o.nodes(e,{at:m,match:s,mode:u,voids:i}));if(l.length>0){var[A]=l,F=l[l.length-1],[,w]=A,[,M]=F;if(w.length===0&&M.length===0)return 0;var I=D.equals(w,M)?D.parent(w):D.common(w,M),z=o.range(e,w,M),$=o.node(e,I),[W]=$,V=I.length+1,T=D.next(M.slice(0,V)),y=Gn(Gn({},t),{},{children:[]});x.insertNodes(e,y,{at:T,voids:i}),x.moveNodes(e,{at:z,match:j=>G.isAncestor(W)&&W.children.includes(j),to:T.concat(0),voids:i})}},C;for(var[,B]of d)C=g()}})},Xf=()=>{var r={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return zi(r,...n)},addMark:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Vi(r,...n)},deleteBackward:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Yi(r,...n)},deleteForward:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Xi(r,...n)},deleteFragment:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ji(r,...n)},getFragment:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Wi(r,...n)},insertBreak:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ss(r,...n)},insertSoftBreak:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ls(r,...n)},insertFragment:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Xs(r,...n)},insertNode:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return os(r,...n)},insertText:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return cs(r,...n)},normalizeNode:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return qi(r,...n)},removeMark:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ws(r,...n)},getDirtyPaths:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return $i(r,...n)},shouldNormalize:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Hi(r,...n)},above:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ki(r,...n)},after:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ui(r,...n)},before:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Gi(r,...n)},collapse:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Js(r,...n)},delete:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ys(r,...n)},deselect:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Zs(r,...n)},edges:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Zi(r,...n)},elementReadOnly:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Qi(r,...n)},end:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return _i(r,...n)},first:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return es(r,...n)},fragment:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return rs(r,...n)},getMarks:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return bs(r,...n)},hasBlocks:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ns(r,...n)},hasInlines:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return us(r,...n)},hasPath:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return as(r,...n)},hasTexts:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return is(r,...n)},insertNodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return to(r,...n)},isBlock:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return vs(r,...n)},isEdge:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ds(r,...n)},isEmpty:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return hs(r,...n)},isEnd:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ds(r,...n)},isNormalizing:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return gs(r,...n)},isStart:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Cs(r,...n)},last:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ms(r,...n)},leaf:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ps(r,...n)},levels:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Bs(r,...n)},liftNodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return no(r,...n)},mergeNodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return io(r,...n)},move:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Qs(r,...n)},moveNodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return so(r,...n)},next:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Fs(r,...n)},node:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ws(r,...n)},nodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ys(r,...n)},normalize:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Os(r,...n)},parent:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return xs(r,...n)},path:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ts(r,...n)},pathRef:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ps(r,...n)},pathRefs:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ss(r,...n)},point:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ks(r,...n)},pointRef:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Rs(r,...n)},pointRefs:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return js(r,...n)},positions:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ns(r,...n)},previous:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ms(r,...n)},range:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return zs(r,...n)},rangeRef:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Is(r,...n)},rangeRefs:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ls(r,...n)},removeNodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return oo(r,...n)},select:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return _s(r,...n)},setNodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return lo(r,...n)},setNormalizing:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return qs(r,...n)},setPoint:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return eo(r,...n)},setSelection:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ro(r,...n)},splitNodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return co(r,...n)},start:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Hs(r,...n)},string:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ks(r,...n)},unhangRange:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Vs(r,...n)},unsetNodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return vo(r,...n)},unwrapNodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ho(r,...n)},void:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ts(r,...n)},withoutNormalizing:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Us(r,...n)},wrapNodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Do(r,...n)},shouldMergeNodesRemovePrevNode:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Gs(r,...n)}};return r},st,Yn;function go(){if(Yn)return st;Yn=1,st=u;var r="֑-߿יִ-﷽ﹰ-ﻼ",e="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",t=new RegExp("^[^"+e+"]*["+r+"]"),n=new RegExp("^[^"+r+"]*["+e+"]");function u(a){return a=String(a||""),t.test(a)?"rtl":n.test(a)?"ltr":"neutral"}return st}var Co=go();const na=Ht(Co);var ot,Xn;function Jt(){if(Xn)return ot;Xn=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return ot=r,ot}var lt,Jn;function mo(){if(Jn)return lt;Jn=1;var r=typeof jr=="object"&&jr&&jr.Object===Object&&jr;return lt=r,lt}var ft,Zn;function ua(){if(Zn)return ft;Zn=1;var r=mo(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return ft=t,ft}var ct,Qn;function po(){if(Qn)return ct;Qn=1;var r=ua(),e=function(){return r.Date.now()};return ct=e,ct}var vt,_n;function Bo(){if(_n)return vt;_n=1;var r=/\s/;function e(t){for(var n=t.length;n--&&r.test(t.charAt(n)););return n}return vt=e,vt}var dt,eu;function Eo(){if(eu)return dt;eu=1;var r=Bo(),e=/^\s+/;function t(n){return n&&n.slice(0,r(n)+1).replace(e,"")}return dt=t,dt}var ht,ru;function aa(){if(ru)return ht;ru=1;var r=ua(),e=r.Symbol;return ht=e,ht}var Dt,tu;function Ao(){if(tu)return Dt;tu=1;var r=aa(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,u=r?r.toStringTag:void 0;function a(i){var s=t.call(i,u),f=i[u];try{i[u]=void 0;var c=!0}catch{}var v=n.call(i);return c&&(s?i[u]=f:delete i[u]),v}return Dt=a,Dt}var gt,nu;function bo(){if(nu)return gt;nu=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return gt=t,gt}var Ct,uu;function Fo(){if(uu)return Ct;uu=1;var r=aa(),e=Ao(),t=bo(),n="[object Null]",u="[object Undefined]",a=r?r.toStringTag:void 0;function i(s){return s==null?s===void 0?u:n:a&&a in Object(s)?e(s):t(s)}return Ct=i,Ct}var mt,au;function wo(){if(au)return mt;au=1;function r(e){return e!=null&&typeof e=="object"}return mt=r,mt}var pt,iu;function yo(){if(iu)return pt;iu=1;var r=Fo(),e=wo(),t="[object Symbol]";function n(u){return typeof u=="symbol"||e(u)&&r(u)==t}return pt=n,pt}var Bt,su;function Oo(){if(su)return Bt;su=1;var r=Eo(),e=Jt(),t=yo(),n=NaN,u=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt;function f(c){if(typeof c=="number")return c;if(t(c))return n;if(e(c)){var v=typeof c.valueOf=="function"?c.valueOf():c;c=e(v)?v+"":v}if(typeof c!="string")return c===0?c:+c;c=r(c);var h=a.test(c);return h||i.test(c)?s(c.slice(2),h?2:8):u.test(c)?n:+c}return Bt=f,Bt}var Et,ou;function ia(){if(ou)return Et;ou=1;var r=Jt(),e=po(),t=Oo(),n="Expected a function",u=Math.max,a=Math.min;function i(s,f,c){var v,h,d,g,C,B,E=0,m=!1,l=!1,A=!0;if(typeof s!="function")throw new TypeError(n);f=t(f)||0,r(c)&&(m=!!c.leading,l="maxWait"in c,d=l?u(t(c.maxWait)||0,f):d,A="trailing"in c?!!c.trailing:A);function F(y){var j=v,k=h;return v=h=void 0,E=y,g=s.apply(k,j),g}function w(y){return E=y,C=setTimeout(z,f),m?F(y):g}function M(y){var j=y-B,k=y-E,X=f-j;return l?a(X,d-k):X}function I(y){var j=y-B,k=y-E;return B===void 0||j>=f||j<0||l&&k>=d}function z(){var y=e();if(I(y))return $(y);C=setTimeout(z,M(y))}function $(y){return C=void 0,A&&v?F(y):(v=h=void 0,g)}function W(){C!==void 0&&clearTimeout(C),E=0,v=B=h=C=void 0}function V(){return C===void 0?g:$(e())}function T(){var y=e(),j=I(y);if(v=arguments,h=this,B=y,j){if(C===void 0)return w(B);if(l)return clearTimeout(C),C=setTimeout(z,f),F(B)}return C===void 0&&(C=setTimeout(z,f)),g}return T.cancel=W,T.flush=V,T}return Et=i,Et}var xo=ia();const Po=Ht(xo);var At,lu;function So(){if(lu)return At;lu=1;var r=ia(),e=Jt(),t="Expected a function";function n(u,a,i){var s=!0,f=!0;if(typeof u!="function")throw new TypeError(t);return e(i)&&(s="leading"in i?!!i.leading:s,f="trailing"in i?!!i.trailing:f),r(u,a,{leading:s,maxWait:a,trailing:f})}return At=n,At}var To=So();const Ro=Ht(To),fu=r=>typeof r=="object"&&r!=null&&r.nodeType===1,cu=(r,e)=>(!e||r!=="hidden")&&r!=="visible"&&r!=="clip",Nr=(r,e)=>{if(r.clientHeight<r.scrollHeight||r.clientWidth<r.scrollWidth){const t=getComputedStyle(r,null);return cu(t.overflowY,e)||cu(t.overflowX,e)||(n=>{const u=(a=>{if(!a.ownerDocument||!a.ownerDocument.defaultView)return null;try{return a.ownerDocument.defaultView.frameElement}catch{return null}})(n);return!!u&&(u.clientHeight<n.scrollHeight||u.clientWidth<n.scrollWidth)})(r)}return!1},Mr=(r,e,t,n,u,a,i,s)=>a<r&&i>e||a>r&&i<e?0:a<=r&&s<=t||i>=e&&s>=t?a-r-n:i>e&&s<t||a<r&&s>t?i-e+u:0,jo=r=>{const e=r.parentElement;return e??(r.getRootNode().host||null)},vu=(r,e)=>{var t,n,u,a;if(typeof document>"u")return[];const{scrollMode:i,block:s,inline:f,boundary:c,skipOverflowHiddenElements:v}=e,h=typeof c=="function"?c:X=>X!==c;if(!fu(r))throw new TypeError("Invalid target");const d=document.scrollingElement||document.documentElement,g=[];let C=r;for(;fu(C)&&h(C);){if(C=jo(C),C===d){g.push(C);break}C!=null&&C===document.body&&Nr(C)&&!Nr(document.documentElement)||C!=null&&Nr(C,v)&&g.push(C)}const B=(n=(t=window.visualViewport)==null?void 0:t.width)!=null?n:innerWidth,E=(a=(u=window.visualViewport)==null?void 0:u.height)!=null?a:innerHeight,{scrollX:m,scrollY:l}=window,{height:A,width:F,top:w,right:M,bottom:I,left:z}=r.getBoundingClientRect(),{top:$,right:W,bottom:V,left:T}=(X=>{const U=window.getComputedStyle(X);return{top:parseFloat(U.scrollMarginTop)||0,right:parseFloat(U.scrollMarginRight)||0,bottom:parseFloat(U.scrollMarginBottom)||0,left:parseFloat(U.scrollMarginLeft)||0}})(r);let y=s==="start"||s==="nearest"?w-$:s==="end"?I+V:w+A/2-$+V,j=f==="center"?z+F/2-T+W:f==="end"?M+W:z-T;const k=[];for(let X=0;X<g.length;X++){const U=g[X],{height:te,width:_,top:ee,right:ue,bottom:se,left:H}=U.getBoundingClientRect();if(i==="if-needed"&&w>=0&&z>=0&&I<=E&&M<=B&&(U===d&&!Nr(U)||w>=ee&&I<=se&&z>=H&&M<=ue))return k;const ae=getComputedStyle(U),ge=parseInt(ae.borderLeftWidth,10),me=parseInt(ae.borderTopWidth,10),be=parseInt(ae.borderRightWidth,10),Pe=parseInt(ae.borderBottomWidth,10);let p=0,P=0;const O="offsetWidth"in U?U.offsetWidth-U.clientWidth-ge-be:0,S="offsetHeight"in U?U.offsetHeight-U.clientHeight-me-Pe:0,Q="offsetWidth"in U?U.offsetWidth===0?0:_/U.offsetWidth:0,q="offsetHeight"in U?U.offsetHeight===0?0:te/U.offsetHeight:0;if(d===U)p=s==="start"?y:s==="end"?y-E:s==="nearest"?Mr(l,l+E,E,me,Pe,l+y,l+y+A,A):y-E/2,P=f==="start"?j:f==="center"?j-B/2:f==="end"?j-B:Mr(m,m+B,B,ge,be,m+j,m+j+F,F),p=Math.max(0,p+l),P=Math.max(0,P+m);else{p=s==="start"?y-ee-me:s==="end"?y-se+Pe+S:s==="nearest"?Mr(ee,se,te,me,Pe+S,y,y+A,A):y-(ee+te/2)+S/2,P=f==="start"?j-H-ge:f==="center"?j-(H+_/2)+O/2:f==="end"?j-ue+be+O:Mr(H,ue,_,ge,be+O,j,j+F,F);const{scrollLeft:de,scrollTop:oe}=U;p=q===0?0:Math.max(0,Math.min(oe+p/q,U.scrollHeight-te/q+S)),P=Q===0?0:Math.max(0,Math.min(de+P/Q,U.scrollWidth-_/Q+O)),y+=oe-p,j+=de-P}k.push({el:U,top:p,left:P})}return k},ko=r=>r===!1?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&Object.keys(e).length!==0)(r)?r:{block:"start",inline:"nearest"};function No(r,e){if(!r.isConnected||!(u=>{let a=u;for(;a&&a.parentNode;){if(a.parentNode===document)return!0;a=a.parentNode instanceof ShadowRoot?a.parentNode.host:a.parentNode}return!1})(r))return;const t=(u=>{const a=window.getComputedStyle(u);return{top:parseFloat(a.scrollMarginTop)||0,right:parseFloat(a.scrollMarginRight)||0,bottom:parseFloat(a.scrollMarginBottom)||0,left:parseFloat(a.scrollMarginLeft)||0}})(r);if((u=>typeof u=="object"&&typeof u.behavior=="function")(e))return e.behavior(vu(r,e));const n=typeof e=="boolean"||e==null?void 0:e.behavior;for(const{el:u,top:a,left:i}of vu(r,ko(e))){const s=a-t.top+t.bottom,f=i-t.left+t.right;u.scroll({top:s,left:f,behavior:n})}}var Ne={},du;function Mo(){if(du)return Ne;du=1,Object.defineProperty(Ne,"__esModule",{value:!0});for(var r=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),e={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},t={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:r?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},n={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},u=1;u<20;u++)n["f"+u]=111+u;function a(d,g,C){g&&!("byKey"in g)&&(C=g,g=null),Array.isArray(d)||(d=[d]);var B=d.map(function(l){return f(l,g)}),E=function(A){return B.some(function(F){return c(F,A)})},m=C==null?E:E(C);return m}function i(d,g){return a(d,g)}function s(d,g){return a(d,{byKey:!0},g)}function f(d,g){var C=g&&g.byKey,B={};d=d.replace("++","+add");var E=d.split("+"),m=E.length;for(var l in e)B[e[l]]=!1;var A=!0,F=!1,w=void 0;try{for(var M=E[Symbol.iterator](),I;!(A=(I=M.next()).done);A=!0){var z=I.value,$=z.endsWith("?")&&z.length>1;$&&(z=z.slice(0,-1));var W=h(z),V=e[W];if(z.length>1&&!V&&!t[z]&&!n[W])throw new TypeError('Unknown modifier: "'+z+'"');(m===1||!V)&&(C?B.key=W:B.which=v(z)),V&&(B[V]=$?null:!0)}}catch(T){F=!0,w=T}finally{try{!A&&M.return&&M.return()}finally{if(F)throw w}}return B}function c(d,g){for(var C in d){var B=d[C],E=void 0;if(B!=null&&(C==="key"&&g.key!=null?E=g.key.toLowerCase():C==="which"?E=B===91&&g.which===93?91:g.which:E=g[C],!(E==null&&B===!1)&&E!==B))return!1}return!0}function v(d){d=h(d);var g=n[d]||d.toUpperCase().charCodeAt(0);return g}function h(d){return d=d.toLowerCase(),d=t[d]||d,d}return Ne.default=a,Ne.isHotkey=a,Ne.isCodeHotkey=i,Ne.isKeyHotkey=s,Ne.parseHotkey=f,Ne.compareHotkey=c,Ne.toKeyCode=v,Ne.toKeyName=h,Ne}var bt=Mo(),sa=globalThis.Node,Io=globalThis.Text,Zt=r=>r&&r.ownerDocument&&r.ownerDocument.defaultView||null,Lo=r=>Qe(r)&&r.nodeType===8,je=r=>Qe(r)&&r.nodeType===1,Qe=r=>{var e=Zt(r);return!!e&&r instanceof e.Node},Nt=r=>{var e=r&&r.anchorNode&&Zt(r.anchorNode);return!!e&&r instanceof e.Selection},oa=r=>Qe(r)&&r.nodeType===3,zo=r=>r.clipboardData&&r.clipboardData.getData("text/plain")!==""&&r.clipboardData.types.length===1,$o=r=>{var[e,t]=r;if(je(e)&&e.childNodes.length){var n=t===e.childNodes.length,u=n?t-1:t;for([e,u]=la(e,u,n?"backward":"forward"),n=u<t;je(e)&&e.childNodes.length;){var a=n?e.childNodes.length-1:0;e=qo(e,a,n?"backward":"forward")}t=n&&e.textContent!=null?e.textContent.length:0}return[e,t]},Wo=r=>{for(var e=r&&r.parentNode;e;){if(e.toString()==="[object ShadowRoot]")return!0;e=e.parentNode}return!1},la=(r,e,t)=>{for(var{childNodes:n}=r,u=n[e],a=e,i=!1,s=!1;(Lo(u)||je(u)&&u.childNodes.length===0||je(u)&&u.getAttribute("contenteditable")==="false")&&!(i&&s);){if(a>=n.length){i=!0,a=e-1,t="backward";continue}if(a<0){s=!0,a=e+1,t="forward";continue}u=n[a],e=a,a+=t==="forward"?1:-1}return[u,e]},qo=(r,e,t)=>{var[n]=la(r,e,t);return n},fa=r=>{var e="";if(oa(r)&&r.nodeValue)return r.nodeValue;if(je(r)){for(var t of Array.from(r.childNodes))e+=fa(t);var n=getComputedStyle(r).getPropertyValue("display");(n==="block"||n==="list"||r.tagName==="BR")&&(e+=`
`)}return e},Ho=/data-slate-fragment="(.+?)"/m,Ko=r=>{var e=r.getData("text/html"),[,t]=e.match(Ho)||[];return t},Er=r=>r.getSelection!=null?r.getSelection():document.getSelection(),Qt=(r,e,t)=>{var{target:n}=e;if(je(n)&&n.matches('[contentEditable="false"]'))return!1;var{document:u}=Z.getWindow(r);if(u.contains(n))return Z.hasDOMNode(r,n,{editable:!0});var a=t.find(i=>{var{addedNodes:s,removedNodes:f}=i;for(var c of s)if(c===n||c.contains(n))return!0;for(var v of f)if(v===n||v.contains(n))return!0});return!a||a===e?!1:Qt(r,a,t)},Vo=()=>{for(var r=document.activeElement;(e=r)!==null&&e!==void 0&&e.shadowRoot&&(t=r.shadowRoot)!==null&&t!==void 0&&t.activeElement;){var e,t,n;r=(n=r)===null||n===void 0||(n=n.shadowRoot)===null||n===void 0?void 0:n.activeElement}return r},hu=(r,e)=>!!(r.compareDocumentPosition(e)&sa.DOCUMENT_POSITION_PRECEDING),Uo=(r,e)=>!!(r.compareDocumentPosition(e)&sa.DOCUMENT_POSITION_FOLLOWING),Ft,wt,Go=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Du=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),ye=typeof navigator<"u"&&/Android/.test(navigator.userAgent),cr=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),er=typeof navigator<"u"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),Yo=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),ca=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),Xo=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),Jo=ye&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),Zo=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),Qo=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),_o=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),qr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&((Ft=navigator.userAgent.match(/Version\/(\d+)/))!==null&&Ft!==void 0&&Ft[1]&&parseInt((wt=navigator.userAgent.match(/Version\/(\d+)/))===null||wt===void 0?void 0:wt[1],10)<17);var Xe=(!Xo||!Jo)&&!Yo&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function Pr(r){"@babel/helpers - typeof";return Pr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pr(r)}function el(r,e){if(Pr(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Pr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function rl(r){var e=el(r,"string");return Pr(e)==="symbol"?e:String(e)}function _t(r,e,t){return e=rl(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var tl=0;class va{constructor(){_t(this,"id",void 0),this.id="".concat(tl++)}}var dr=new WeakMap,vr=new WeakMap,Ar=new WeakMap,da=new WeakMap,Hr=new WeakMap,Mt=new WeakMap,Sr=new WeakMap,tr=new WeakMap,Jr=new WeakMap,tt=new WeakMap,It=new WeakMap,Ze=new WeakMap,rr=new WeakMap,br=new WeakMap,Lt=new WeakMap,en=new WeakMap,Ie=new WeakMap,Ke=new WeakMap,Se=new WeakMap,Je=new WeakMap,He=new WeakMap,ha=new WeakMap,Cr=Symbol("placeholder"),Da=Symbol("mark-placeholder"),Z={androidPendingDiffs:r=>Se.get(r),androidScheduleFlush:r=>{var e;(e=en.get(r))===null||e===void 0||e()},blur:r=>{var e=Z.toDOMNode(r,r),t=Z.findDocumentOrShadowRoot(r);Ze.set(r,!1),t.activeElement===e&&e.blur()},deselect:r=>{var{selection:e}=r,t=Z.findDocumentOrShadowRoot(r),n=Er(t);n&&n.rangeCount>0&&n.removeAllRanges(),e&&x.deselect(r)},findDocumentOrShadowRoot:r=>{var e=Z.toDOMNode(r,r),t=e.getRootNode();return t instanceof Document||t instanceof ShadowRoot?t:e.ownerDocument},findEventRange:(r,e)=>{"nativeEvent"in e&&(e=e.nativeEvent);var{clientX:t,clientY:n,target:u}=e;if(t==null||n==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var a=Z.toSlateNode(r,e.target),i=Z.findPath(r,a);if(G.isElement(a)&&o.isVoid(r,a)){var s=u.getBoundingClientRect(),f=r.isInline(a)?t-s.left<s.left+s.width-t:n-s.top<s.top+s.height-n,c=o.point(r,i,{edge:f?"start":"end"}),v=f?o.before(r,c):o.after(r,c);if(v){var h=o.range(r,v);return h}}var d,{document:g}=Z.getWindow(r);if(g.caretRangeFromPoint)d=g.caretRangeFromPoint(t,n);else{var C=g.caretPositionFromPoint(t,n);C&&(d=g.createRange(),d.setStart(C.offsetNode,C.offset),d.setEnd(C.offsetNode,C.offset))}if(!d)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var B=Z.toSlateRange(r,d,{exactMatch:!1,suppressThrow:!1});return B},findKey:(r,e)=>{var t=Jr.get(e);return t||(t=new va,Jr.set(e,t)),t},findPath:(r,e)=>{for(var t=[],n=e;;){var u=Ar.get(n);if(u==null){if(o.isEditor(n))return t;break}var a=vr.get(n);if(a==null)break;t.unshift(a),n=u}throw new Error("Unable to find the path for Slate node: ".concat(Ce.stringify(e)))},focus:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{retries:5};if(!Ze.get(e)){if(t.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(e.operations.length>0){setTimeout(()=>{Z.focus(e,{retries:t.retries-1})},10);return}var n=Z.toDOMNode(e,e),u=Z.findDocumentOrShadowRoot(e);if(u.activeElement!==n){if(e.selection&&u instanceof Document){var a=Er(u),i=Z.toDOMRange(e,e.selection);a?.removeAllRanges(),a?.addRange(i)}e.selection||x.select(e,o.start(e,[])),Ze.set(e,!0),n.focus({preventScroll:!0})}}},getWindow:r=>{var e=da.get(r);if(!e)throw new Error("Unable to find a host window element for this editor");return e},hasDOMNode:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:u=!1}=n,a=Z.toDOMNode(e,e),i;try{i=je(t)?t:t.parentElement}catch(s){if(s instanceof Error&&!s.message.includes('Permission denied to access property "nodeType"'))throw s}return i?i.closest("[data-slate-editor]")===a&&(!u||i.isContentEditable?!0:typeof i.isContentEditable=="boolean"&&i.closest('[contenteditable="false"]')===a||!!i.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(r,e)=>Qe(e)&&Z.hasDOMNode(r,e,{editable:!0}),hasRange:(r,e)=>{var{anchor:t,focus:n}=e;return o.hasPath(r,t.path)&&o.hasPath(r,n.path)},hasSelectableTarget:(r,e)=>Z.hasEditableTarget(r,e)||Z.isTargetInsideNonReadonlyVoid(r,e),hasTarget:(r,e)=>Qe(e)&&Z.hasDOMNode(r,e),insertData:(r,e)=>{r.insertData(e)},insertFragmentData:(r,e)=>r.insertFragmentData(e),insertTextData:(r,e)=>r.insertTextData(e),isComposing:r=>!!rr.get(r),isFocused:r=>!!Ze.get(r),isReadOnly:r=>!!It.get(r),isTargetInsideNonReadonlyVoid:(r,e)=>{if(It.get(r))return!1;var t=Z.hasTarget(r,e)&&Z.toSlateNode(r,e);return G.isElement(t)&&o.isVoid(r,t)},setFragmentData:(r,e,t)=>r.setFragmentData(e,t),toDOMNode:(r,e)=>{var t=tt.get(r),n=o.isEditor(e)?Hr.get(r):t?.get(Z.findKey(r,e));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(Ce.stringify(e)));return n},toDOMPoint:(r,e)=>{var[t]=o.node(r,e.path),n=Z.toDOMNode(r,t),u;o.void(r,{at:e})&&(e={path:e.path,offset:0});for(var a="[data-slate-string], [data-slate-zero-width]",i=Array.from(n.querySelectorAll(a)),s=0,f=0;f<i.length;f++){var c=i[f],v=c.childNodes[0];if(!(v==null||v.textContent==null)){var{length:h}=v.textContent,d=c.getAttribute("data-slate-length"),g=d==null?h:parseInt(d,10),C=s+g,B=i[f+1];if(e.offset===C&&B!==null&&B!==void 0&&B.hasAttribute("data-slate-mark-placeholder")){var E,m=B.childNodes[0];u=[m instanceof Io?m:B,(E=B.textContent)!==null&&E!==void 0&&E.startsWith("\uFEFF")?1:0];break}if(e.offset<=C){var l=Math.min(h,Math.max(0,e.offset-s));u=[v,l];break}s=C}}if(!u)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(Ce.stringify(e)));return u},toDOMRange:(r,e)=>{var{anchor:t,focus:n}=e,u=b.isBackward(e),a=Z.toDOMPoint(r,t),i=b.isCollapsed(e)?a:Z.toDOMPoint(r,n),s=Z.getWindow(r),f=s.document.createRange(),[c,v]=u?i:a,[h,d]=u?a:i,g=je(c)?c:c.parentElement,C=!!g.getAttribute("data-slate-zero-width"),B=je(h)?h:h.parentElement,E=!!B.getAttribute("data-slate-zero-width");return f.setStart(c,C?1:v),f.setEnd(h,E?1:d),f},toSlateNode:(r,e)=>{var t=je(e)?e:e.parentElement;t&&!t.hasAttribute("data-slate-node")&&(t=t.closest("[data-slate-node]"));var n=t?Sr.get(t):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(t));return n},toSlatePoint:(r,e,t)=>{var{exactMatch:n,suppressThrow:u,searchDirection:a="backward"}=t,[i,s]=n?e:$o(e),f=i.parentNode,c=null,v=0;if(f){var h,d,g=Z.toDOMNode(r,r),C=f.closest('[data-slate-void="true"]'),B=C&&g.contains(C)?C:null,E=f.closest('[contenteditable="false"]'),m=E&&g.contains(E)?E:null,l=f.closest("[data-slate-leaf]"),A=null;if(l){if(c=l.closest('[data-slate-node="text"]'),c){var F=Z.getWindow(r),w=F.document.createRange();w.setStart(c,0),w.setEnd(i,s);var M=w.cloneContents(),I=[...Array.prototype.slice.call(M.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(M.querySelectorAll("[contenteditable=false]"))];I.forEach(H=>{if(ye&&!n&&H.hasAttribute("data-slate-zero-width")&&H.textContent.length>0&&H.textContext!=="\uFEFF"){H.textContent.startsWith("\uFEFF")&&(H.textContent=H.textContent.slice(1));return}H.parentNode.removeChild(H)}),v=M.textContent.length,A=c}}else if(B){for(var z=B.querySelectorAll("[data-slate-leaf]"),$=0;$<z.length;$++){var W=z[$];if(Z.hasDOMNode(r,W)){l=W;break}}l?(c=l.closest('[data-slate-node="text"]'),A=l,v=A.textContent.length,A.querySelectorAll("[data-slate-zero-width]").forEach(H=>{v-=H.textContent.length})):v=1}else if(m){var V=H=>H?H.querySelectorAll("[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])"):[],T=m.closest('[data-slate-node="element"]');if(a==="forward"){var y,j=[...V(T),...V(T?.nextElementSibling)];l=(y=j.find(H=>Uo(m,H)))!==null&&y!==void 0?y:null}else{var k,X=[...V(T?.previousElementSibling),...V(T)];l=(k=X.findLast(H=>hu(m,H)))!==null&&k!==void 0?k:null}l&&(c=l.closest('[data-slate-node="text"]'),A=l,a==="forward"?v=0:(v=A.textContent.length,A.querySelectorAll("[data-slate-zero-width]").forEach(H=>{v-=H.textContent.length})))}A&&v===A.textContent.length&&ye&&A.getAttribute("data-slate-zero-width")==="z"&&(h=A.textContent)!==null&&h!==void 0&&h.startsWith("\uFEFF")&&(f.hasAttribute("data-slate-zero-width")||cr&&(d=A.textContent)!==null&&d!==void 0&&d.endsWith(`

`))&&v--}if(ye&&!c&&!n){var U=f.hasAttribute("data-slate-node")?f:f.closest("[data-slate-node]");if(U&&Z.hasDOMNode(r,U,{editable:!0})){var te=Z.toSlateNode(r,U),{path:_,offset:ee}=o.start(r,Z.findPath(r,te));return U.querySelector("[data-slate-leaf]")||(ee=s),{path:_,offset:ee}}}if(!c){if(u)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(e))}var ue=Z.toSlateNode(r,c),se=Z.findPath(r,ue);return{path:se,offset:v}},toSlateRange:(r,e,t)=>{var n,{exactMatch:u,suppressThrow:a}=t,i=Nt(e)?e.anchorNode:e.startContainer,s,f,c,v,h;if(i)if(Nt(e)){if(cr&&e.rangeCount>1){c=e.focusNode;var d=e.getRangeAt(0),g=e.getRangeAt(e.rangeCount-1);if(c instanceof HTMLTableRowElement&&d.startContainer instanceof HTMLTableRowElement&&g.startContainer instanceof HTMLTableRowElement){let M=function(I){return I.childElementCount>0?M(I.children[0]):I};var C=d.startContainer,B=g.startContainer,E=M(C.children[d.startOffset]),m=M(B.children[g.startOffset]);v=0,m.childNodes.length>0?s=m.childNodes[0]:s=m,E.childNodes.length>0?c=E.childNodes[0]:c=E,m instanceof HTMLElement?f=m.innerHTML.length:f=0}else d.startContainer===c?(s=g.endContainer,f=g.endOffset,v=d.startOffset):(s=d.startContainer,f=d.endOffset,v=g.startOffset)}else s=e.anchorNode,f=e.anchorOffset,c=e.focusNode,v=e.focusOffset;ca&&Wo(s)||cr?h=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:h=e.isCollapsed}else s=e.startContainer,f=e.startOffset,c=e.endContainer,v=e.endOffset,h=e.collapsed;if(s==null||c==null||f==null||v==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(e));cr&&(n=c.textContent)!==null&&n!==void 0&&n.endsWith(`

`)&&v===c.textContent.length&&v--;var l=Z.toSlatePoint(r,[s,f],{exactMatch:u,suppressThrow:a});if(!l)return null;var A=hu(s,c)||s===c&&v<f,F=h?l:Z.toSlatePoint(r,[c,v],{exactMatch:u,suppressThrow:a,searchDirection:A?"forward":"backward"});if(!F)return null;var w={anchor:l,focus:F};return b.isExpanded(w)&&b.isForward(w)&&je(c)&&o.void(r,{at:w.focus,mode:"highest"})&&(w=o.unhangRange(r,w,{voids:!0})),w}};function nl(r,e){var{path:t,diff:n}=e;if(!o.hasPath(r,t))return!1;var u=L.get(r,t);if(!K.isText(u))return!1;if(n.start!==u.text.length||n.text.length===0)return u.text.slice(n.start,n.start+n.text.length)===n.text;var a=D.next(t);if(!o.hasPath(r,a))return!1;var i=L.get(r,a);return K.isText(i)&&i.text.startsWith(n.text)}function ga(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return t.reduce((u,a)=>u.slice(0,a.start)+a.text+u.slice(a.end),r)}function ul(r,e){for(var t=Math.min(r.length,e.length),n=0;n<t;n++)if(r.charAt(n)!==e.charAt(n))return n;return t}function al(r,e,t){for(var n=Math.min(r.length,e.length,t),u=0;u<n;u++)if(r.charAt(r.length-u-1)!==e.charAt(e.length-u-1))return u;return n}function Ca(r,e){var{start:t,end:n,text:u}=e,a=r.slice(t,n),i=ul(a,u),s=Math.min(a.length-i,u.length-i),f=al(a,u,s),c={start:t+i,end:n-f,text:u.slice(i,u.length-f)};return c.start===c.end&&c.text.length===0?null:c}function il(r,e,t){var n=Math.min(e.start,t.start),u=Math.max(0,Math.min(e.start+e.text.length,t.end)-t.start),a=ga(r,e,t),i=Math.max(t.start+t.text.length,e.start+e.text.length+(e.start+e.text.length>t.start?t.text.length:0)-u),s=a.slice(n,i),f=Math.max(e.end,t.end-e.text.length+(e.end-e.start));return Ca(r,{start:n,end:f,text:s})}function sl(r){var{path:e,diff:t}=r;return{anchor:{path:e,offset:t.start},focus:{path:e,offset:t.end}}}function zt(r,e){var{path:t,offset:n}=e;if(!o.hasPath(r,t))return null;var u=L.get(r,t);if(!K.isText(u))return null;var a=o.above(r,{match:s=>G.isElement(s)&&o.isBlock(r,s),at:t});if(!a)return null;for(;n>u.text.length;){var i=o.next(r,{at:t,match:K.isText});if(!i||!D.isDescendant(i[1],a[1]))return null;n-=u.text.length,u=i[0],t=i[1]}return{path:t,offset:n}}function gu(r,e){var t=zt(r,e.anchor);if(!t)return null;if(b.isCollapsed(e))return{anchor:t,focus:t};var n=zt(r,e.focus);return n?{anchor:t,focus:n}:null}function $t(r,e,t){var n=Se.get(r),u=n?.find(v=>{var{path:h}=v;return D.equals(h,e.path)});if(!u||e.offset<=u.diff.start)return re.transform(e,t,{affinity:"backward"});var{diff:a}=u;if(e.offset<=a.start+a.text.length){var i={path:e.path,offset:a.start},s=re.transform(i,t,{affinity:"backward"});return s?{path:s.path,offset:s.offset+e.offset-a.start}:null}var f={path:e.path,offset:e.offset-a.text.length+a.end-a.start},c=re.transform(f,t,{affinity:"backward"});return c?t.type==="split_node"&&D.equals(t.path,e.path)&&f.offset<t.position&&a.start<t.position?c:{path:c.path,offset:c.offset+a.text.length-a.end+a.start}:null}function Cu(r,e,t){var n=$t(r,e.anchor,t);if(!n)return null;if(b.isCollapsed(e))return{anchor:n,focus:n};var u=$t(r,e.focus,t);return u?{anchor:n,focus:u}:null}function ol(r,e){var{path:t,diff:n,id:u}=r;switch(e.type){case"insert_text":return!D.equals(e.path,t)||e.offset>=n.end?r:e.offset<=n.start?{diff:{start:e.text.length+n.start,end:e.text.length+n.end,text:n.text},id:u,path:t}:{diff:{start:n.start,end:n.end+e.text.length,text:n.text},id:u,path:t};case"remove_text":return!D.equals(e.path,t)||e.offset>=n.end?r:e.offset+e.text.length<=n.start?{diff:{start:n.start-e.text.length,end:n.end-e.text.length,text:n.text},id:u,path:t}:{diff:{start:n.start,end:n.end-e.text.length,text:n.text},id:u,path:t};case"split_node":return!D.equals(e.path,t)||e.position>=n.end?{diff:n,id:u,path:D.transform(t,e,{affinity:"backward"})}:e.position>n.start?{diff:{start:n.start,end:Math.min(e.position,n.end),text:n.text},id:u,path:t}:{diff:{start:n.start-e.position,end:n.end-e.position,text:n.text},id:u,path:D.transform(t,e,{affinity:"forward"})};case"merge_node":return D.equals(e.path,t)?{diff:{start:n.start+e.position,end:n.end+e.position,text:n.text},id:u,path:D.transform(t,e)}:{diff:n,id:u,path:D.transform(t,e)}}var a=D.transform(t,e);return a?{diff:n,path:a,id:u}:null}var mu=(r,e)=>{var t=(e.top+e.bottom)/2;return r.top<=t&&r.bottom>=t},pu=(r,e,t)=>{var n=Z.toDOMRange(r,e).getBoundingClientRect(),u=Z.toDOMRange(r,t).getBoundingClientRect();return mu(n,u)&&mu(u,n)},ll=(r,e)=>{var t=o.range(r,b.end(e)),n=Array.from(o.positions(r,{at:e})),u=0,a=n.length,i=Math.floor(a/2);if(pu(r,o.range(r,n[u]),t))return o.range(r,n[u],t);if(n.length<2)return o.range(r,n[n.length-1],t);for(;i!==n.length&&i!==u;)pu(r,o.range(r,n[i]),t)?a=i:u=i,i=Math.floor((u+a)/2);return o.range(r,n[u],t)};function Bu(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function Eu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Bu(Object(t),!0).forEach(function(n){_t(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Bu(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var fl=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",n=e,{apply:u,onChange:a,deleteBackward:i,addMark:s,removeMark:f}=n;return tt.set(n,new WeakMap),n.addMark=(c,v)=>{var h,d;(h=en.get(n))===null||h===void 0||h(),!Ie.get(n)&&(d=Se.get(n))!==null&&d!==void 0&&d.length&&Ie.set(n,null),Ke.delete(n),s(c,v)},n.removeMark=c=>{var v;!Ie.get(n)&&(v=Se.get(n))!==null&&v!==void 0&&v.length&&Ie.set(n,null),Ke.delete(n),f(c)},n.deleteBackward=c=>{if(c!=="line")return i(c);if(n.selection&&b.isCollapsed(n.selection)){var v=o.above(n,{match:C=>G.isElement(C)&&o.isBlock(n,C),at:n.selection});if(v){var[,h]=v,d=o.range(n,h,n.selection.anchor),g=ll(n,d);b.isCollapsed(g)||x.delete(n,{at:g})}}},n.apply=c=>{var v=[],h=[],d=Se.get(n);if(d!=null&&d.length){var g=d.map(j=>ol(j,c)).filter(Boolean);Se.set(n,g)}var C=He.get(n);C&&He.set(n,Cu(n,C,c));var B=Je.get(n);if(B!=null&&B.at){var E=re.isPoint(B?.at)?$t(n,B.at,c):Cu(n,B.at,c);Je.set(n,E?Eu(Eu({},B),{},{at:E}):null)}switch(c.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{v.push(...lr(n,c.path));break}case"set_selection":{var m;(m=br.get(n))===null||m===void 0||m.unref(),br.delete(n);break}case"insert_node":case"remove_node":{v.push(...lr(n,D.parent(c.path)));break}case"merge_node":{var l=D.previous(c.path);v.push(...lr(n,l));break}case"move_node":{var A=D.common(D.parent(c.path),D.parent(c.newPath));v.push(...lr(n,A));var F;D.isBefore(c.path,c.newPath)?(v.push(...lr(n,D.parent(c.path))),F=c.newPath):(v.push(...lr(n,D.parent(c.newPath))),F=c.path);var w=L.get(e,D.parent(F)),M=Z.findKey(n,w),I=o.pathRef(n,D.parent(F));h.push([I,M]);break}}switch(u(c),c.type){case"insert_node":case"remove_node":case"merge_node":case"move_node":case"split_node":case"insert_text":case"remove_text":case"set_selection":dr.set(n,!0)}for(var[z,$]of v){var[W]=o.node(n,z);Jr.set(W,$)}for(var[V,T]of h){if(V.current){var[y]=o.node(n,V.current);Jr.set(y,T)}V.unref()}},n.setFragmentData=c=>{var{selection:v}=n;if(v){var[h,d]=b.edges(v),g=o.void(n,{at:h.path}),C=o.void(n,{at:d.path});if(!(b.isCollapsed(v)&&!g)){var B=Z.toDOMRange(n,v),E=B.cloneContents(),m=E.childNodes[0];if(E.childNodes.forEach(W=>{W.textContent&&W.textContent.trim()!==""&&(m=W)}),C){var[l]=C,A=B.cloneRange(),F=Z.toDOMNode(n,l);A.setEndAfter(F),E=A.cloneContents()}if(g&&(m=E.querySelector("[data-slate-spacer]")),Array.from(E.querySelectorAll("[data-slate-zero-width]")).forEach(W=>{var V=W.getAttribute("data-slate-zero-width")==="n";W.textContent=V?`
`:""}),oa(m)){var w=m.ownerDocument.createElement("span");w.style.whiteSpace="pre",w.appendChild(m),E.appendChild(w),m=w}var M=n.getFragment(),I=JSON.stringify(M),z=window.btoa(encodeURIComponent(I));m.setAttribute("data-slate-fragment",z),c.setData("application/".concat(t),z);var $=E.ownerDocument.createElement("div");return $.appendChild(E),$.setAttribute("hidden","true"),E.ownerDocument.body.appendChild($),c.setData("text/html",$.innerHTML),c.setData("text/plain",fa($)),E.ownerDocument.body.removeChild($),c}}},n.insertData=c=>{n.insertFragmentData(c)||n.insertTextData(c)},n.insertFragmentData=c=>{var v=c.getData("application/".concat(t))||Ko(c);if(v){var h=decodeURIComponent(window.atob(v)),d=JSON.parse(h);return n.insertFragment(d),!0}return!1},n.insertTextData=c=>{var v=c.getData("text/plain");if(v){var h=v.split(/\r\n|\r|\n/),d=!1;for(var g of h)d&&x.splitNodes(n,{always:!0}),n.insertText(g),d=!0;return!0}return!1},n.onChange=c=>{var v=Lt.get(n);v&&v(c),a(c)},n},lr=(r,e)=>{var t=[];for(var[n,u]of o.levels(r,{at:e})){var a=Z.findKey(r,n);t.push([u,a])}return t},cl=3,vl={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},dl={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},hl={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},ce=r=>{var e=vl[r],t=dl[r],n=hl[r],u=e&&bt.isHotkey(e),a=t&&bt.isHotkey(t),i=n&&bt.isHotkey(n);return s=>!!(u&&u(s)||Du&&a&&a(s)||!Du&&i&&i(s))},De={isBold:ce("bold"),isCompose:ce("compose"),isMoveBackward:ce("moveBackward"),isMoveForward:ce("moveForward"),isDeleteBackward:ce("deleteBackward"),isDeleteForward:ce("deleteForward"),isDeleteLineBackward:ce("deleteLineBackward"),isDeleteLineForward:ce("deleteLineForward"),isDeleteWordBackward:ce("deleteWordBackward"),isDeleteWordForward:ce("deleteWordForward"),isExtendBackward:ce("extendBackward"),isExtendForward:ce("extendForward"),isExtendLineBackward:ce("extendLineBackward"),isExtendLineForward:ce("extendLineForward"),isItalic:ce("italic"),isMoveLineBackward:ce("moveLineBackward"),isMoveLineForward:ce("moveLineForward"),isMoveWordBackward:ce("moveWordBackward"),isMoveWordForward:ce("moveWordForward"),isRedo:ce("redo"),isSoftBreak:ce("insertSoftBreak"),isSplitBlock:ce("splitBlock"),isTransposeCharacter:ce("transposeCharacter"),isUndo:ce("undo")};function Dl(r,e){if(r==null)return{};var t={},n=Object.keys(r),u,a;for(a=0;a<n.length;a++)u=n[a],!(e.indexOf(u)>=0)&&(t[u]=r[u]);return t}function Au(r,e){if(r==null)return{};var t=Dl(r,e),n,u;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(u=0;u<a.length;u++)n=a[u],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}var gl=["anchor","focus"],Cl=["anchor","focus"];function bu(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function Fu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bu(Object(t),!0).forEach(function(n){_t(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):bu(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var ml=(r,e)=>Object.keys(r).length===Object.keys(e).length&&Object.keys(r).every(t=>e.hasOwnProperty(t)&&r[t]===e[t]),ma=(r,e)=>{var t=Au(r,gl),n=Au(e,Cl);return r[Cr]===e[Cr]&&ml(t,n)},rn=(r,e)=>{if(r===e)return!0;if(!r||!e||r.length!==e.length)return!1;for(var t=0;t<r.length;t++){var n=r[t],u=e[t];if(!b.equals(n,u)||!ma(n,u))return!1}return!0},pa=(r,e)=>{if(r===e)return!0;if(!r||!e||r.length!==e.length)return!1;for(var t=0;t<r.length;t++){var n=r[t],u=e[t];if(n.anchor.offset!==u.anchor.offset||n.focus.offset!==u.focus.offset||!ma(n,u))return!1}return!0},pl=(r,e,t)=>{var n=Array.from(e.children,()=>[]);if(t.length===0)return n;var u=Z.findPath(r,e),a=u.length,i=o.range(r,u),s=new Array(e.children.length),f=A=>{var F=s[A];if(F)return F;var w=o.range(r,[...u,A]);return s[A]=w,w};for(var c of t){var v=b.intersection(i,c);if(v)for(var[h,d]=b.edges(v),g=h.path[a],C=d.path[a],B=g;B<=C;B++){var E=n[B];if(E){var m=f(B),l=b.intersection(m,c);l&&E.push(Fu(Fu({},c),l))}}}return n},nr=[],Bl=function(){return nr.some(function(r){return r.activeTargets.length>0})},El=function(){return nr.some(function(r){return r.skippedTargets.length>0})},wu="ResizeObserver loop completed with undelivered notifications.",Al=function(){var r;typeof ErrorEvent=="function"?r=new ErrorEvent("error",{message:wu}):(r=document.createEvent("Event"),r.initEvent("error",!1,!1),r.message=wu),window.dispatchEvent(r)},Tr;(function(r){r.BORDER_BOX="border-box",r.CONTENT_BOX="content-box",r.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Tr||(Tr={}));var ur=function(r){return Object.freeze(r)},bl=function(){function r(e,t){this.inlineSize=e,this.blockSize=t,ur(this)}return r}(),Ba=function(){function r(e,t,n,u){return this.x=e,this.y=t,this.width=n,this.height=u,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,ur(this)}return r.prototype.toJSON=function(){var e=this,t=e.x,n=e.y,u=e.top,a=e.right,i=e.bottom,s=e.left,f=e.width,c=e.height;return{x:t,y:n,top:u,right:a,bottom:i,left:s,width:f,height:c}},r.fromRect=function(e){return new r(e.x,e.y,e.width,e.height)},r}(),tn=function(r){return r instanceof SVGElement&&"getBBox"in r},Ea=function(r){if(tn(r)){var e=r.getBBox(),t=e.width,n=e.height;return!t&&!n}var u=r,a=u.offsetWidth,i=u.offsetHeight;return!(a||i||r.getClientRects().length)},yu=function(r){var e;if(r instanceof Element)return!0;var t=(e=r?.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(t&&r instanceof t.Element)},Fl=function(r){switch(r.tagName){case"INPUT":if(r.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Fr=typeof window<"u"?window:{},Ir=new WeakMap,Ou=/auto|scroll/,wl=/^tb|vertical/,yl=/msie|trident/i.test(Fr.navigator&&Fr.navigator.userAgent),Le=function(r){return parseFloat(r||"0")},hr=function(r,e,t){return r===void 0&&(r=0),e===void 0&&(e=0),t===void 0&&(t=!1),new bl((t?e:r)||0,(t?r:e)||0)},xu=ur({devicePixelContentBoxSize:hr(),borderBoxSize:hr(),contentBoxSize:hr(),contentRect:new Ba(0,0,0,0)}),Aa=function(r,e){if(e===void 0&&(e=!1),Ir.has(r)&&!e)return Ir.get(r);if(Ea(r))return Ir.set(r,xu),xu;var t=getComputedStyle(r),n=tn(r)&&r.ownerSVGElement&&r.getBBox(),u=!yl&&t.boxSizing==="border-box",a=wl.test(t.writingMode||""),i=!n&&Ou.test(t.overflowY||""),s=!n&&Ou.test(t.overflowX||""),f=n?0:Le(t.paddingTop),c=n?0:Le(t.paddingRight),v=n?0:Le(t.paddingBottom),h=n?0:Le(t.paddingLeft),d=n?0:Le(t.borderTopWidth),g=n?0:Le(t.borderRightWidth),C=n?0:Le(t.borderBottomWidth),B=n?0:Le(t.borderLeftWidth),E=h+c,m=f+v,l=B+g,A=d+C,F=s?r.offsetHeight-A-r.clientHeight:0,w=i?r.offsetWidth-l-r.clientWidth:0,M=u?E+l:0,I=u?m+A:0,z=n?n.width:Le(t.width)-M-w,$=n?n.height:Le(t.height)-I-F,W=z+E+w+l,V=$+m+F+A,T=ur({devicePixelContentBoxSize:hr(Math.round(z*devicePixelRatio),Math.round($*devicePixelRatio),a),borderBoxSize:hr(W,V,a),contentBoxSize:hr(z,$,a),contentRect:new Ba(h,f,z,$)});return Ir.set(r,T),T},ba=function(r,e,t){var n=Aa(r,t),u=n.borderBoxSize,a=n.contentBoxSize,i=n.devicePixelContentBoxSize;switch(e){case Tr.DEVICE_PIXEL_CONTENT_BOX:return i;case Tr.BORDER_BOX:return u;default:return a}},Ol=function(){function r(e){var t=Aa(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=ur([t.borderBoxSize]),this.contentBoxSize=ur([t.contentBoxSize]),this.devicePixelContentBoxSize=ur([t.devicePixelContentBoxSize])}return r}(),Fa=function(r){if(Ea(r))return 1/0;for(var e=0,t=r.parentNode;t;)e+=1,t=t.parentNode;return e},xl=function(){var r=1/0,e=[];nr.forEach(function(i){if(i.activeTargets.length!==0){var s=[];i.activeTargets.forEach(function(c){var v=new Ol(c.target),h=Fa(c.target);s.push(v),c.lastReportedSize=ba(c.target,c.observedBox),h<r&&(r=h)}),e.push(function(){i.callback.call(i.observer,s,i.observer)}),i.activeTargets.splice(0,i.activeTargets.length)}});for(var t=0,n=e;t<n.length;t++){var u=n[t];u()}return r},Pu=function(r){nr.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(u){u.isActive()&&(Fa(u.target)>r?t.activeTargets.push(u):t.skippedTargets.push(u))})})},Pl=function(){var r=0;for(Pu(r);Bl();)r=xl(),Pu(r);return El()&&Al(),r>0},yt,wa=[],Sl=function(){return wa.splice(0).forEach(function(r){return r()})},Tl=function(r){if(!yt){var e=0,t=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return Sl()}).observe(t,n),yt=function(){t.textContent="".concat(e?e--:e++)}}wa.push(r),yt()},Rl=function(r){Tl(function(){requestAnimationFrame(r)})},Kr=0,jl=function(){return!!Kr},kl=250,Nl={attributes:!0,characterData:!0,childList:!0,subtree:!0},Su=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Tu=function(r){return r===void 0&&(r=0),Date.now()+r},Ot=!1,Ml=function(){function r(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return r.prototype.run=function(e){var t=this;if(e===void 0&&(e=kl),!Ot){Ot=!0;var n=Tu(e);Rl(function(){var u=!1;try{u=Pl()}finally{if(Ot=!1,e=n-Tu(),!jl())return;u?t.run(1e3):e>0?t.run(e):t.start()}})}},r.prototype.schedule=function(){this.stop(),this.run()},r.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,Nl)};document.body?t():Fr.addEventListener("DOMContentLoaded",t)},r.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Su.forEach(function(t){return Fr.addEventListener(t,e.listener,!0)}))},r.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Su.forEach(function(t){return Fr.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},r}(),Wt=new Ml,Ru=function(r){!Kr&&r>0&&Wt.start(),Kr+=r,!Kr&&Wt.stop()},Il=function(r){return!tn(r)&&!Fl(r)&&getComputedStyle(r).display==="inline"},Ll=function(){function r(e,t){this.target=e,this.observedBox=t||Tr.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return r.prototype.isActive=function(){var e=ba(this.target,this.observedBox,!0);return Il(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},r}(),zl=function(){function r(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}return r}(),Lr=new WeakMap,ju=function(r,e){for(var t=0;t<r.length;t+=1)if(r[t].target===e)return t;return-1},zr=function(){function r(){}return r.connect=function(e,t){var n=new zl(e,t);Lr.set(e,n)},r.observe=function(e,t,n){var u=Lr.get(e),a=u.observationTargets.length===0;ju(u.observationTargets,t)<0&&(a&&nr.push(u),u.observationTargets.push(new Ll(t,n&&n.box)),Ru(1),Wt.schedule())},r.unobserve=function(e,t){var n=Lr.get(e),u=ju(n.observationTargets,t),a=n.observationTargets.length===1;u>=0&&(a&&nr.splice(nr.indexOf(n),1),n.observationTargets.splice(u,1),Ru(-1))},r.disconnect=function(e){var t=this,n=Lr.get(e);n.observationTargets.slice().forEach(function(u){return t.unobserve(e,u.target)}),n.activeTargets.splice(0,n.activeTargets.length)},r}(),$l=function(){function r(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");zr.connect(this,e)}return r.prototype.observe=function(e,t){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!yu(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");zr.observe(this,e,t)},r.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!yu(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");zr.unobserve(this,e)},r.prototype.disconnect=function(){zr.disconnect(this)},r.toString=function(){return"function ResizeObserver () { [polyfill code] }"},r}();function Wl(r,e){if(r==null)return{};var t={},n=Object.keys(r),u,a;for(a=0;a<n.length;a++)u=n[a],!(e.indexOf(u)>=0)&&(t[u]=r[u]);return t}function Zr(r,e){if(r==null)return{};var t=Wl(r,e),n,u;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(u=0;u<a.length;u++)n=a[u],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function Rr(r){"@babel/helpers - typeof";return Rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rr(r)}function ql(r,e){if(Rr(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Rr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Hl(r){var e=ql(r,"string");return Rr(e)==="symbol"?e:String(e)}function ve(r,e,t){return e=Hl(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var nn=R.createContext(null),$e=()=>{var r=R.useContext(nn);if(!r)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return r},N=Z;function ku(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function $r(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ku(Object(t),!0).forEach(function(n){ve(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ku(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Kl=25,Vl=200,Ul=function(){},Gl=r=>r?.constructor.name==="DataTransfer";function Yl(r){var{editor:e,scheduleOnDOMSelectionChange:t,onDOMSelectionChange:n}=r,u=!1,a=null,i=null,s=null,f=0,c=!1,v=()=>{var T=He.get(e);if(He.delete(e),T){var{selection:y}=e,j=gu(e,T);j&&(!y||!b.equals(j,y))&&x.select(e,j)}},h=()=>{var T=Je.get(e);if(Je.delete(e),!!T){if(T.at){var y=re.isPoint(T.at)?zt(e,T.at):gu(e,T.at);if(!y)return;var j=o.range(e,y);(!e.selection||!b.equals(e.selection,j))&&x.select(e,y)}T.run()}},d=()=>{if(i&&(clearTimeout(i),i=null),s&&(clearTimeout(s),s=null),!F()&&!A()){v();return}u||(u=!0,setTimeout(()=>u=!1)),A()&&(u="action");var T=e.selection&&o.rangeRef(e,e.selection,{affinity:"forward"});Ke.set(e,e.marks),Ul("flush",Je.get(e),Se.get(e));for(var y=F(),j;j=(k=Se.get(e))===null||k===void 0?void 0:k[0];){var k,X,U=Ie.get(e);U!==void 0&&(Ie.delete(e),e.marks=U),U&&c===!1&&(c=null);var te=sl(j);(!e.selection||!b.equals(e.selection,te))&&x.select(e,te),j.diff.text?o.insertText(e,j.diff.text):o.deleteFragment(e),Se.set(e,(X=Se.get(e))===null||X===void 0?void 0:X.filter(ue=>{var{id:se}=ue;return se!==j.id})),nl(e,j)||(y=!1,Je.delete(e),Ke.delete(e),u="action",He.delete(e),t.cancel(),n.cancel(),T?.unref())}var _=T?.unref();if(_&&!He.get(e)&&(!e.selection||!b.equals(_,e.selection))&&x.select(e,_),A()){h();return}y&&t(),t.flush(),n.flush(),v();var ee=Ke.get(e);Ke.delete(e),ee!==void 0&&(e.marks=ee,e.onChange())},g=T=>{a&&clearTimeout(a),a=setTimeout(()=>{rr.set(e,!1),d()},Kl)},C=T=>{rr.set(e,!0),a&&(clearTimeout(a),a=null)},B=function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,j=Mt.get(e);if(j){if(F()||y){j.style.display="none";return}j.style.removeProperty("display")}},E=(T,y)=>{var j,k=(j=Se.get(e))!==null&&j!==void 0?j:[];Se.set(e,k);var X=L.leaf(e,T),U=k.findIndex(ee=>D.equals(ee.path,T));if(U<0){var te=Ca(X.text,y);te&&k.push({path:T,diff:y,id:f++}),B();return}var _=il(X.text,k[U].diff,y);if(!_){k.splice(U,1),B();return}k[U]=$r($r({},k[U]),{},{diff:_})},m=function(y){var{at:j}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};c=!1,He.delete(e),t.cancel(),n.cancel(),A()&&d(),Je.set(e,{at:j,run:y}),s=setTimeout(d)},l=T=>{var y;if(i&&(clearTimeout(i),i=null),!dr.get(e)){var{inputType:j}=T,k=null,X=T.dataTransfer||T.data||void 0;c!==!1&&j!=="insertText"&&j!=="insertCompositionText"&&(c=!1);var[U]=T.getTargetRanges();U&&(k=N.toSlateRange(e,U,{exactMatch:!1,suppressThrow:!0}));var te=N.getWindow(e),_=te.getSelection();if(!k&&_&&(U=_,k=N.toSlateRange(e,_,{exactMatch:!1,suppressThrow:!0})),k=(y=k)!==null&&y!==void 0?y:e.selection,!!k){var ee=!0;if(j.startsWith("delete")){var ue=j.endsWith("Backward")?"backward":"forward",[se,H]=b.edges(k),[ae,ge]=o.leaf(e,se.path);if(b.isExpanded(k)&&ae.text.length===se.offset&&H.offset===0){var me=o.next(e,{at:se.path,match:K.isText});me&&D.equals(me[1],H.path)&&(ue==="backward"?(k={anchor:H,focus:H},se=H,[ae,ge]=me):(k={anchor:se,focus:se},H=se))}var be={text:"",start:se.offset,end:H.offset},Pe=Se.get(e),p=Pe?.find(ke=>D.equals(ke.path,ge)),P=p?[p.diff,be]:[be],O=ga(ae.text,...P);if(O.length===0&&(ee=!1),b.isExpanded(k)){if(ee&&D.equals(k.anchor.path,k.focus.path)){var S={path:k.anchor.path,offset:se.offset},Q=o.range(e,S,S);return I(Q),E(k.anchor.path,{text:"",end:H.offset,start:se.offset})}return m(()=>o.deleteFragment(e,{direction:ue}),{at:k})}}switch(j){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return m(()=>o.deleteFragment(e),{at:k});case"deleteContent":case"deleteContentForward":{var{anchor:q}=k;if(ee&&b.isCollapsed(k)){var de=L.leaf(e,q.path);if(q.offset<de.text.length)return E(q.path,{text:"",start:q.offset,end:q.offset+1})}return m(()=>o.deleteForward(e),{at:k})}case"deleteContentBackward":{var oe,{anchor:ie}=k,Be=Nt(U)?U.isCollapsed:!!((oe=U)!==null&&oe!==void 0&&oe.collapsed);return ee&&Be&&b.isCollapsed(k)&&ie.offset>0?E(ie.path,{text:"",start:ie.offset-1,end:ie.offset}):m(()=>o.deleteBackward(e),{at:k})}case"deleteEntireSoftLine":return m(()=>{o.deleteBackward(e,{unit:"line"}),o.deleteForward(e,{unit:"line"})},{at:k});case"deleteHardLineBackward":return m(()=>o.deleteBackward(e,{unit:"block"}),{at:k});case"deleteSoftLineBackward":return m(()=>o.deleteBackward(e,{unit:"line"}),{at:k});case"deleteHardLineForward":return m(()=>o.deleteForward(e,{unit:"block"}),{at:k});case"deleteSoftLineForward":return m(()=>o.deleteForward(e,{unit:"line"}),{at:k});case"deleteWordBackward":return m(()=>o.deleteBackward(e,{unit:"word"}),{at:k});case"deleteWordForward":return m(()=>o.deleteForward(e,{unit:"word"}),{at:k});case"insertLineBreak":return m(()=>o.insertSoftBreak(e),{at:k});case"insertParagraph":return m(()=>o.insertBreak(e),{at:k});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(Gl(X))return m(()=>N.insertData(e,X),{at:k});var ne=X??"";if(Ie.get(e)&&(ne=ne.replace("\uFEFF","")),j==="insertText"&&/.*\n.*\n$/.test(ne)&&(ne=ne.slice(0,-1)),ne.includes(`
`))return m(()=>{var ke=ne.split(`
`);ke.forEach((Fe,Ee)=>{Fe&&o.insertText(e,Fe),Ee!==ke.length-1&&o.insertSoftBreak(e)})},{at:k});if(D.equals(k.anchor.path,k.focus.path)){var[pe,he]=b.edges(k),Ae={start:pe.offset,end:he.offset,text:ne};if(ne&&c&&j==="insertCompositionText"){var Ge=c.start+c.text.search(/\S|$/),sr=Ae.start+Ae.text.search(/\S|$/);sr===Ge+1&&Ae.end===c.start+c.text.length?(Ae.start-=1,c=null,W()):c=!1}else j==="insertText"?c===null?c=Ae:c&&b.isCollapsed(k)&&c.end+c.text.length===pe.offset?c=$r($r({},c),{},{text:c.text+ne}):c=!1:c=!1;if(ee){var We=e.selection;if(E(pe.path,Ae),We){var Ye={path:pe.path,offset:pe.offset+ne.length};m(()=>{x.select(e,{anchor:Ye,focus:Ye})},{at:Ye})}return}}return m(()=>o.insertText(e,ne),{at:k})}}}}},A=()=>!!Je.get(e),F=()=>{var T;return!!((T=Se.get(e))!==null&&T!==void 0&&T.length)},w=()=>A()||F(),M=()=>u,I=T=>{He.set(e,T),i&&(clearTimeout(i),i=null);var{selection:y}=e;if(T){var j=!y||!D.equals(y.anchor.path,T.anchor.path),k=!y||!D.equals(y.anchor.path.slice(0,-1),T.anchor.path.slice(0,-1));(j&&c||k)&&(c=!1),(j||F())&&(i=setTimeout(d,Vl))}},z=()=>{(A()||!F())&&d()},$=T=>{F()||(B(!0),setTimeout(B))},W=()=>{A()||(s=setTimeout(d))},V=T=>{if(!(F()||A())&&T.some(j=>Qt(e,j,T))){var y;(y=ha.get(e))===null||y===void 0||y()}};return{flush:d,scheduleFlush:W,hasPendingDiffs:F,hasPendingAction:A,hasPendingChanges:w,isFlushing:M,handleUserSelect:I,handleCompositionEnd:g,handleCompositionStart:C,handleDOMBeforeInput:l,handleKeyDown:$,handleDomMutations:V,handleInput:z}}function Xl(){var r=R.useRef(!1);return R.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]),r.current}var Ue=qr?R.useLayoutEffect:R.useEffect;function Jl(r,e,t){var[n]=R.useState(()=>new MutationObserver(e));Ue(()=>{n.takeRecords()}),R.useEffect(()=>{if(!r.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(r.current,t),()=>n.disconnect()},[n,r,t])}var Zl=["node"];function Nu(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function Ql(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Nu(Object(t),!0).forEach(function(n){ve(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Nu(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var _l={subtree:!0,childList:!0,characterData:!0},ef=ye?r=>{var{node:e}=r,t=Zr(r,Zl);if(!ye)return null;var n=$e(),u=Xl(),[a]=R.useState(()=>Yl(Ql({editor:n},t)));return Jl(e,a.handleDomMutations,_l),en.set(n,a.scheduleFlush),u&&a.flush(),a}:()=>null;function Mu(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function rf(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Mu(Object(t),!0).forEach(function(n){ve(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Mu(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var tf=r=>{var{isLast:e,leaf:t,parent:n,text:u}=r,a=$e(),i=N.findPath(a,u),s=D.parent(i),f=!!t[Da];return a.isVoid(n)?Y.createElement(xt,{length:L.string(n).length}):t.text===""&&n.children[n.children.length-1]===u&&!a.isInline(n)&&o.string(a,s)===""?Y.createElement(xt,{isLineBreak:!0,isMarkPlaceholder:f}):t.text===""?Y.createElement(xt,{isMarkPlaceholder:f}):e&&t.text.slice(-1)===`
`?Y.createElement(Iu,{isTrailing:!0,text:t.text}):Y.createElement(Iu,{text:t.text})},Iu=r=>{var{text:e,isTrailing:t=!1}=r,n=R.useRef(null),u=()=>"".concat(e??"").concat(t?`
`:""),[a]=R.useState(u);return Ue(()=>{var i=u();n.current&&n.current.textContent!==i&&(n.current.textContent=i)}),Y.createElement(nf,{ref:n},a)},nf=R.memo(R.forwardRef((r,e)=>Y.createElement("span",{"data-slate-string":!0,ref:e},r.children))),xt=r=>{var{length:e=0,isLineBreak:t=!1,isMarkPlaceholder:n=!1}=r,u={"data-slate-zero-width":t?"n":"z","data-slate-length":e};return n&&(u["data-slate-mark-placeholder"]=!0),Y.createElement("span",rf({},u),!ye||!t?"\uFEFF":null,t?Y.createElement("br",null):null)};function Lu(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function ya(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Lu(Object(t),!0).forEach(function(n){ve(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Lu(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var uf=ye?300:0;function af(r,e){r.current&&(r.current.disconnect(),e&&(r.current=null))}function zu(r){r.current&&(clearTimeout(r.current),r.current=null)}var sf=r=>Y.createElement(ff,ya({},r)),of=r=>{var{leaf:e,isLast:t,text:n,parent:u,renderPlaceholder:a,renderLeaf:i=sf,leafPosition:s}=r,f=$e(),c=R.useRef(null),v=R.useRef(null),[h,d]=R.useState(!1),g=R.useRef(null),C=R.useCallback(A=>{if(af(c,A==null),A==null){var F;Mt.delete(f),(F=e.onPlaceholderResize)===null||F===void 0||F.call(e,null)}else{if(Mt.set(f,A),!c.current){var w=window.ResizeObserver||$l;c.current=new w(()=>{var M;(M=e.onPlaceholderResize)===null||M===void 0||M.call(e,A)})}c.current.observe(A),v.current=A}},[v,e,f]),B=Y.createElement(tf,{isLast:t,leaf:e,parent:u,text:n}),E=!!e[Cr];if(R.useEffect(()=>(E?g.current||(g.current=setTimeout(()=>{d(!0),g.current=null},uf)):(zu(g),d(!1)),()=>zu(g)),[E,d]),E&&h){var m={children:e.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:er?"inherit":void 0},contentEditable:!1,ref:C}};B=Y.createElement(Y.Fragment,null,B,a(m))}var l={"data-slate-leaf":!0};return i({attributes:l,children:B,leaf:e,text:n,leafPosition:s})},lf=Y.memo(of,(r,e)=>e.parent===r.parent&&e.isLast===r.isLast&&e.renderLeaf===r.renderLeaf&&e.renderPlaceholder===r.renderPlaceholder&&e.text===r.text&&K.equals(e.leaf,r.leaf)&&e.leaf[Cr]===r.leaf[Cr]),ff=r=>{var{attributes:e,children:t}=r;return Y.createElement("span",ya({},e),t)};function cf(r,e){var[,t]=R.useReducer(c=>c+1,0),n=R.useRef(),u=R.useRef(()=>null),a=R.useRef(null),i;try{if(r!==u.current||n.current){var s=r();e(a.current,s)?i=a.current:i=s}else i=a.current}catch(c){throw n.current&&vf(c)&&(c.message+=`
The error may be correlated with this previous error:
`.concat(n.current.stack,`

`)),c}u.current=r,a.current=i,n.current=void 0;var f=R.useCallback(()=>{try{var c=u.current();if(e(a.current,c))return;a.current=c}catch(v){v instanceof Error?n.current=v:n.current=new Error(String(v))}t()},[]);return[i,f]}function vf(r){return r instanceof Error}var Oa=R.createContext({}),xa=(r,e)=>{var t=$e(),{decorate:n,addEventListener:u}=R.useContext(Oa),a=()=>{var c=N.findPath(t,r);return n([r,c])},i=K.isText(r)?pa:rn,[s,f]=cf(a,i);return Ue(()=>{var c=u(f);return f(),c},[u,f]),R.useMemo(()=>[...s,...e],[s,e])},df=r=>{var e=R.useRef(new Set),t=R.useRef(r);Ue(()=>{t.current=r,e.current.forEach(a=>a())},[r]);var n=R.useCallback(a=>t.current(a),[]),u=R.useCallback(a=>(e.current.add(a),()=>{e.current.delete(a)}),[]);return R.useMemo(()=>({decorate:n,addEventListener:u}),[n,u])};function $u(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function Pa(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$u(Object(t),!0).forEach(function(n){ve(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):$u(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var hf=r=>Y.createElement(gf,Pa({},r)),Df=r=>{for(var{decorations:e,isLast:t,parent:n,renderPlaceholder:u,renderLeaf:a,renderText:i=hf,text:s}=r,f=$e(),c=R.useRef(null),v=xa(s,e),h=K.decorations(s,v),d=N.findKey(f,s),g=[],C=0;C<h.length;C++){var{leaf:B,position:E}=h[C];g.push(Y.createElement(lf,{isLast:t&&C===h.length-1,key:"".concat(d.id,"-").concat(C),renderPlaceholder:u,leaf:B,leafPosition:E,text:s,parent:n,renderLeaf:a}))}var m=R.useCallback(A=>{var F=tt.get(f);A?(F?.set(d,A),tr.set(s,A),Sr.set(A,s)):(F?.delete(d),tr.delete(s),c.current&&Sr.delete(c.current)),c.current=A},[c,f,d,s]),l={"data-slate-node":"text",ref:m};return i({text:s,children:g,attributes:l})},Sa=Y.memo(Df,(r,e)=>e.parent===r.parent&&e.isLast===r.isLast&&e.renderText===r.renderText&&e.renderLeaf===r.renderLeaf&&e.renderPlaceholder===r.renderPlaceholder&&e.text===r.text&&pa(e.decorations,r.decorations)),gf=r=>{var{attributes:e,children:t}=r;return Y.createElement("span",Pa({},e),t)};function Wu(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function qt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wu(Object(t),!0).forEach(function(n){ve(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Wu(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Cf=r=>Y.createElement(Bf,qt({},r)),mf=r=>{var{decorations:e,element:t,renderElement:n=Cf,renderChunk:u,renderPlaceholder:a,renderLeaf:i,renderText:s}=r,f=$e(),c=Sf(),v=f.isInline(t),h=xa(t,e),d=N.findKey(f,t),g=R.useCallback(F=>{var w=tt.get(f);F?(w?.set(d,F),tr.set(t,F),Sr.set(F,t)):(w?.delete(d),tr.delete(t))},[f,d,t]),C=ja({decorations:h,node:t,renderElement:n,renderChunk:u,renderPlaceholder:a,renderLeaf:i,renderText:s}),B={"data-slate-node":"element",ref:g};if(v&&(B["data-slate-inline"]=!0),!v&&o.hasInlines(f,t)){var E=L.string(t),m=na(E);m==="rtl"&&(B.dir=m)}if(o.isVoid(f,t)){B["data-slate-void"]=!0,!c&&v&&(B.contentEditable=!1);var l=v?"span":"div",[[A]]=L.texts(t);C=Y.createElement(l,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},Y.createElement(Sa,{renderPlaceholder:a,decorations:[],isLast:!1,parent:t,text:A})),vr.set(A,0),Ar.set(A,t)}return n({attributes:B,children:C,element:t})},pf=Y.memo(mf,(r,e)=>r.element===e.element&&r.renderElement===e.renderElement&&r.renderChunk===e.renderChunk&&r.renderText===e.renderText&&r.renderLeaf===e.renderLeaf&&r.renderPlaceholder===e.renderPlaceholder&&rn(r.decorations,e.decorations)),Bf=r=>{var{attributes:e,children:t,element:n}=r,u=$e(),a=u.isInline(n)?"span":"div";return Y.createElement(a,qt(qt({},e),{},{style:{position:"relative"}}),t)};class Ef{constructor(e,t){var{chunkSize:n,debug:u}=t;ve(this,"root",void 0),ve(this,"chunkSize",void 0),ve(this,"debug",void 0),ve(this,"reachedEnd",void 0),ve(this,"pointerChunk",void 0),ve(this,"pointerIndex",void 0),ve(this,"pointerIndexStack",void 0),ve(this,"cachedPointerNode",void 0),this.root=e,this.chunkSize=n,this.debug=u??!1,this.pointerChunk=e,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.validateState()}readLeaf(){if(this.reachedEnd)return null;for(;;)if(this.pointerIndex+1<this.pointerSiblings.length){this.pointerIndex++,this.cachedPointerNode=void 0;break}else{if(this.pointerChunk.type==="root")return this.reachedEnd=!0,null;this.exitChunk()}return this.validateState(),this.enterChunkUntilLeaf(!1),this.pointerNode}returnToPreviousLeaf(){if(this.reachedEnd){this.reachedEnd=!1,this.enterChunkUntilLeaf(!0);return}for(;;)if(this.pointerIndex>=1){this.pointerIndex--,this.cachedPointerNode=void 0;break}else if(this.pointerChunk.type==="root"){this.pointerIndex=-1;return}else this.exitChunk();this.validateState(),this.enterChunkUntilLeaf(!0)}insertBefore(e){this.returnToPreviousLeaf(),this.insertAfter(e),this.readLeaf()}insertAfter(e){if(e.length!==0){for(var t=0,n=0;this.pointerChunk.type==="chunk"&&this.pointerIndex===this.pointerSiblings.length-1;){var u=this.chunkSize-this.pointerSiblings.length,a=Math.min(u,e.length);if(a>0){var i=e.splice(0,a);this.rawInsertAfter(i,t)}this.exitChunk(),t++}if(e.length!==0){var s=this.savePointer(),f=null;if(this.readLeaf())for(;this.pointerChunk.type==="chunk"&&this.pointerIndex===0;){var c=this.chunkSize-this.pointerSiblings.length,v=Math.min(c,e.length);if(v>0){var h=e.splice(-v,v);this.pointerIndex=-1,this.cachedPointerNode=void 0,this.rawInsertAfter(h,n),f||(f=this.savePointer())}this.exitChunk(),n++}this.restorePointer(s);var d=Math.max(t,n);this.rawInsertAfter(e,d),f&&this.restorePointer(f),this.validateState()}}}remove(){this.pointerSiblings.splice(this.pointerIndex--,1),this.cachedPointerNode=void 0,this.pointerSiblings.length===0&&this.pointerChunk.type==="chunk"?(this.exitChunk(),this.remove()):this.invalidateChunk(),this.validateState()}invalidateChunk(){for(var e=this.pointerChunk;e.type==="chunk";e=e.parent)this.root.modifiedChunks.add(e)}get atStart(){return this.pointerChunk.type==="root"&&this.pointerIndex===-1}get pointerSiblings(){return this.pointerChunk.children}getPointerNode(){return this.reachedEnd||this.pointerIndex===-1?null:this.pointerSiblings[this.pointerIndex]}get pointerNode(){if(this.cachedPointerNode!==void 0)return this.cachedPointerNode;var e=this.getPointerNode();return this.cachedPointerNode=e,e}getChunkPath(e){for(var t=[],n=e;n.type==="chunk";n=n.parent){var u=n.parent.children.indexOf(n);if(u===-1)return null;t.unshift(u)}return t}savePointer(){if(this.atStart)return"start";if(!this.pointerNode)throw new Error("Cannot save pointer when pointerNode is null");return{chunk:this.pointerChunk,node:this.pointerNode}}restorePointer(e){if(e==="start"){this.pointerChunk=this.root,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.cachedPointerNode=void 0;return}var{chunk:t,node:n}=e,u=t.children.indexOf(n);if(u===-1)throw new Error("Cannot restore point because saved node is no longer in saved chunk");var a=this.getChunkPath(t);if(!a)throw new Error("Cannot restore point because saved chunk is no longer connected to root");this.pointerChunk=t,this.pointerIndex=u,this.pointerIndexStack=a,this.reachedEnd=!1,this.cachedPointerNode=n,this.validateState()}enterChunk(e){var t;if(((t=this.pointerNode)===null||t===void 0?void 0:t.type)!=="chunk")throw new Error("Cannot enter non-chunk");if(this.pointerIndexStack.push(this.pointerIndex),this.pointerChunk=this.pointerNode,this.pointerIndex=e?this.pointerSiblings.length-1:0,this.cachedPointerNode=void 0,this.validateState(),this.pointerChunk.children.length===0)throw new Error("Cannot enter empty chunk")}enterChunkUntilLeaf(e){for(;((t=this.pointerNode)===null||t===void 0?void 0:t.type)==="chunk";){var t;this.enterChunk(e)}}exitChunk(){if(this.pointerChunk.type==="root")throw new Error("Cannot exit root");var e=this.pointerChunk;this.pointerChunk=e.parent,this.pointerIndex=this.pointerIndexStack.pop(),this.cachedPointerNode=void 0,this.validateState()}rawInsertAfter(e,t){if(e.length!==0){for(var n=(v,h,d)=>{if(d===1)return v;for(var g=[],C=0;C<this.chunkSize;C++){var B=v.slice(C*d,(C+1)*d);if(B.length===0)break;var E={type:"chunk",key:new va,parent:h,children:[]};E.children=n(B,E,d/this.chunkSize),g.push(E)}return g},u=this.pointerSiblings.length+e.length,a=0,i=this.chunkSize;i<u;i*=this.chunkSize)a++;var s=Math.max(a,t),f=Math.pow(this.chunkSize,s),c=n(e,this.pointerChunk,f);this.pointerSiblings.splice(this.pointerIndex+1,0,...c),this.pointerIndex+=c.length,this.cachedPointerNode=void 0,this.invalidateChunk(),this.validateState()}}validateState(){if(this.debug){var e=n=>{if(n.type==="chunk"){var{parent:u,children:a}=n;if(!u.children.includes(n))throw new Error("Debug: Chunk ".concat(n.key.id," has an incorrect parent property"));a.forEach(e)}};if(this.root.children.forEach(e),this.cachedPointerNode!==void 0&&this.cachedPointerNode!==this.getPointerNode())throw new Error("Debug: The cached pointer is incorrect and has not been invalidated");var t=this.getChunkPath(this.pointerChunk);if(!t)throw new Error("Debug: The pointer chunk is not connected to the root");if(!D.equals(this.pointerIndexStack,t))throw new Error("Debug: The cached index stack [".concat(this.pointerIndexStack.join(", "),"] does not match the path of the pointer chunk [").concat(t.join(", "),"]"))}}}class Af{constructor(e,t){ve(this,"editor",void 0),ve(this,"children",void 0),ve(this,"cachedKeys",void 0),ve(this,"pointerIndex",void 0),this.editor=e,this.children=t,this.cachedKeys=new Array(t.length),this.pointerIndex=0}read(e){if(e===1)return[this.children[this.pointerIndex++]];var t=this.remaining(e);return this.pointerIndex+=e,t}remaining(e){return e===void 0?this.children.slice(this.pointerIndex):this.children.slice(this.pointerIndex,this.pointerIndex+e)}get reachedEnd(){return this.pointerIndex>=this.children.length}lookAhead(e,t){var n=this.children.indexOf(e,this.pointerIndex);if(n>-1)return n-this.pointerIndex;for(var u=this.pointerIndex;u<this.children.length;u++){var a=this.children[u],i=this.findKey(a,u);if(i===t)return u-this.pointerIndex}return-1}toChunkLeaves(e,t){return e.map((n,u)=>({type:"leaf",node:n,key:this.findKey(n,t+u),index:t+u}))}findKey(e,t){var n=this.cachedKeys[t];if(n)return n;var u=N.findKey(this.editor,e);return this.cachedKeys[t]=u,u}}var bf=(r,e)=>{var{chunkTree:t,children:n,chunkSize:u,rerenderChildren:a=[],onInsert:i,onUpdate:s,onIndexChange:f,debug:c}=e;t.modifiedChunks.clear();for(var v=new Ef(t,{chunkSize:u,debug:c}),h=new Af(r,n),d,g=function(){var m=h.lookAhead(d.node,d.key),l=m>0&&t.movedNodeKeys.has(d.key);if(m===-1||l)return v.remove(),1;var A=h.pointerIndex,F=h.read(m+1),w=F.pop();if(F.length){var M=h.toChunkLeaves(F,A);v.insertBefore(M),F.forEach((z,$)=>{i?.(z,A+$)})}var I=h.pointerIndex-1;d.node!==w&&(d.node=w,v.invalidateChunk(),s?.(w,I)),d.index!==I&&(d.index=I,f?.(w,I)),a.includes(I)&&v.invalidateChunk()};d=v.readLeaf();)g();if(!h.reachedEnd){var C=h.remaining(),B=h.toChunkLeaves(C,h.pointerIndex);v.returnToPreviousLeaf(),v.insertAfter(B),C.forEach((E,m)=>{i?.(E,h.pointerIndex+m)})}t.movedNodeKeys.clear()};function qu(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function Ff(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qu(Object(t),!0).forEach(function(n){ve(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):qu(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Hu=new WeakMap,Ta=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=N.findKey(e,t),a=Hu.get(u);return a||(a={type:"root",movedNodeKeys:new Set,modifiedChunks:new Set,children:[]},Hu.set(u,a)),n.reconcile&&bf(e,Ff({chunkTree:a,children:t.children},n.reconcile)),a},wf=r=>{var{children:e}=r;return e},Ra=r=>{var{root:e,ancestor:t,renderElement:n,renderChunk:u=wf}=r;return t.children.map(a=>{if(a.type==="chunk"){var i=a.key.id,s=u({highest:t===e,lowest:a.children.some(c=>c.type==="leaf"),attributes:{"data-slate-chunk":!0},children:Y.createElement(Of,{root:e,ancestor:a,renderElement:n,renderChunk:u})});return Y.createElement(R.Fragment,{key:i},s)}var f=a.node;return n(f,a.index,a.key)})},yf=Ra,Of=Y.memo(Ra,(r,e)=>r.root===e.root&&r.renderElement===e.renderElement&&r.renderChunk===e.renderChunk&&!e.root.modifiedChunks.has(e.ancestor)),xf=R.createContext(null),ja=r=>{var{decorations:e,node:t,renderElement:n,renderChunk:u,renderPlaceholder:a,renderText:i,renderLeaf:s}=r,f=$e();dr.set(f,!1);var c=o.isEditor(t),v=!c&&G.isElement(t)&&!f.isInline(t),h=v&&o.hasInlines(f,t),d=h?null:f.getChunkSize(t),g=!!d,{decorationsByChild:C,childrenToRedecorate:B}=Pf(f,t,e);g||t.children.forEach((A,F)=>{vr.set(A,F),Ar.set(A,t)});var E=R.useCallback((A,F,w)=>{var M=w??N.findKey(f,A);return Y.createElement(xf.Provider,{key:"provider-".concat(M.id),value:A},Y.createElement(pf,{decorations:C[F],element:A,key:M.id,renderElement:n,renderChunk:u,renderPlaceholder:a,renderLeaf:s,renderText:i}))},[f,C,n,u,a,s,i]),m=(A,F)=>{var w=N.findKey(f,A);return Y.createElement(Sa,{decorations:C[F],key:w.id,isLast:F===t.children.length-1,parent:t,renderPlaceholder:a,renderLeaf:s,renderText:i,text:A})};if(!g)return t.children.map((A,F)=>K.isText(A)?m(A,F):E(A,F));var l=Ta(f,t,{reconcile:{chunkSize:d,rerenderChildren:B,onInsert:(A,F)=>{vr.set(A,F),Ar.set(A,t)},onUpdate:(A,F)=>{vr.set(A,F),Ar.set(A,t)},onIndexChange:(A,F)=>{vr.set(A,F)}}});return Y.createElement(yf,{root:l,ancestor:l,renderElement:E,renderChunk:u})},Pf=(r,e,t)=>{var n=pl(r,e,t),u=R.useRef(n).current,a=[];u.length=n.length;for(var i=0;i<n.length;i++){var s,f=n[i],c=(s=u[i])!==null&&s!==void 0?s:null;rn(c,f)||(u[i]=f,a.push(i))}return{decorationsByChild:u,childrenToRedecorate:a}},ka=R.createContext(!1),Sf=()=>R.useContext(ka),un=R.createContext({});function Tf(){var r=R.useRef(new Set),e=R.useRef(new Set),t=R.useCallback(()=>{r.current.forEach(i=>i())},[]),n=R.useCallback(()=>{e.current.forEach(i=>i()),e.current.clear()},[]),u=R.useCallback(function(i){var{deferred:s=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=s?()=>e.current.add(i):i;return r.current.add(f),()=>{r.current.delete(f)}},[]),a=R.useMemo(()=>({addEventListener:u,flushDeferred:n}),[u,n]);return{selectorContext:a,onChange:t}}function Rf(){var{flushDeferred:r}=R.useContext(un);Ue(r)}var jf=()=>{var{addEventListener:r}=R.useContext(un),[,e]=R.useReducer(t=>t+1,0);if(!r)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");return Ue(()=>r(e),[r]),$e()};function kf(){var r=$e(),e=R.useRef(!1),t=R.useRef(0),n=R.useCallback(()=>{if(!e.current){e.current=!0;var u=N.getWindow(r);u.cancelAnimationFrame(t.current),t.current=u.requestAnimationFrame(()=>{e.current=!1})}},[r]);return R.useEffect(()=>()=>cancelAnimationFrame(t.current),[]),{receivedUserInput:e,onUserInput:n}}var Nf=(r,e)=>{var t=[],n=()=>{t=[]},u=i=>{if(e.current){var s=i.filter(f=>Qt(r,f,i));t.push(...s)}};function a(){t.length>0&&(t.reverse().forEach(i=>{i.type!=="characterData"&&(i.removedNodes.forEach(s=>{i.target.insertBefore(s,i.nextSibling)}),i.addedNodes.forEach(s=>{i.target.removeChild(s)}))}),n())}return{registerMutations:u,restoreDOM:a,clear:n}},Mf={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class Na extends R.Component{constructor(){super(...arguments),ve(this,"context",null),ve(this,"manager",null),ve(this,"mutationObserver",null)}observe(){var e,{node:t}=this.props;if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(e=this.mutationObserver)===null||e===void 0||e.observe(t.current,Mf)}componentDidMount(){var{receivedUserInput:e}=this.props,t=this.context;this.manager=Nf(t,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,t,n,u=(e=this.mutationObserver)===null||e===void 0?void 0:e.takeRecords();if(u!=null&&u.length){var a;(a=this.manager)===null||a===void 0||a.registerMutations(u)}return(t=this.mutationObserver)===null||t===void 0||t.disconnect(),(n=this.manager)===null||n===void 0||n.restoreDOM(),null}componentDidUpdate(){var e;(e=this.manager)===null||e===void 0||e.clear(),this.observe()}componentWillUnmount(){var e;(e=this.mutationObserver)===null||e===void 0||e.disconnect()}render(){return this.props.children}}ve(Na,"contextType",nn);var If=ye?Na:r=>{var{children:e}=r;return Y.createElement(Y.Fragment,null,e)},Lf=R.createContext(!1),zf=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderChunk","renderLeaf","renderText","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],$f=["text"];function Ku(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function ze(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ku(Object(t),!0).forEach(function(n){ve(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ku(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Wf=r=>Y.createElement(Y.Fragment,null,ja(r)),Jf=R.forwardRef((r,e)=>{var t=R.useCallback(p=>Y.createElement(qf,ze({},p)),[]),{autoFocus:n,decorate:u=Hf,onDOMBeforeInput:a,placeholder:i,readOnly:s=!1,renderElement:f,renderChunk:c,renderLeaf:v,renderText:h,renderPlaceholder:d=t,scrollSelectionIntoView:g=Kf,style:C={},as:B="div",disableDefaultStyles:E=!1}=r,m=Zr(r,zf),l=jf(),[A,F]=R.useState(!1),w=R.useRef(null),M=R.useRef([]),[I,z]=R.useState(),$=R.useRef(!1),{onUserInput:W,receivedUserInput:V}=kf(),[,T]=R.useReducer(p=>p+1,0);ha.set(l,T),It.set(l,s);var y=R.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);R.useEffect(()=>{w.current&&n&&w.current.focus()},[n]);var j=R.useRef(),k=R.useMemo(()=>Ro(()=>{if(dr.get(l)){k();return}var p=N.toDOMNode(l,l),P=p.getRootNode();if(!$.current&&er&&P instanceof ShadowRoot){$.current=!0;var O=Vo();O?document.execCommand("indent"):x.deselect(l),$.current=!1;return}var S=j.current;if((ye||!N.isComposing(l))&&(!y.isUpdatingSelection||S!=null&&S.isFlushing())&&!y.isDraggingInternally){var Q=N.findDocumentOrShadowRoot(l),{activeElement:q}=Q,de=N.toDOMNode(l,l),oe=Er(Q);if(q===de?(y.latestElement=q,Ze.set(l,!0)):Ze.delete(l),!oe)return x.deselect(l);var{anchorNode:ie,focusNode:Be}=oe,ne=N.hasEditableTarget(l,ie)||N.isTargetInsideNonReadonlyVoid(l,ie),pe=N.hasTarget(l,Be);if(ne&&pe){var he=N.toSlateRange(l,oe,{exactMatch:!1,suppressThrow:!0});he&&(!N.isComposing(l)&&!(S!=null&&S.hasPendingChanges())&&!(S!=null&&S.isFlushing())?x.select(l,he):S?.handleUserSelect(he))}s&&(!ne||!pe)&&x.deselect(l)}},100),[l,s,y]),X=R.useMemo(()=>Po(k,0),[k]);j.current=ef({node:w,onDOMSelectionChange:k,scheduleOnDOMSelectionChange:X}),Ue(()=>{var p,P,O;w.current&&(O=Zt(w.current))?(da.set(l,O),Hr.set(l,w.current),tr.set(l,w.current),Sr.set(w.current,l)):tr.delete(l);var{selection:S}=l,Q=N.findDocumentOrShadowRoot(l),q=Er(Q);if(!(!q||!N.isFocused(l)||(p=j.current)!==null&&p!==void 0&&p.hasPendingAction())){var de=ne=>{var pe=q.type!=="None";if(!(!S&&!pe)){var he=q.focusNode,Ae;if(cr&&q.rangeCount>1){var Ge=q.getRangeAt(0),sr=q.getRangeAt(q.rangeCount-1);Ge.startContainer===he?Ae=sr.endContainer:Ae=Ge.startContainer}else Ae=q.anchorNode;var We=Hr.get(l),Ye=!1;if(We.contains(Ae)&&We.contains(he)&&(Ye=!0),pe&&Ye&&S&&!ne){var ke=N.toSlateRange(l,q,{exactMatch:!0,suppressThrow:!0});if(ke&&b.equals(ke,S)){var Fe;if(!y.hasMarkPlaceholder||(Fe=Ae)!==null&&Fe!==void 0&&(Fe=Fe.parentElement)!==null&&Fe!==void 0&&Fe.hasAttribute("data-slate-mark-placeholder"))return}}if(S&&!N.hasRange(l,S)){l.selection=N.toSlateRange(l,q,{exactMatch:!1,suppressThrow:!0});return}y.isUpdatingSelection=!0;var Ee=null;try{Ee=S&&N.toDOMRange(l,S)}catch{}return Ee?(N.isComposing(l)&&!ye?q.collapseToEnd():b.isBackward(S)?q.setBaseAndExtent(Ee.endContainer,Ee.endOffset,Ee.startContainer,Ee.startOffset):q.setBaseAndExtent(Ee.startContainer,Ee.startOffset,Ee.endContainer,Ee.endOffset),g(l,Ee)):q.removeAllRanges(),Ee}};q.rangeCount<=1&&de();var oe=((P=j.current)===null||P===void 0?void 0:P.isFlushing())==="action";if(!ye||!oe){setTimeout(()=>{y.isUpdatingSelection=!1});return}var ie=null,Be=requestAnimationFrame(()=>{if(oe){var ne=pe=>{try{var he=N.toDOMNode(l,l);he.focus(),de(pe)}catch{}};ne(),ie=setTimeout(()=>{ne(!0),y.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(Be),ie&&clearTimeout(ie)}}});var U=R.useCallback(p=>{Uu(l,p);var P=N.toDOMNode(l,l),O=P.getRootNode();if($!=null&&$.current&&er&&O instanceof ShadowRoot){var S=p.getTargetRanges(),Q=S[0],q=new window.Range;q.setStart(Q.startContainer,Q.startOffset),q.setEnd(Q.endContainer,Q.endOffset);var de=N.toSlateRange(l,q,{exactMatch:!1,suppressThrow:!1});x.select(l,de),p.preventDefault(),p.stopImmediatePropagation();return}if(W(),!s&&N.hasEditableTarget(l,p.target)&&!Vf(p,a)){var oe;if(j.current)return j.current.handleDOMBeforeInput(p);X.flush(),k.flush();var{selection:ie}=l,{inputType:Be}=p,ne=p.dataTransfer||p.data||void 0,pe=Be==="insertCompositionText"||Be==="deleteCompositionText";if(pe&&N.isComposing(l))return;var he=!1;if(Be==="insertText"&&ie&&b.isCollapsed(ie)&&p.data&&p.data.length===1&&/[a-z ]/i.test(p.data)&&ie.anchor.offset!==0&&(he=!0,l.marks&&(he=!1),!dr.get(l))){var Ae,Ge,{anchor:sr}=ie,[We,Ye]=N.toDOMPoint(l,sr),ke=(Ae=We.parentElement)===null||Ae===void 0?void 0:Ae.closest("a"),Fe=N.getWindow(l);if(he&&ke&&N.hasDOMNode(l,ke)){var Ee,nt=Fe?.document.createTreeWalker(ke,NodeFilter.SHOW_TEXT).lastChild();nt===We&&((Ee=nt.textContent)===null||Ee===void 0?void 0:Ee.length)===Ye&&(he=!1)}if(he&&We.parentElement&&(Fe==null||(Ge=Fe.getComputedStyle(We.parentElement))===null||Ge===void 0?void 0:Ge.whiteSpace)==="pre"){var an=o.above(l,{at:sr.path,match:fn=>G.isElement(fn)&&o.isBlock(l,fn)});an&&L.string(an[0]).includes("	")&&(he=!1)}}if((!Be.startsWith("delete")||Be.startsWith("deleteBy"))&&!dr.get(l)){var[sn]=p.getTargetRanges();if(sn){var on=N.toSlateRange(l,sn,{exactMatch:!1,suppressThrow:!1});if(!ie||!b.equals(ie,on)){he=!1;var ln=!pe&&l.selection&&o.rangeRef(l,l.selection);x.select(l,on),ln&&br.set(l,ln)}}}if(pe)return;if(he||p.preventDefault(),ie&&b.isExpanded(ie)&&Be.startsWith("delete")){var Ia=Be.endsWith("Backward")?"backward":"forward";o.deleteFragment(l,{direction:Ia});return}switch(Be){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{o.deleteFragment(l);break}case"deleteContent":case"deleteContentForward":{o.deleteForward(l);break}case"deleteContentBackward":{o.deleteBackward(l);break}case"deleteEntireSoftLine":{o.deleteBackward(l,{unit:"line"}),o.deleteForward(l,{unit:"line"});break}case"deleteHardLineBackward":{o.deleteBackward(l,{unit:"block"});break}case"deleteSoftLineBackward":{o.deleteBackward(l,{unit:"line"});break}case"deleteHardLineForward":{o.deleteForward(l,{unit:"block"});break}case"deleteSoftLineForward":{o.deleteForward(l,{unit:"line"});break}case"deleteWordBackward":{o.deleteBackward(l,{unit:"word"});break}case"deleteWordForward":{o.deleteForward(l,{unit:"word"});break}case"insertLineBreak":o.insertSoftBreak(l);break;case"insertParagraph":{o.insertBreak(l);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{Be==="insertFromComposition"&&N.isComposing(l)&&(F(!1),rr.set(l,!1)),ne?.constructor.name==="DataTransfer"?N.insertData(l,ne):typeof ne=="string"&&(he?M.current.push(()=>o.insertText(l,ne)):o.insertText(l,ne));break}}var ut=(oe=br.get(l))===null||oe===void 0?void 0:oe.unref();br.delete(l),ut&&(!l.selection||!b.equals(l.selection,ut))&&x.select(l,ut)}},[l,k,W,a,s,X]),te=R.useCallback(p=>{p==null?(k.cancel(),X.cancel(),Hr.delete(l),tr.delete(l),w.current&&Xe&&w.current.removeEventListener("beforeinput",U)):Xe&&p.addEventListener("beforeinput",U),w.current=p,typeof e=="function"?e(p):e&&(e.current=p)},[k,X,l,U,e]);Ue(()=>{var p=N.getWindow(l),P=S=>{var{target:Q}=S,q=Q instanceof HTMLElement?Q:null,de=q?.tagName;de==="INPUT"||de==="TEXTAREA"||X()};p.document.addEventListener("selectionchange",P);var O=()=>{y.isDraggingInternally=!1};return p.document.addEventListener("dragend",O),p.document.addEventListener("drop",O),()=>{p.document.removeEventListener("selectionchange",P),p.document.removeEventListener("dragend",O),p.document.removeEventListener("drop",O)}},[X,y]);var _=u([l,[]]),ee=df(u),ue=i&&l.children.length===1&&Array.from(L.texts(l)).length===1&&L.string(l)===""&&!A,se=R.useCallback(p=>{if(p&&ue){var P;z((P=p.getBoundingClientRect())===null||P===void 0?void 0:P.height)}else z(void 0)},[ue]);if(ue){var H=o.start(l,[]);_.push({[Cr]:!0,placeholder:i,onPlaceholderResize:se,anchor:H,focus:H})}var{marks:ae}=l;if(y.hasMarkPlaceholder=!1,l.selection&&b.isCollapsed(l.selection)&&ae){var{anchor:ge}=l.selection,me=L.leaf(l,ge.path),be=Zr(me,$f);if(!K.equals(me,ae,{loose:!0})){y.hasMarkPlaceholder=!0;var Pe=Object.fromEntries(Object.keys(be).map(p=>[p,null]));_.push(ze(ze(ze({[Da]:!0},Pe),ae),{},{anchor:ge,focus:ge}))}}return R.useEffect(()=>{setTimeout(()=>{var{selection:p}=l;if(p){var{anchor:P}=p,O=L.leaf(l,P.path);if(ae&&!K.equals(O,ae,{loose:!0})){Ie.set(l,ae);return}}Ie.delete(l)})}),Rf(),Y.createElement(ka.Provider,{value:s},Y.createElement(Lf.Provider,{value:A},Y.createElement(Oa.Provider,{value:ee},Y.createElement(If,{node:w,receivedUserInput:V},Y.createElement(B,ze(ze({role:s?void 0:"textbox","aria-multiline":s?void 0:!0},m),{},{spellCheck:Xe||!qr?m.spellCheck:!1,autoCorrect:Xe||!qr?m.autoCorrect:"false",autoCapitalize:Xe||!qr?m.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!s,zindex:-1,suppressContentEditableWarning:!0,ref:te,style:ze(ze({},E?{}:ze({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},I?{minHeight:I}:{})),C),onBeforeInput:R.useCallback(p=>{if(!Xe&&!s&&!Oe(p,m.onBeforeInput)&&N.hasSelectableTarget(l,p.target)&&(p.preventDefault(),!N.isComposing(l))){var P=p.data;o.insertText(l,P)}},[m.onBeforeInput,l,s]),onInput:R.useCallback(p=>{if(!Oe(p,m.onInput)){if(j.current){j.current.handleInput();return}for(var P of M.current)P();M.current=[],N.isFocused(l)||Uu(l,p.nativeEvent)}},[m.onInput,l]),onBlur:R.useCallback(p=>{if(!(s||y.isUpdatingSelection||!N.hasSelectableTarget(l,p.target)||Oe(p,m.onBlur))){var P=N.findDocumentOrShadowRoot(l);if(y.latestElement!==P.activeElement){var{relatedTarget:O}=p,S=N.toDOMNode(l,l);if(O!==S&&!(je(O)&&O.hasAttribute("data-slate-spacer"))){if(O!=null&&Qe(O)&&N.hasDOMNode(l,O)){var Q=N.toSlateNode(l,O);if(G.isElement(Q)&&!l.isVoid(Q))return}if(er){var q=Er(P);q?.removeAllRanges()}Ze.delete(l)}}}},[s,y.isUpdatingSelection,y.latestElement,l,m.onBlur]),onClick:R.useCallback(p=>{if(N.hasTarget(l,p.target)&&!Oe(p,m.onClick)&&Qe(p.target)){var P=N.toSlateNode(l,p.target),O=N.findPath(l,P);if(!o.hasPath(l,O)||L.get(l,O)!==P)return;if(p.detail===cl&&O.length>=1){var S=O;if(!(G.isElement(P)&&o.isBlock(l,P))){var Q,q=o.above(l,{match:he=>G.isElement(he)&&o.isBlock(l,he),at:O});S=(Q=q?.[1])!==null&&Q!==void 0?Q:O.slice(0,1)}var de=o.range(l,S);x.select(l,de);return}if(s)return;var oe=o.start(l,O),ie=o.end(l,O),Be=o.void(l,{at:oe}),ne=o.void(l,{at:ie});if(Be&&ne&&D.equals(Be[1],ne[1])){var pe=o.range(l,oe);x.select(l,pe)}}},[l,m.onClick,s]),onCompositionEnd:R.useCallback(p=>{if(N.hasSelectableTarget(l,p.target)){var P;if(N.isComposing(l)&&Promise.resolve().then(()=>{F(!1),rr.set(l,!1)}),(P=j.current)===null||P===void 0||P.handleCompositionEnd(p),Oe(p,m.onCompositionEnd)||ye)return;if(!er&&!Zo&&!Go&&!_o&&!Qo&&p.data){var O=Ie.get(l);Ie.delete(l),O!==void 0&&(Ke.set(l,l.marks),l.marks=O),o.insertText(l,p.data);var S=Ke.get(l);Ke.delete(l),S!==void 0&&(l.marks=S)}}},[m.onCompositionEnd,l]),onCompositionUpdate:R.useCallback(p=>{N.hasSelectableTarget(l,p.target)&&!Oe(p,m.onCompositionUpdate)&&(N.isComposing(l)||(F(!0),rr.set(l,!0)))},[m.onCompositionUpdate,l]),onCompositionStart:R.useCallback(p=>{if(N.hasSelectableTarget(l,p.target)){var P;if((P=j.current)===null||P===void 0||P.handleCompositionStart(p),Oe(p,m.onCompositionStart)||ye)return;F(!0);var{selection:O}=l;if(O&&b.isExpanded(O)){o.deleteFragment(l);return}}},[m.onCompositionStart,l]),onCopy:R.useCallback(p=>{N.hasSelectableTarget(l,p.target)&&!Oe(p,m.onCopy)&&!Vu(p)&&(p.preventDefault(),N.setFragmentData(l,p.clipboardData,"copy"))},[m.onCopy,l]),onCut:R.useCallback(p=>{if(!s&&N.hasSelectableTarget(l,p.target)&&!Oe(p,m.onCut)&&!Vu(p)){p.preventDefault(),N.setFragmentData(l,p.clipboardData,"cut");var{selection:P}=l;if(P)if(b.isExpanded(P))o.deleteFragment(l);else{var O=L.parent(l,P.anchor.path);o.isVoid(l,O)&&x.delete(l)}}},[s,l,m.onCut]),onDragOver:R.useCallback(p=>{if(N.hasTarget(l,p.target)&&!Oe(p,m.onDragOver)){var P=N.toSlateNode(l,p.target);G.isElement(P)&&o.isVoid(l,P)&&p.preventDefault()}},[m.onDragOver,l]),onDragStart:R.useCallback(p=>{if(!s&&N.hasTarget(l,p.target)&&!Oe(p,m.onDragStart)){var P=N.toSlateNode(l,p.target),O=N.findPath(l,P),S=G.isElement(P)&&o.isVoid(l,P)||o.void(l,{at:O,voids:!0});if(S){var Q=o.range(l,O);x.select(l,Q)}y.isDraggingInternally=!0,N.setFragmentData(l,p.dataTransfer,"drag")}},[s,l,m.onDragStart,y]),onDrop:R.useCallback(p=>{if(!s&&N.hasTarget(l,p.target)&&!Oe(p,m.onDrop)){p.preventDefault();var P=l.selection,O=N.findEventRange(l,p),S=p.dataTransfer;x.select(l,O),y.isDraggingInternally&&P&&!b.equals(P,O)&&!o.void(l,{at:O,voids:!0})&&x.delete(l,{at:P}),N.insertData(l,S),N.isFocused(l)||N.focus(l)}},[s,l,m.onDrop,y]),onDragEnd:R.useCallback(p=>{!s&&y.isDraggingInternally&&m.onDragEnd&&N.hasTarget(l,p.target)&&m.onDragEnd(p)},[s,y,m,l]),onFocus:R.useCallback(p=>{if(!s&&!y.isUpdatingSelection&&N.hasEditableTarget(l,p.target)&&!Oe(p,m.onFocus)){var P=N.toDOMNode(l,l),O=N.findDocumentOrShadowRoot(l);if(y.latestElement=O.activeElement,cr&&p.target!==P){P.focus();return}Ze.set(l,!0)}},[s,y,l,m.onFocus]),onKeyDown:R.useCallback(p=>{if(!s&&N.hasEditableTarget(l,p.target)){var P;(P=j.current)===null||P===void 0||P.handleKeyDown(p);var{nativeEvent:O}=p;if(N.isComposing(l)&&O.isComposing===!1&&(rr.set(l,!1),F(!1)),Oe(p,m.onKeyDown)||N.isComposing(l))return;var{selection:S}=l,Q=l.children[S!==null?S.focus.path[0]:0],q=na(L.string(Q))==="rtl";if(De.isRedo(O)){p.preventDefault();var de=l;typeof de.redo=="function"&&de.redo();return}if(De.isUndo(O)){p.preventDefault();var oe=l;typeof oe.undo=="function"&&oe.undo();return}if(De.isMoveLineBackward(O)){p.preventDefault(),x.move(l,{unit:"line",reverse:!0});return}if(De.isMoveLineForward(O)){p.preventDefault(),x.move(l,{unit:"line"});return}if(De.isExtendLineBackward(O)){p.preventDefault(),x.move(l,{unit:"line",edge:"focus",reverse:!0});return}if(De.isExtendLineForward(O)){p.preventDefault(),x.move(l,{unit:"line",edge:"focus"});return}if(De.isMoveBackward(O)){p.preventDefault(),S&&b.isCollapsed(S)?x.move(l,{reverse:!q}):x.collapse(l,{edge:q?"end":"start"});return}if(De.isMoveForward(O)){p.preventDefault(),S&&b.isCollapsed(S)?x.move(l,{reverse:q}):x.collapse(l,{edge:q?"start":"end"});return}if(De.isMoveWordBackward(O)){p.preventDefault(),S&&b.isExpanded(S)&&x.collapse(l,{edge:"focus"}),x.move(l,{unit:"word",reverse:!q});return}if(De.isMoveWordForward(O)){p.preventDefault(),S&&b.isExpanded(S)&&x.collapse(l,{edge:"focus"}),x.move(l,{unit:"word",reverse:q});return}if(Xe){if((ca||er)&&S&&(De.isDeleteBackward(O)||De.isDeleteForward(O))&&b.isCollapsed(S)){var ie=L.parent(l,S.anchor.path);if(G.isElement(ie)&&o.isVoid(l,ie)&&(o.isInline(l,ie)||o.isBlock(l,ie))){p.preventDefault(),o.deleteBackward(l,{unit:"block"});return}}}else{if(De.isBold(O)||De.isItalic(O)||De.isTransposeCharacter(O)){p.preventDefault();return}if(De.isSoftBreak(O)){p.preventDefault(),o.insertSoftBreak(l);return}if(De.isSplitBlock(O)){p.preventDefault(),o.insertBreak(l);return}if(De.isDeleteBackward(O)){p.preventDefault(),S&&b.isExpanded(S)?o.deleteFragment(l,{direction:"backward"}):o.deleteBackward(l);return}if(De.isDeleteForward(O)){p.preventDefault(),S&&b.isExpanded(S)?o.deleteFragment(l,{direction:"forward"}):o.deleteForward(l);return}if(De.isDeleteLineBackward(O)){p.preventDefault(),S&&b.isExpanded(S)?o.deleteFragment(l,{direction:"backward"}):o.deleteBackward(l,{unit:"line"});return}if(De.isDeleteLineForward(O)){p.preventDefault(),S&&b.isExpanded(S)?o.deleteFragment(l,{direction:"forward"}):o.deleteForward(l,{unit:"line"});return}if(De.isDeleteWordBackward(O)){p.preventDefault(),S&&b.isExpanded(S)?o.deleteFragment(l,{direction:"backward"}):o.deleteBackward(l,{unit:"word"});return}if(De.isDeleteWordForward(O)){p.preventDefault(),S&&b.isExpanded(S)?o.deleteFragment(l,{direction:"forward"}):o.deleteForward(l,{unit:"word"});return}}}},[s,l,m.onKeyDown]),onPaste:R.useCallback(p=>{!s&&N.hasEditableTarget(l,p.target)&&!Oe(p,m.onPaste)&&(!Xe||zo(p.nativeEvent)||er)&&(p.preventDefault(),N.insertData(l,p.clipboardData))},[s,l,m.onPaste])}),Y.createElement(Wf,{decorations:_,node:l,renderElement:f,renderChunk:c,renderPlaceholder:d,renderLeaf:v,renderText:h}))))))}),qf=r=>{var{attributes:e,children:t}=r;return Y.createElement("span",ze({},e),t,ye&&Y.createElement("br",null))},Hf=()=>[],Kf=(r,e)=>{if(e.getBoundingClientRect&&(!r.selection||r.selection&&b.isCollapsed(r.selection))){var t=e.startContainer.parentElement,n=e.getBoundingClientRect(),u=n.width===0&&n.height===0&&n.x===0&&n.y===0;if(u){var a=t.getBoundingClientRect(),i=a.width>0||a.height>0;if(i)return}t.getBoundingClientRect=e.getBoundingClientRect.bind(e),No(t,{scrollMode:"if-needed"}),delete t.getBoundingClientRect}},Oe=(r,e)=>{if(!e)return!1;var t=e(r);return t??(r.isDefaultPrevented()||r.isPropagationStopped())},Vu=r=>Qe(r.target)&&(r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement),Vf=(r,e)=>{if(!e)return!1;var t=e(r);return t??r.defaultPrevented},Uu=(r,e)=>{var t=r;if(e.inputType==="historyUndo"&&typeof t.undo=="function"){t.undo();return}if(e.inputType==="historyRedo"&&typeof t.redo=="function"){t.redo();return}},Uf=R.createContext(!1),Ma=parseInt(Y.version.split(".")[0],10),Gf=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],Zf=r=>{var{editor:e,children:t,onChange:n,onSelectionChange:u,onValueChange:a,initialValue:i}=r,s=Zr(r,Gf);Y.useState(()=>{if(!L.isNodeList(i))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(Ce.stringify(i)));if(!o.isEditor(e))throw new Error("[Slate] editor is invalid! You passed: ".concat(Ce.stringify(e)));e.children=i,Object.assign(e,s)});var{selectorContext:f,onChange:c}=Tf(),v=R.useCallback(g=>{var C;switch(n&&n(e.children),g==null||(C=g.operation)===null||C===void 0?void 0:C.type){case"set_selection":u?.(e.selection);break;default:a?.(e.children)}c()},[e,c,n,u,a]);R.useEffect(()=>(Lt.set(e,v),()=>{Lt.set(e,()=>{})}),[e,v]);var[h,d]=R.useState(N.isFocused(e));return R.useEffect(()=>{d(N.isFocused(e))},[e]),Ue(()=>{var g=()=>d(N.isFocused(e));return Ma>=17?(document.addEventListener("focusin",g),document.addEventListener("focusout",g),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",g)}):(document.addEventListener("focus",g,!0),document.addEventListener("blur",g,!0),()=>{document.removeEventListener("focus",g,!0),document.removeEventListener("blur",g,!0)})},[]),Y.createElement(un.Provider,{value:f},Y.createElement(nn.Provider,{value:e},Y.createElement(Uf.Provider,{value:h},t)))},Qf=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",n=e;n=fl(n,t);var{onChange:u,apply:a,insertText:i}=n;return n.getChunkSize=()=>null,ye&&(n.insertText=(s,f)=>(He.delete(n),i(s,f))),n.onChange=s=>{var f=Ma<18?La.unstable_batchedUpdates:c=>c();f(()=>{u(s)})},n.apply=s=>{if(s.type==="move_node"){var f=L.parent(n,s.path),c=!!n.getChunkSize(f);if(c){var v=L.get(n,s.path),h=Ta(n,f),d=N.findKey(n,v);h.movedNodeKeys.add(d)}}a(s)},n};export{o as E,Zf as S,x as T,Jf as a,Xf as c,Qf as w};
