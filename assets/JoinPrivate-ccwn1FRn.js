import{j as e}from"./ui-vendor-BEMU751j.js";import{d as h,r as a,u as g}from"./react-vendor-oin3n_bH.js";import{e as f,a as b,c as w,d as j}from"./auth-CEE9aHD-.js";import{u as y,c as v}from"./chat-DCR_-ZuK.js";import"./socket-vendor-BLRFddlS.js";import"./social-ZqStCY2R.js";import"./editor-vendor-DpIsqUJN.js";const I=()=>{const{roomId:s}=h(),[l,u]=a.useState(""),[d,c]=a.useState(!1),[m,o]=a.useState(null),x=g(),{joinRoomWithLoading:i}=y(),{user:n}=f();a.useEffect(()=>{(async()=>{if(!(!s||!n))try{(await v(s)).createdBy===n.id&&await i(s)}catch{console.log("Could not check room creator, proceeding with password entry")}})()},[s,n,i]);const p=async r=>{if(r.preventDefault(),!!s){c(!0),o(null);try{await i(s,{password:l,delay:500}),console.log("[JoinPrivate] Submitting password for room",s)}catch(t){console.error("[JoinPrivateRoom] Failed to join room:",t),t.response?.status===429?o("You've made too many attempts to join rooms. Please try again later."):t.response?.status===403?o("Incorrect password. Please try again."):o(t.response?.data?.message||"Failed to join room. Please try again."),c(!1)}}};return e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-500",children:e.jsxs("div",{className:"w-full max-w-md bg-white/10 backdrop-blur-xl rounded-2xl border border-white/20 p-8 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-indigo-500/30 rounded-full flex items-center justify-center mr-4",children:e.jsx(b,{className:"text-white text-xl"})}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Join Private Room"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white/90 mb-2",children:"Enter Password"}),e.jsx("input",{type:"password",id:"password",value:l,onChange:r=>u(r.target.value),className:`w-full px-4 py-3 rounded-lg bg-black/20 border border-white/10 
                     focus:border-indigo-500/50 focus:ring-2 focus:ring-indigo-500/30 
                     outline-none text-white`,placeholder:"Room password",required:!0})]}),m&&e.jsxs("div",{className:"flex items-center gap-2 text-red-400 bg-red-500/10 p-3 rounded-lg",children:[e.jsx(w,{}),e.jsx("span",{children:m})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>x("/rooms"),className:`flex-1 px-4 py-2 rounded-lg border border-white/20 text-white 
                     hover:bg-white/5 transition-colors`,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:`flex-1 px-4 py-2 rounded-lg bg-indigo-500/80 text-white 
                     hover:bg-indigo-600/80 transition-colors flex items-center justify-center gap-2`,children:d?e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:["Join Room",e.jsx(j,{className:"text-sm"})]})})]})]})]})})};export{I as default};
