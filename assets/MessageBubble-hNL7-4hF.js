import{j as t}from"./ui-vendor-BEMU751j.js";import{r as n}from"./react-vendor-oin3n_bH.js";import{e as o}from"./chat-DCR_-ZuK.js";import{w,p as v}from"./auth-CEE9aHD-.js";import"./social-ZqStCY2R.js";import"./editor-vendor-DpIsqUJN.js";import"./socket-vendor-BLRFddlS.js";const F=({msg:e,isMe:r,onUserClick:i,handleImgLoad:c})=>{const[s,p]=n.useState(!1),l=n.useRef(null),[u,g]=n.useState(0),h=n.useRef(null);n.useEffect(()=>{l.current&&g(l.current.offsetWidth)},[e.sender.username]);const m=()=>p(a=>!a),b=()=>{const a=new Date(e.createdAt),d=new Date,x=a.getFullYear()===d.getFullYear()&&a.getMonth()===d.getMonth()&&a.getDate()===d.getDate(),f=a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return x?`Today, ${f}`:a.toLocaleString([],{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",year:"2-digit"})};return t.jsx("div",{className:o("w-full flex px-3 mb-2 pt-5",r?"justify-end":"justify-start"),"aria-label":`Message from ${e.sender.username}: ${e.content}`,children:t.jsxs("div",{className:"relative flex items-start gap-2 max-w-[80%] group",children:[t.jsx("div",{className:o("w-9 h-9 rounded-full flex-shrink-0 flex items-center justify-center overflow-hidden transition-all duration-300 group-hover:scale-105",r?"order-last":""),style:{marginTop:"1.5rem",background:r?"linear-gradient(to bottom right, #f472b6, #a855f7)":"linear-gradient(to bottom right, #818cf8, #3b82f6)",border:r?"2px solid rgba(236,72,153,0.3)":"2px solid rgba(99,102,241,0.3)",boxShadow:r?"0 0 10px rgba(236,72,153,0.2)":"0 0 10px rgba(99,102,241,0.2)",borderRadius:"50%"},role:"img","aria-label":`${e.sender.avatar}'s avatar`,children:e.sender.avatar?t.jsx("img",{src:e.sender.avatar,alt:"Avatar",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}}):t.jsx(w,{style:{position:"relative",zIndex:10,color:"rgba(255, 255, 255, 0.9)",fontSize:"0.75rem"}})}),t.jsxs("div",{className:"relative min-w-0 flex-1",children:[t.jsxs("div",{className:o("absolute z-10 select-none",r?"right-4":"left-4","transform -translate-y-1/2 transition-all duration-300 group-hover:scale-105",i?"pointer-events-auto cursor-pointer":"pointer-events-none"),style:{top:0},onClick:i?a=>{a.stopPropagation(),i(e.sender,a)}:void 0,children:[t.jsx("div",{className:o("px-3 py-0.5 rounded-full flex items-center gap-1",r?"bg-gradient-to-r from-pink-500/70 to-purple-600/70":"bg-gradient-to-r from-indigo-500/70 to-blue-600/70","backdrop-blur-md border border-white/10 shadow-lg",i?"hover:scale-105 transition-transform":""),children:t.jsx("span",{ref:l,className:"text-sm font-bold text-white whitespace-nowrap",style:{textShadow:"0 0 4px rgba(0,0,0,0.3)",letterSpacing:"0.2px"},title:e.sender.username,children:e.sender.username})}),t.jsx("div",{className:o("absolute w-1.5 h-3",r?"right-4":"left-4",r?"bg-gradient-to-b from-purple-600/70 to-transparent":"bg-gradient-to-b from-blue-600/70 to-transparent"),style:{top:"95%"}})]}),t.jsxs("div",{ref:h,className:o("relative rounded-2xl px-4 py-3 pt-3 text-base leading-normal break-words cursor-pointer","transition-all duration-300 group-hover:shadow-2xl border shadow-2xl","animate-fadeIn hover:translate-y-[-2px] backdrop-blur-xl",r?"bg-purple-400/30 text-white text-right border-white/30":"bg-white/30 text-gray-800 text-left border-white/30"),style:{wordBreak:"break-word",width:"fit-content",minWidth:Math.max(u+32,80),paddingTop:"2.2rem",transformStyle:"preserve-3d",transform:`perspective(1000px) ${r?"rotateY(-1deg)":"rotateY(1deg)"} rotateX(1deg)`},onClick:m,tabIndex:0,role:"button","aria-label":`Message: ${e.content}. Click to ${s?"hide":"show"} time.`,onKeyDown:a=>a.key==="Enter"&&m(),children:[e.imageUrl?t.jsx("img",{src:e.imageUrl,alt:"Sent media",className:"max-w-xs max-h-30 rounded-lg shadow-md my-2",style:{display:"block"},onLoad:c}):e.content&&y(e.content.trim())?t.jsx("img",{src:e.content.trim(),alt:"GIF or image",className:"max-w-xs max-h-30 rounded-lg shadow-md my-2",style:{display:"block"},onLoad:c}):t.jsx("div",{dangerouslySetInnerHTML:{__html:e.content},className:"message-content"}),t.jsxs("div",{className:o("mt-2 pt-1 border-t transition-all overflow-hidden flex items-center justify-center gap-1 text-xs",s?"max-h-8 opacity-100 animate-fadeIn":"max-h-0 opacity-0 pointer-events-none",r?"border-white/20 text-white/80":"border-gray-400/20 text-gray-500"),"aria-hidden":!s,children:[t.jsx(v,{style:{fontSize:"0.625rem"}}),t.jsx("span",{children:b()})]})]})," ",t.jsx("div",{className:o("absolute bottom-1 w-12 h-1.5 rounded-full blur-lg opacity-70 transition-all duration-500 group-hover:opacity-90 group-hover:w-16 group-hover:blur-xl",r?"bg-purple-400 right-6":"bg-blue-400 left-6")}),t.jsx("div",{className:o("absolute top-1/3 h-1/2 rounded-full blur-md opacity-20 pointer-events-none",r?"right-4 w-3/4 bg-gradient-to-r from-transparent to-white/50":"left-4 w-3/4 bg-gradient-to-l from-transparent to-white/50")})]})]})})};function y(e){return/\.(gif|jpe?g|png|webp|bmp|svg)(\?.*)?$/i.test(e)||/tenor\.com\//i.test(e)}export{F as default};
