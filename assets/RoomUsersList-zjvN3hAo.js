import{j as t}from"./ui-vendor-BEMU751j.js";import{r as i}from"./react-vendor-oin3n_bH.js";import{e as w,s as n}from"./auth-CEE9aHD-.js";import{U}from"./social-PyUT3FD-.js";import"./socket-vendor-BLRFddlS.js";import"./chat-xRr-uYkC.js";import"./editor-vendor-DpIsqUJN.js";const _=({roomId:r,onOpenDM:m})=>{const{user:o}=w(),[u,d]=i.useState([]),[a,c]=i.useState(null),[p,x]=i.useState({x:0,y:0});i.useEffect(()=>{if(!r)return;n.emit("joinRoom",{roomId:r}),n.emit("getRoomUsers",{roomId:r},s=>{d(s.users||[])});const e=s=>{d(s.users||[])};return n.on("roomUsersUpdate",e),()=>{n.off("roomUsersUpdate",e),n.emit("leaveRoom",{roomId:r})}},[r]);const h=u.slice().sort((e,s)=>e._id===o?.id?-1:s._id===o?.id?1:e.username.localeCompare(s.username)),f=(e,s)=>{if(e._id===o?.id)return;s.stopPropagation();const l=s.currentTarget.getBoundingClientRect();x({x:l.left+l.width/2,y:l.bottom+5}),c(e)},b=()=>{c(null)};return t.jsxs("div",{className:"flex-1 min-h-[26vh] h-full overflow-y-auto p-4 space-y-2 mb-4 bg-white/20 rounded-2xl border border-white/30 shadow-2xl backdrop-blur-3xl",children:[t.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Connected Users"}),t.jsx("ul",{className:"space-y-2",children:h.map(e=>t.jsxs("li",{onClick:s=>f(e,s),className:`flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-colors ${e._id===o?.id?"font-bold text-blue-300":"text-white/90 hover:bg-white/10"}`,children:[e.avatar?t.jsx("img",{src:e.avatar,alt:e.username,className:"w-7 h-7 rounded-full object-cover border border-white/20"}):t.jsx("span",{className:"w-7 h-7 rounded-full bg-blue-500/30 flex items-center justify-center text-white/80 text-xs",children:e.username[0].toUpperCase()}),t.jsx("span",{children:e.username}),e._id===o?.id&&t.jsx("span",{className:"ml-1 text-xs",children:"(You)"})]},e._id))}),a&&t.jsx(U,{user:a,isOpen:!!a,onClose:b,position:p,onOpenDM:m})]})};export{_ as default};
