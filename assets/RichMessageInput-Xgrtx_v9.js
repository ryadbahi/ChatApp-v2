const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/emoji-picker-react.esm-BgA2LJTm.js","assets/react-vendor-oin3n_bH.js"])))=>i.map(i=>d[i]);
import{j as l,G as M}from"./ui-vendor-BEMU751j.js";import{R as o,r as c}from"./react-vendor-oin3n_bH.js";import{B as A,C as D,D as L,E as I,G as K}from"./auth-CMvCJYTb.js";import{_,L as B,E as O,j as $}from"./chat-DTYdApTY.js";import{S as U,a as H,E as x}from"./editor-vendor-DpIsqUJN.js";import"./socket-vendor-BLRFddlS.js";import"./social-Dqso1mru.js";const q=e=>e.map(r=>r.type==="paragraph"?r.children.map(a=>{let t=a.text||"";return t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),a.bold&&(t=`<strong>${t}</strong>`),a.italic&&(t=`<em>${t}</em>`),a.underline&&(t=`<u>${t}</u>`),a.color&&(t=`<span style="color: ${a.color}">${t}</span>`),t}).join("")||"<br>":"").join("<br>");var Y=class extends c.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,r){console.error("GIF Picker React failed to render:",e,r)}render(){return this.state.hasError?null:this.props.children}},W=o.createContext(null),b=W,V=c.createContext(null),y=V;function u(e,{insertAt:r}={}){if(!e||typeof document>"u")return;let i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",r==="top"&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}u(`.GifPickerReact .gpr-body{display:flex;flex:1;min-height:0}
`);var X=c.createContext(null),v=X;u(`.GifPickerReact .gpr-category-placeholder{border-radius:var(--gpr-category-border-radius);position:relative}
`);u(`.GifPickerReact .gpr-placeholder{background-color:var(--gpr-placeholder-color);transition:opacity .2s ease-in-out}
`);function Q(e){return o.createElement("div",{...e,className:`gpr-placeholder ${e.className||""}`,style:{width:e.width,height:e.height,...e.style}})}var C=Q;function Z(){let e=c.useContext(v);return o.createElement(C,{className:"gpr-category-placeholder",height:e.categoryHeight,width:"100%"})}var J=Z;u(`.GifPickerReact .gpr-category-list{display:grid;grid-gap:var(--gpr-category-list-padding);flex:1;grid-auto-rows:min-content;overflow-y:scroll;padding:var(--gpr-body-padding)}
`);u(`.GifPickerReact .gpr-category{border-radius:var(--gpr-category-border-radius);cursor:pointer;position:relative;transition:box-shadow .15s ease-in-out}.GifPickerReact .gpr-category img{background-color:#d3d3d3;border-radius:var(--gpr-category-border-radius);height:100%;-o-object-fit:cover;object-fit:cover;width:100%}.GifPickerReact .gpr-category-overlay{align-items:center;background-color:rgba(0,0,0,var(--gpr-category-background-opacity));border-radius:var(--gpr-category-border-radius);display:flex;height:100%;justify-content:center;left:0;overflow:hidden;position:absolute;top:0;transition:background-color .15s ease-in-out;width:100%}.GifPickerReact .gpr-category-overlay .gpr-category-name{color:var(--gpr-category-font-color);font-size:var(--gpr-category-font-size);font-weight:var(--gpr-category-font-weight);text-shadow:0 1px 1px rgba(0,0,0,var(--gpr-category-shadow-opacity))}.GifPickerReact .gpr-category:hover{box-shadow:0 0 0 2px var(--gpr-category-border-color-hover)}.GifPickerReact .gpr-category:hover .gpr-category-overlay{background-color:rgba(0,0,0,var(--gpr-category-shadow-opacity-hover))}
`);function ee({image:e,text:r,onClick:i}){let a=c.useContext(v);return o.createElement("button",{type:"button",className:"gpr-btn gpr-category",style:{height:a.categoryHeight},"data-testid":"gpr-category",onClick:i},o.createElement("img",{src:e,loading:"lazy"}),o.createElement("div",{className:"gpr-category-overlay"},o.createElement("div",{className:"gpr-category-name"},r)))}var j=ee;function re({image:e,name:r}){let[i,a]=c.useContext(b);function t(){let n=Object.assign({},i);n.searchTerm=r,a(n)}return o.createElement(j,{image:e,text:r,onClick:t})}var te=re;u(`.GifPickerReact .gpr-icn-trending{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48'%3E%3Cpath fill='%23fff' d='M6.3 37 4 34.7l15-15 8 8.05L41.9 11l2.1 2.05-17 19.2-8-7.95Z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-size:20px;height:20px;width:20px}.GifPickerReact .gpr-category .gpr-text-trending-category{align-items:center;display:flex;gap:4px}
`);function ae({image:e}){let[r,i]=c.useContext(b);function a(){let t=Object.assign({},r);t.showTrending=!0,i(t)}return o.createElement(j,{image:e,onClick:a,text:o.createElement("div",{className:"gpr-text-trending-category"},o.createElement("div",{className:"gpr-icn-trending"}),o.createElement("span",null,"Trending GIFs"))})}var ie=ae;function oe({categories:e,trending:r,columnsCount:i}){var a;function t(){if(!e)return;let n=(e.length+1)%i;return n==0?e:e?.slice(0,-n)}return o.createElement("div",{className:"gpr-category-list",style:{gridTemplateColumns:`repeat(${i}, 1fr)`}},e&&r?o.createElement(o.Fragment,null,o.createElement(ie,{image:r.url}),(a=t())==null?void 0:a.map((n,s)=>o.createElement(te,{key:s,image:n.image,name:n.name}))):o.createElement(o.Fragment,null,[...Array(10*i)].map((n,s)=>o.createElement(J,{key:s}))))}var ne=oe;u(`.GifPickerReact .gpr-gif-list{display:flex;flex:1;flex-direction:row;gap:var(--gpr-category-list-padding);overflow-y:scroll;padding:var(--gpr-body-padding)}.GifPickerReact .gpr-gif-list-column{display:grid;flex:1;grid-gap:var(--gpr-category-list-padding);grid-auto-rows:min-content;grid-template-columns:1fr;grid-template-rows:auto 1fr}.GifPickerReact .gpr-gif-list-no-result{align-items:center;display:flex;flex:1;justify-content:center;padding-bottom:30%}
`);u(`.GifPickerReact .gpr-result-placeholder{border-radius:var(--gpr-category-border-radius)}
`);function ce({height:e,showDelay:r}){let[i,a]=c.useState(!1);return c.useEffect(()=>{if(i)return;function t(){a(!0)}let n=setTimeout(t,r);return()=>clearTimeout(n)},[]),o.createElement(C,{className:"gpr-result-placeholder",height:e,width:"100%",style:{opacity:i?1:0}})}var le=ce,E=[[120,100,130,175,154,110],[150,115,135,154,145,170],[140,125,120,150,100,125],[130,145,175,120,135,100]];function se({columnsCount:e,showDelay:r=70}){return o.createElement("div",{className:"gpr-gif-list"},[...Array(e)].map((i,a)=>o.createElement("div",{className:"gpr-gif-list-column",key:a},E[a%E.length].map((t,n)=>o.createElement(le,{key:n,height:t,showDelay:(n+1)*r*e+r*a})))))}var ge=se;u(`.GifPickerReact .gpr-result-image{border-radius:var(--gpr-category-border-radius);cursor:pointer;transition:box-shadow .15s ease-in-out}.GifPickerReact .gpr-result-image img{background-color:var(--gpr-placeholder-color);border-radius:var(--gpr-category-border-radius);height:100%;-o-object-fit:cover;object-fit:cover;width:100%}.GifPickerReact .gpr-result-image:hover{box-shadow:0 0 0 2px var(--gpr-category-border-color-hover)}
`);function de({image:e,searchTerm:r}){let i=c.useContext(v),a=c.useContext(y);function t(){let n=i.onGifClick;n&&n(e),a.registerShare(e,r)}return o.createElement("button",{type:"button",className:"gpr-btn gpr-result-image",onClick:t},o.createElement("img",{src:e.preview.url,height:e.preview.height,width:e.preview.width,loading:"lazy"}))}var pe=de;function ue({isLoading:e,result:r,searchTerm:i,columnsCount:a}){let t=c.useMemo(()=>he(r,a),[r,a]),n=!r||r.images.length<=0;return e?o.createElement(ge,{columnsCount:a}):n?o.createElement("div",{className:"gpr-gif-list-no-result"},o.createElement("span",null,"No GIFs found!")):o.createElement("div",{className:"gpr-gif-list"},t.map((s,g)=>o.createElement("div",{className:"gpr-gif-list-column",key:g},s.map(d=>o.createElement(pe,{key:d.id,image:d,searchTerm:i})))))}function he(e,r=2){if(!e)return[];let i=new Array(r).fill(null).map(()=>[]),a=new Array(r).fill(0);for(let t of e.images){let n=t.preview.height/t.preview.width,s=a.indexOf(Math.min(...a));i[s].push(t),a[s]+=n}return i}var P=ue;function me({searchTerm:e,columnsCount:r}){let[i,a]=c.useState(null),[t,n]=c.useState(!0),s=c.useContext(y);return c.useEffect(()=>{n(!0);async function g(){let p=await s.search(e);a(p),n(!1)}let d=setTimeout(()=>g(),800);return()=>clearTimeout(d)},[e]),o.createElement(P,{isLoading:t,columnsCount:r,result:i,searchTerm:e})}var fe=me;function be({columnsCount:e}){let[r,i]=c.useState(null),[a,t]=c.useState(!0),n=c.useContext(y);return c.useEffect(()=>{t(!0),(async()=>{let s=await n.trending();i(s),t(!1)})()},[]),o.createElement(P,{columnsCount:e,isLoading:a,result:r})}var ve=be,xe=170;function ye({width:e}){let[r,i]=c.useState(void 0),[a,t]=c.useState(void 0),[n]=c.useContext(b),[s,g]=c.useState(1),d=c.useContext(y),p=c.useRef(null);return c.useEffect(()=>{(async()=>{let m=await d.categories();i(m);let h=await d.trending(1);t(h.images[0])})()},[]),c.useEffect(()=>{let m=p.current?p.current.offsetWidth:0,h=Math.floor(m/xe);h<1&&(h=1),g(h)},[p.current,e]),o.createElement("div",{className:"gpr-body",ref:p},n.showTrending?o.createElement(ve,{columnsCount:s}):n.searchTerm?o.createElement(fe,{columnsCount:s,searchTerm:n.searchTerm}):o.createElement(ne,{columnsCount:s,categories:r,trending:a}))}var ke=ye;u(`.GifPickerReact .gpr-header{border-bottom:1px solid var(--gpr-picker-border-color);min-height:0;padding:var(--gpr-header-padding)}
`);function we(e){return c.createElement("button",{type:"button",...e,className:"gpr-btn "+e.className},e.children)}var R=we;u(`.GifPickerReact button.gpr-btn-clear-search{align-items:center;border-radius:50%;display:flex;height:20px;justify-content:end;padding:0;position:absolute;right:var(--gpr-search-bar-inner-padding);top:50%;transform:translateY(-50%);width:20px}.GifPickerReact .gpr-icn-clear-search{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' width='20' height='80'%3E%3Cpath fill='%23868686' d='M6.98 13.59a.53.53 0 0 0 .74 0l2.42-2.42 2.43 2.43a.53.53 0 0 0 .74 0c.21-.21.21-.54 0-.75l-2.43-2.43L13.32 8c.21-.21.21-.54 0-.75a.525.525 0 0 0-.75 0l-2.42 2.42-2.41-2.4a.525.525 0 0 0-.75 0c-.21.21-.21.54 0 .75l2.41 2.41-2.42 2.42c-.21.2-.21.54 0 .74'/%3E%3Cpath fill='%23868686' d='M10.15 18.43c4.41 0 8-3.59 8-8s-3.59-8-8-8-8 3.59-8 8 3.59 8 8 8m0-14.94c3.83 0 6.94 3.11 6.94 6.94s-3.11 6.94-6.94 6.94-6.94-3.11-6.94-6.94 3.12-6.94 6.94-6.94'/%3E%3Cpath fill='%233371B7' d='M6.98 33.59a.53.53 0 0 0 .74 0l2.42-2.42 2.43 2.43a.53.53 0 0 0 .74 0c.21-.21.21-.54 0-.75l-2.43-2.43L13.32 28c.21-.21.21-.54 0-.75a.525.525 0 0 0-.75 0l-2.42 2.42-2.41-2.41a.525.525 0 0 0-.75 0c-.21.21-.21.54 0 .75l2.41 2.41-2.42 2.42c-.21.21-.21.55 0 .75'/%3E%3Cpath fill='%233371B7' d='M10.15 38.43c4.41 0 8-3.59 8-8s-3.59-8-8-8-8 3.59-8 8 3.59 8 8 8m0-14.94c3.83 0 6.94 3.11 6.94 6.94s-3.11 6.94-6.94 6.94-6.94-3.11-6.94-6.94 3.12-6.94 6.94-6.94'/%3E%3Cpath fill='%23C0C0BF' d='M6.98 53.59a.53.53 0 0 0 .74 0l2.42-2.42 2.43 2.43a.53.53 0 0 0 .74 0c.21-.21.21-.54 0-.75l-2.43-2.43L13.32 48c.21-.21.21-.54 0-.75a.525.525 0 0 0-.75 0l-2.42 2.42-2.41-2.41a.525.525 0 0 0-.75 0c-.21.21-.21.54 0 .75l2.41 2.41-2.42 2.42c-.21.21-.21.55 0 .75'/%3E%3Cpath fill='%23C0C0BF' d='M10.15 58.43c4.41 0 8-3.59 8-8s-3.59-8-8-8-8 3.59-8 8 3.59 8 8 8m0-14.94c3.83 0 6.94 3.11 6.94 6.94s-3.11 6.94-6.94 6.94-6.94-3.11-6.94-6.94 3.12-6.94 6.94-6.94'/%3E%3Cpath fill='%236AA9DD' d='M6.98 73.59a.53.53 0 0 0 .74 0l2.42-2.42 2.43 2.43a.53.53 0 0 0 .74 0c.21-.21.21-.54 0-.75l-2.43-2.43L13.32 68c.21-.21.21-.54 0-.75a.525.525 0 0 0-.75 0l-2.42 2.42-2.41-2.41a.525.525 0 0 0-.75 0c-.21.21-.21.54 0 .75l2.41 2.41-2.42 2.42c-.21.21-.21.55 0 .75'/%3E%3Cpath fill='%236AA9DD' d='M10.15 78.43c4.41 0 8-3.59 8-8s-3.59-8-8-8-8 3.59-8 8 3.59 8 8 8m0-14.94c3.83 0 6.94 3.11 6.94 6.94s-3.11 6.94-6.94 6.94-6.94-3.11-6.94-6.94 3.12-6.94 6.94-6.94'/%3E%3C/svg%3E");background-repeat:no-repeat;background-size:20px;height:20px;width:20px}.GifPickerReact .gpr-search-container button.gpr-btn-clear-search:focus .gpr-icn-clear-search,.GifPickerReact button.gpr-btn-clear-search:hover .gpr-icn-clear-search{background-position-y:-20px}.GifPickerReact button.gpr-btn-clear-search:focus,.GifPickerReact button.gpr-btn-clear-search:hover{background:var(--gpr-hover-bg-color)}.GifPickerReact.gpr-dark-theme button.gpr-btn-clear-search .gpr-icn-clear-search{background-position-y:-40px}.GifPickerReact.gpr-dark-theme button.gpr-btn-clear-search:hover .gpr-icn-clear-search{background-position-y:-60px}
`);function Ee({onClick:e}){return o.createElement(R,{className:"gpr-btn-clear-search",onClick:e},o.createElement("div",{className:"gpr-icn-clear-search"}))}var Ce=Ee;u(`.GifPickerReact .gpr-search-container{display:block;flex:1;min-width:0;position:relative}.GifPickerReact .gpr-search-container input.gpr-search{background-color:var(--gpr-search-input-bg-color);border:1px solid var(--gpr-search-input-bg-color);border-radius:var(--gpr-search-input-border-radius);color:var(--gpr-search-input-text-color);height:var(--gpr-search-input-height);outline:none;padding:var(--gpr-search-input-padding);transition:all .2s ease-in-out;width:100%}.GifPickerReact .gpr-search-container .gpr-icn-search{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' width='20' height='40'%3E%3Cpath fill='%23868686' fill-rule='evenodd' d='M12 8.81c0 2.08-1.68 3.76-3.76 3.76s-3.76-1.68-3.76-3.76 1.68-3.76 3.76-3.76S12 6.73 12 8.81m-.77 3.91c-.83.64-1.87 1.01-2.99 1.01-2.72 0-4.92-2.2-4.92-4.92s2.2-4.92 4.92-4.92 4.92 2.2 4.92 4.92c0 1.13-.38 2.16-1.01 2.99l3.94 3.93c.25.25.25.66 0 .92-.25.25-.66.25-.92 0z' clip-rule='evenodd'/%3E%3Cpath fill='%23C0C0BF' fill-rule='evenodd' d='M12 28.81c0 2.08-1.68 3.76-3.76 3.76s-3.76-1.68-3.76-3.76 1.68-3.76 3.76-3.76S12 26.73 12 28.81m-.77 3.91c-.83.64-1.87 1.01-2.99 1.01-2.72 0-4.92-2.2-4.92-4.92s2.2-4.92 4.92-4.92 4.92 2.2 4.92 4.92c0 1.13-.38 2.16-1.01 2.99l3.94 3.93c.25.25.25.66 0 .92-.25.25-.66.25-.92 0z' clip-rule='evenodd'/%3E%3C/svg%3E");background-position:0 0;background-repeat:no-repeat;background-size:20px;content:"";height:20px;left:var(--gpr-search-bar-inner-padding);position:absolute;top:50%;transform:translateY(-50%);width:20px}.GifPickerReact.gpr-dark-theme .gpr-search-container .gpr-icn-search{background-position-y:-20px}.GifPickerReact .gpr-search-container input.gpr-search::-moz-placeholder{color:var(--gpr-search-input-placeholder-color)}.GifPickerReact .gpr-search-container input.gpr-search::placeholder{color:var(--gpr-search-input-placeholder-color)}.GifPickerReact .gpr-search-container input.gpr-search:focus{background-color:var(--gpr-search-input-bg-color-active);border:1px solid var(--gpr-search-border-color-active)}
`);function je(){let[e,r]=c.useContext(b),i=c.useContext(v);function a(n){let s=Object.assign({},e);s.searchTerm=n.target.value,r(s)}function t(){let n=Object.assign({},e);n.searchTerm="",r(n)}return o.createElement("div",{className:"gpr-search-container"},o.createElement("input",{autoFocus:i.autoFocusSearch,"aria-label":"Search Tenor",placeholder:"Search Tenor",className:"gpr-search","data-testid":"gpr-search-input",type:"text",dir:"auto",maxLength:500,value:e.searchTerm,onChange:a}),o.createElement("div",{className:"gpr-icn-search"}),e.searchTerm.length>0&&o.createElement(Ce,{onClick:t}))}var Pe=je;u(`.GifPickerReact .gpr-title-container{display:block;flex:1;min-width:0;position:relative}.GifPickerReact .gpr-title-container .gpr-title{align-items:center;background-color:var(--gpr-search-input-bg-color);border-radius:var(--gpr-search-input-border-radius);color:var(--gpr-search-input-text-color);display:flex;height:var(--gpr-search-input-height);padding:var(--gpr-horizontal-padding);width:100%}
`);function Re({children:e}){let[r,i]=c.useContext(b);function a(){let t=Object.assign({},r);t.showTrending=!1,i(t)}return o.createElement("div",{className:"gpr-title-container"},o.createElement("div",{className:"gpr-title"},e),o.createElement(R,{className:"gpr-btn-clear-search",onClick:a},o.createElement("div",{className:"gpr-icn-clear-search"})))}var Ge=Re;function Ne(){let[e]=c.useContext(b);return o.createElement("div",{className:"gpr-header"},e.showTrending?o.createElement(Ge,null,"Trending GIFs"):o.createElement(Pe,null))}var Te=Ne,Se=(e=>(e.HIGH="high",e.MEDIUM="medium",e.LOW="low",e.OFF="off",e))(Se||{}),ze=(e=>(e.LIGHT="light",e.DARK="dark",e.AUTO="auto",e))(ze||{});function Fe({children:e}){let r=c.useContext(v),i={height:r.height,width:r.width};return o.createElement("aside",{className:`GifPickerReact gpr-main ${r.theme==="dark"?" gpr-dark-theme":""}`,style:i},e)}var Me=Fe;u(`.GifPickerReact{color-scheme:light;--gpr-highlight-color:#007aeb;--gpr-hover-bg-color:#f1f8ff;--gpr-focus-bg-color:#e0f0ff;--gpr-text-color:#858585;--gpr-search-input-bg-color:#f6f6f6;--gpr-picker-border-color:#e7e7e7;--gpr-bg-color:#fff;--gpr-horizontal-padding:10px;--gpr-picker-border-radius:8px;--gpr-header-padding:15px var(--gpr-horizontal-padding);--gpr-search-input-bg-color-active:var(--gpr-search-input-bg-color);--gpr-search-input-padding:0 32px;--gpr-search-input-border-radius:8px;--gpr-search-input-height:40px;--gpr-search-input-text-color:var(--gpr-text-color);--gpr-search-input-placeholder-color:var(--gpr-text-color);--gpr-search-bar-inner-padding:var(--gpr-horizontal-padding);--gpr-search-border-color-active:var(--gpr-highlight-color);--gpr-body-padding:var(--gpr-header-padding) 0px;--gpr-category-list-padding:var(--gpr-horizontal-padding);--gpr-category-border-radius:4px;--gpr-category-background-opacity:40%;--gpr-category-font-color:var(--gpr-picker-border-color);--gpr-category-font-size:16px;--gpr-category-font-weight:600;--gpr-category-shadow-opacity:60%;--gpr-category-shadow-opacity-hover:65%;--gpr-category-border-color-hover:var(--gpr-highlight-color);--gpr-placeholder-color:#d3d3d3}.GifPickerReact.gpr-dark-theme{color-scheme:dark;--gpr-dark:#000;--gpr-hover-bg-color:#363636f6;--gpr-focus-bg-color:#474747;--gpr-text-color:silver;--gpr-search-input-bg-color:#3b3b3b;--gpr-picker-border-color:#2b2b2b;--gpr-bg-color:#222;--gpr-category-font-color:#e7e7e7;--gpr-search-input-bg-color-active:var(--gpr-dark);--gpr-placeholder-color:var(--gpr-search-input-bg-color)}.GifPickerReact *{box-sizing:border-box}.GifPickerReact.gpr-main{background-color:var(--gpr-bg-color);border-color:var(--gpr-picker-border-color);border-radius:var(--gpr-picker-border-radius);border-style:solid;border-width:1px;color:var(--gpr-text-color);display:flex;flex-direction:column;position:relative}.GifPickerReact button.gpr-btn{background:none;border:0;cursor:pointer;outline:none;padding:0}
`);function Ae(e){let r={searchTerm:e,showTrending:!1},[i,a]=c.useState(r);return[i,a]}var De=Ae;function Le(e){if(!e.tenorApiKey)throw new Error("tenorApiKey is a required prop that is missing");return{tenorApiKey:e.tenorApiKey,onGifClick:e.onGifClick??void 0,autoFocusSearch:e.autoFocusSearch??!0,clientKey:e.clientKey??"gif-picker-react",country:e.country??"US",locale:e.locale??"en_US",contentFilter:e.contentFilter??"off",height:k(e.height??450),width:k(e.width??350),categoryHeight:k(e.categoryHeight??100),theme:Ie(e.theme),initialSearchTerm:e.initialSearchTerm??""}}function k(e){if(typeof e=="number")return`${e}px`;if(typeof e=="string")return e;throw new TypeError("Invalid dimension provided")}function Ie(e){return e==="auto"?Ke()?"dark":"light":e??"light"}function Ke(){return typeof window>"u"?!1:!!window.matchMedia("(prefers-color-scheme: dark)").matches}var _e=Le,Be="gif,tinygif",Oe="https://tenor.googleapis.com/v2/",$e=class{apiKey;clientKey;country;locale;contentFilter;constructor(e,r,i,a,t){this.apiKey=e,this.clientKey=r,this.country=i,this.locale=a,this.contentFilter=t}async callApi(e,r){let i=new URLSearchParams({key:this.apiKey,client_key:this.clientKey,contentfilter:this.contentFilter,media_filter:Be,locale:this.locale,country:this.country,...r}),a=Oe+e+"?"+i;return fetch(a).then(t=>(t.ok||(console.error(t),console.error("[gif-picker-react] Failed to fetch data from Tenor API")),t)).then(t=>t.json()).catch(t=>{console.error(t),console.error("[gif-picker-react] Failed to fetch data from Tenor API")})}praseResult(e){let r=e.media_formats.tinygif,i=e.media_formats.gif;return{id:e.id,tenorUrl:e.itemurl,shortTenorUrl:e.url,description:e.content_description,createdAt:new Date(e.created*1e3),tags:e.tags,url:i.url,width:i.dims[0],height:i.dims[1],preview:{url:r.url,width:r.dims[0],height:r.dims[1]}}}async categories(){return this.callApi("categories",{type:"featured"}).then(e=>e.tags.map(r=>({name:r.searchterm,image:r.image})))}async search(e,r=50){return this.callApi("search",{q:e,ar_range:"all",limit:r}).then(i=>{let a=i.results.map(this.praseResult);return{next:i.next,images:a}})}async trending(e=50){return this.callApi("featured",{ar_range:"all",limit:e}).then(r=>{let i=r.results.map(this.praseResult);return{next:r.next,images:i}})}async registerShare(e,r){let i={id:e.id};r&&(i.q=r),await this.callApi("registershare",i)}},Ue=$e;function He(e){let r=_e(e),i=De(r.initialSearchTerm),a=c.useMemo(()=>new Ue(r.tenorApiKey,r.clientKey,r.country,r.locale,r.contentFilter),[]);return o.createElement(v.Provider,{value:r},o.createElement(b.Provider,{value:i},o.createElement(y.Provider,{value:a},o.createElement(Me,null,o.createElement(Te,null),o.createElement(ke,{width:e.width})))))}var qe=He;function Ye(e){return o.createElement(Y,null,o.createElement(qe,{...e}))}var We=Ye;const Ve=void 0,Xe=({showGifDropdown:e,onToggleGifDropdown:r,onGifSelect:i,onFocusEditor:a})=>{const t=c.useRef(null);c.useEffect(()=>{const g=d=>{const p=d.target;e&&t.current&&!t.current.contains(p)&&r()};return document.addEventListener("pointerdown",g),()=>{document.removeEventListener("pointerdown",g)}},[e,r]);const n=g=>{g?.url&&(i(g),a())},s=()=>{r(),a()};return l.jsxs("div",{className:"relative",children:[l.jsx("button",{type:"button",className:"ml-2 pt-2 pb-2 cursor-pointer px-2 py-1 rounded text-indigo-700bg-white/20 text-white hover:bg-white/30 transition-all font-bold",style:{minWidth:30},onClick:s,"aria-label":"Pick a GIF",children:"GIF"}),e&&l.jsx("div",{className:"absolute bottom-full mb-2 left-0 z-50",ref:t,children:l.jsx(We,{onGifClick:n,width:320,height:400,tenorApiKey:Ve})})]})},Qe=c.lazy(()=>_(()=>import("./emoji-picker-react.esm-BgA2LJTm.js"),__vite__mapDeps([0,1]))),Ze=({showEmoji:e,onToggleEmoji:r,onEmojiClick:i,onFocusEditor:a})=>{const t=c.useRef(null);c.useEffect(()=>{const g=d=>{const p=d.target;e&&t.current&&!t.current.contains(p)&&r()};return document.addEventListener("pointerdown",g),()=>{document.removeEventListener("pointerdown",g)}},[e,r]),c.useEffect(()=>{e&&setTimeout(()=>{a()},50)},[e,a]);const n=g=>{i(g),a()},s=g=>{g.stopPropagation(),r()};return l.jsxs("div",{className:"relative ml-2",children:[l.jsx("button",{type:"button",className:"ml-2 pt-2 pb-2 cursor-pointer px-2 py-1 rounded text-indigo-700bg-white/20 text-white hover:bg-white/30 transition-all",onClick:s,children:"ðŸ˜Š"}),e&&l.jsx("div",{className:"absolute bottom-full mb-2  z-50",ref:t,children:l.jsx(c.Suspense,{fallback:l.jsx("div",{children:"Loadingâ€¦"}),children:l.jsx(Qe,{onEmojiClick:n,lazyLoadEmojis:!0,previewConfig:{showPreview:!1},autoFocusSearch:!1,searchDisabled:!1,width:350,height:450,reactionsDefaultOpen:!0})})})]})},Je=({onImageUpload:e,onFocusEditor:r})=>{const i=async a=>{const t=a.target.files?.[0];if(!t)return;const n=new FormData;n.append("file",t);try{const g=await(await fetch("/api/upload",{method:"POST",body:n})).json();g?.url&&e(g.url)}catch{alert("Failed to upload image")}a.target.value=""};return l.jsxs("label",{className:"ml-2 pt-2 pb-2 cursor-pointer px-2 py-1 rounded text-indigo-700bg-white/20 text-white hover:bg-white/30 transition-all",onClick:r,children:[l.jsx(A,{size:18}),l.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:i})]})},er=({editor:e,initialValue:r,onChange:i,onSend:a,editorRef:t})=>l.jsx("div",{className:"flex-1",children:l.jsx(U,{editor:e,initialValue:r,onChange:i,children:l.jsx(H,{ref:t,className:"pt-2 px-3 pb-2 rounded-lg bg-white/30 text-white placeholder-white/70 border-none outline-none backdrop-blur min-h-[48px] max-h-32 overflow-hidden resize-none",renderElement:c.useCallback(n=>l.jsx(O,{...n}),[]),renderLeaf:c.useCallback(n=>l.jsx(B,{...n}),[]),placeholder:"Type your message...",spellCheck:!0,onKeyDown:n=>{n.key==="Enter"&&!n.shiftKey&&(n.preventDefault(),a())}})})});function rr(e){return M({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M430.1 347.9c-6.6-6.1-16.3-7.6-24.6-9-11.5-1.9-15.9-4-22.6-10-14.3-12.7-14.3-31.1 0-43.8l30.3-26.9c46.4-41 46.4-108.2 0-149.2-34.2-30.1-80.1-45-127.8-45-55.7 0-113.9 20.3-158.8 60.1-83.5 73.8-83.5 194.7 0 268.5 41.5 36.7 97.5 55 152.9 55.4h1.7c55.4 0 110-17.9 148.8-52.4 14.4-12.7 12-36.6.1-47.7zM120 216c0-17.7 14.3-32 32-32s32 14.3 32 32-14.3 32-32 32-32-14.3-32-32zm40 126c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm64-161c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm72 219c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm24-208c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(e)}const tr=["#ffffff","#1e1e1e","#e74c3c","#74b9ff","#b2bec3","#00b894","#fd79a8","#e17055"],ar=({editor:e,onFocusEditor:r})=>{const[i,a]=c.useState(!1),t=c.useRef(null),n=()=>x.marks(e)?.color||"#ffffff",s=d=>{x.addMark(e,"color",d),a(!1),r()};c.useEffect(()=>{const d=p=>{const m=p.target;i&&t.current&&!t.current.contains(m)&&a(!1)};return document.addEventListener("pointerdown",d),()=>{document.removeEventListener("pointerdown",d)}},[i]);const g=n();return l.jsxs("div",{className:"relative ml-2",children:[l.jsx("button",{type:"button",className:"w-8 h-8 rounded border-2 border-white/20 hover:border-white/40 transition-all relative focus:outline-none focus:ring-2 focus:ring-white/40",style:{backgroundColor:g},onClick:()=>{a(!i),r()},"aria-label":"Text color",children:l.jsx("span",{className:"absolute inset-0 flex items-center justify-center  font-bold",style:{color:g==="#ffffff"?"#000000":"#ffffff",textShadow:"1px 1px 1px rgba(0,0,0,0.5)"},children:l.jsx(rr,{})})}),i&&l.jsx("div",{className:"absolute bottom-full mb-2 left-0 z-50 p-2 bg-white rounded-lg shadow-lg border",ref:t,children:l.jsx("div",{className:"flex flex-col gap-1",children:tr.map(d=>l.jsx("button",{type:"button",className:`w-6 h-6 rounded border-2 transition-all hover:scale-110 focus:outline-none focus:ring-2 focus:ring-gray-400 ${g===d?"ring-2 ring-blue-500 border-blue-500":"border-gray-300"}`,style:{backgroundColor:d},onClick:()=>s(d),"aria-label":`Select color ${d}`},d))})})]})},ir=({editor:e,onFocusEditor:r})=>{const i=t=>{a(e,t)?x.removeMark(e,t):x.addMark(e,t,!0)},a=(t,n)=>{const s=x.marks(t);return s?s[n]===!0:!1};return l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{type:"button",onMouseDown:t=>{t.preventDefault(),i("bold"),r()},className:`p-2 rounded transition-all ${a(e,"bold")?"bg-blue-500 text-white":"bg-white/20 text-white hover:bg-white/30"}`,children:l.jsx(D,{size:12})}),l.jsx("button",{type:"button",onMouseDown:t=>{t.preventDefault(),i("italic"),r()},className:`p-2 rounded transition-all ${a(e,"italic")?"bg-blue-500 text-white":"bg-white/20 text-white hover:bg-white/30"}`,children:l.jsx(L,{size:12})}),l.jsx("button",{type:"button",onMouseDown:t=>{t.preventDefault(),i("underline"),r()},className:`p-2 rounded transition-all ${a(e,"underline")?"bg-blue-500 text-white":"bg-white/20 text-white hover:bg-white/30"}`,children:l.jsx(I,{size:12})}),l.jsx(ar,{editor:e,onFocusEditor:r})]})},pr=({onSend:e})=>{const[r,i]=c.useState(!1),[a,t]=c.useState(!1),n=c.useRef(null),{editor:s,clearEditor:g,initialValue:d,handleChange:p,handleEmojiClick:m}=$(),h=()=>{n.current&&n.current.focus()},G=f=>{f?.url&&(e(f.url,void 0),i(!1),h())},N=f=>{m(f),h()},T=f=>{e("",f)},w=()=>{if(s.children.map(z=>z.children?.map(F=>F.text).join("")||"").join("").trim()==="")return;const S=q(s.children);e(S),g()};return l.jsxs("div",{className:"flex flex-col w-full relative",children:[l.jsxs("div",{className:"flex items-center gap-1 mb-2 p-1 bg-black/20 rounded-lg relative",children:[l.jsx(Xe,{showGifDropdown:r,onToggleGifDropdown:()=>{i(!r),t(!1),h()},onGifSelect:G,onFocusEditor:h}),l.jsx(Je,{onImageUpload:T,onFocusEditor:h}),l.jsx(Ze,{showEmoji:a,onToggleEmoji:()=>t(!a),onEmojiClick:N,onFocusEditor:h}),l.jsx(ir,{editor:s,onFocusEditor:h})]}),l.jsxs("div",{className:"flex items-end gap-2",children:[l.jsx(er,{editor:s,initialValue:d,onChange:p,onSend:w,editorRef:n}),l.jsx("button",{type:"button",onClick:w,className:"px-4 py-3 flex items-center justify-center bg-indigo-500 text-white font-semibold rounded-lg hover:bg-indigo-600 transition-colors shadow-md",style:{minWidth:48,minHeight:48},"aria-label":"Send message",children:l.jsx(K,{size:18})})]})]})};export{pr as default};
